(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+4DI":function(t,e,s){},"+Nfd":function(t,e,s){},"/W3c":function(t,e,s){"use strict";var a=s("Kvkj"),i=s("iHbI"),n={name:"dynamicWrite",data:()=>({content:"",type:1,faceVisible:!1,isInsertPicture:!1,isInsertLink:!1,coverImage:"",isLinkPopover:!1,isTopicPopover:!1,linkContent:"",searchTopicVal:"",searchTopicResultList:[],currentTopic:{}}),props:{afferentTopic:{default:""}},created(){this.$store.dispatch("dynamic/GET_DYNAMIC_TOPIC_LIST").then(t=>{this.searchTopicResultList=t.data.list;let e=this.$route.params.dynamicTopicId;e&&this.initTopic(e)})},watch:{coverImage(t){t?(this.type=2,this.isInsertPicture=!0):(this.type=1,this.isInsertPicture=!1)},linkContent(t){t?this.type=3:(this.isInsertLink=!1,this.type=1)},searchTopicVal(t){let e=[];for(let t in this.dynamic.dynamicTopicList)this.dynamic.dynamicTopicList[t].name.toLowerCase().indexOf(this.searchTopicVal.toLowerCase())>=0&&e.push(this.dynamic.dynamicTopicList[t]);this.searchTopicResultList=e},content:{handler(){this.$refs.dynamicContent.setAttribute("maxlength",600),this.number=600-this.$refs.dynamicContent.value.length},deep:!0}},methods:{changeDynamicImage({formData:t,config:e}){if(!this.personalInfo.islogin)return this.$message.warning("当前用户未登陆，请前往登陆后尝试"),!1;this.$store.dispatch("dynamic/UPLOAD_DYNAMIC_PICTURE",t).then(t=>{this.coverImage+=t.data.img+","})},deleteCoverImage(t,e){let s=this.coverImage.split(",")||[];s.splice(e,1);let a=s.join(",");this.coverImage=a},changeFace(t){this.faceVisible=!1,this.content=this.content+t.face_text},trim:t=>(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,""),initTopic(t){this.dynamic.dynamicTopicList.map(e=>{e.topic_id===t&&(this.currentTopic=e)})},onTopic(t){this.currentTopic=t,this.isTopicPopover=!1},onLink(t){this.isLinkPopover=!1,"delete"===t?(this.linkContent="",this.isInsertLink=!1):this.isInsertLink=!0},send(){return this.personalInfo.islogin?this.content?void this.createDynamic():(this.$message.warning("当前内容为空，请输入内容后再发送"),!1):(this.$message.warning("当前用户未登陆，请前往登陆后尝试"),!1)},createDynamic(){if(!this.personalInfo.islogin)return this.$message.warning("当前用户未登陆，请前往登陆后尝试"),!1;let t="";2===this.type?t=this.coverImage:3===this.type&&(t=this.linkContent);let e={content:this.trim(this.content),attach:t,type:this.type,topic_ids:this.currentTopic.topic_id};this.$store.dispatch("dynamic/CREATE_DYNAMIC",e).then(t=>{"success"===t.state?(this.$message.success("动态创建成功"),this.content="",this.coverImage="",this.currentTopic="",this.linkContent="",this.$emit("changeDynamicWrite")):this.$message.error(t.message)})}},computed:{...Object(i.b)(["personalInfo","dynamic"]),coverImageArr(){let t=this.coverImage.split(",")||[];return this.coverImage.split(",").length>0?t:[]}},components:{UploadImage:a.i,Face:a.d,Popover:a.g}},o=(s("qPLm"),s("Yj/X")),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dynamic-editor-dialog dynamic-editor"},[s("div",{staticClass:"editor-body"},[s("div",{staticClass:"content"},[s("div",{staticClass:"rich-editor"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.content,expression:"content",modifiers:{trim:!0}}],ref:"dynamicContent",staticClass:"empty",attrs:{placeholder:"发布的动态~"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.currentTopic.name?s("div",{staticClass:"current-topic"},[t._v(t._s(t.currentTopic.name))]):t._e()]),t._v(" "),s("span",{staticClass:"word-counter count"},[t._v(t._s(t.content.length<600?600-t.content.length:0))])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isInsertPicture,expression:"isInsertPicture"}],staticClass:"insert-picture"},[t._l(t.coverImageArr,(function(e,a){return e?s("div",{key:a,staticClass:"img-item"},[s("i",{staticClass:"close el-icon-error",on:{click:function(s){return t.deleteCoverImage(e,a)}}}),t._v(" "),s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"url"}],attrs:{alt:""}})]):t._e()})),t._v(" "),t.coverImageArr.length<7?s("div",{staticClass:"add-picture"},[s("upload-image",{on:{changeUpload:t.changeDynamicImage}},[s("i",{staticClass:"el-icon-plus"})])],1):t._e()],2),t._v(" "),t.isInsertLink?s("div",{staticClass:"insert-link"},[s("span",{staticClass:"insert-link-view"},[s("i",{staticClass:"close el-icon-error",on:{click:function(e){t.isInsertLink=!1,t.linkContent=""}}}),t._v(t._s(t.linkContent))])]):t._e(),t._v(" "),s("div",{staticClass:"editor-bottom"},[s("div",{staticClass:"toolbar editor-toolbar"},[s("div",{staticClass:"tool"},[s("div",{staticClass:"emoji picker"},[s("Popover",{attrs:{visible:t.faceVisible},on:{"update:visible":function(e){t.faceVisible=e}}},[t.faceVisible?s("face",{on:{changeFace:t.changeFace}}):t._e(),t._v(" "),s("div",{staticClass:"emoji-box",attrs:{slot:"button"},slot:"button"},[s("i",{staticClass:"el-icon-picture-outline-round"}),t._v(" "),s("span",{staticClass:"tool-text"},[t._v("表情")])])],1)],1),t._v(" "),s("div",{staticClass:"file-picker picker",class:{"no-click":3===t.type}},[s("upload-image",{directives:[{name:"show",rawName:"v-show",value:3!==t.type,expression:"type!==3"}],on:{changeUpload:t.changeDynamicImage}},[s("div",{staticClass:"emoji-box"},[s("i",{staticClass:"el-icon-picture-outline"}),t._v(" "),s("span",{staticClass:"tool-text"},[t._v("图片")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.type,expression:"type===3"}],staticClass:"emoji-box"},[s("i",{staticClass:"el-icon-picture-outline"}),t._v(" "),s("span",{staticClass:"tool-text"},[t._v("图片")])])],1),t._v(" "),s("div",{staticClass:"link-picker picker",class:{"no-click":2===t.type}},[s("Popover",{staticClass:"link-view",attrs:{visible:t.isLinkPopover},on:{"update:visible":function(e){t.isLinkPopover=e}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.linkContent,expression:"linkContent"}],staticClass:"link-input",attrs:{type:"text",placeholder:"请输入连接地址"},domProps:{value:t.linkContent},on:{input:function(e){e.target.composing||(t.linkContent=e.target.value)}}}),t._v(" "),s("div",{staticStyle:{"text-align":"right",margin:"0"}},[s("button",{staticClass:"btn btn-default btn-sm",on:{click:function(e){return t.onLink("delete")}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.onLink("enter")}}},[t._v("确定")])]),t._v(" "),[s("div",{directives:[{name:"show",rawName:"v-show",value:2!==Number(t.type),expression:"Number(type)!==2"}],staticClass:"emoji-box",attrs:{slot:"button"},slot:"button"},[s("i",{staticClass:"el-icon-link"}),t._v(" "),s("span",{staticClass:"tool-text"},[t._v("链接")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2===t.type,expression:"type===2"}],staticClass:"emoji-box",attrs:{slot:"no-button"},slot:"no-button"},[s("i",{staticClass:"el-icon-link"}),t._v(" "),s("span",{staticClass:"tool-text"},[t._v("链接")])])]],2)],1),t._v(" "),s("div",{staticClass:"topic-picker picker",class:{"no-click":t.afferentTopic}},[s("Popover",{attrs:{visible:t.isTopicPopover},on:{"update:visible":function(e){t.isTopicPopover=e}}},[s("div",{staticClass:"topic-view"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTopicVal,expression:"searchTopicVal"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入连接地址"},domProps:{value:t.searchTopicVal},on:{input:function(e){e.target.composing||(t.searchTopicVal=e.target.value)}}}),t._v(" "),s("ul",{staticClass:"topic-list"},[s("li",{on:{click:t.onTopic}},[s("div",{staticClass:"topic-item no-topic"},[s("div",{staticClass:"icon"},[s("i",{staticClass:"el-icon-remove-outline"})]),t._v(" "),s("div",{staticClass:"content"},[s("span",[t._v("不添加任何话题")])])])]),t._v(" "),t._l(t.searchTopicResultList,(function(e,a){return s("li",{key:a,on:{click:function(s){return t.onTopic(e)}}},[s("div",{staticClass:"topic-item"},[s("div",{staticClass:"lazy loaded immediate"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.icon,expression:"item.icon"}],staticClass:"icon",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"content"},[s("span",[t._v(t._s(e.name))])])])])}))],2)]),t._v(" "),[t.afferentTopic?s("div",{staticClass:"emoji-box",attrs:{slot:"no-button"},slot:"no-button"},[s("i",{staticClass:"el-icon"},[t._v("#")]),t._v(" "),s("span",{staticClass:"tool-text"},[t._v("话题")])]):s("div",{staticClass:"emoji-box",attrs:{slot:"button"},slot:"button"},[s("i",{staticClass:"el-icon"},[t._v("#")]),t._v(" "),s("span",{staticClass:"tool-text"},[t._v("话题")])])]],2)],1)]),t._v(" "),s("div",{staticClass:"submit"},[s("button",{staticClass:"btn send-dynamic",on:{click:t.send}},[t._v("发布")])])])])])}),[],!1,null,"f276a100",null);e.a=r.exports},"/rXd":function(t,e,s){"use strict";var a=s("YXap");s.n(a).a},"06GZ":function(t,e,s){},"1+R9":function(t,e,s){},"1Mp0":function(t,e,s){"use strict";s.r(e);var a=s("Kvkj"),i=s("qu4x"),n=s("8+Sn"),o=s("vuaj"),r=s.n(o),l=s("MrL/"),c=s.n(l),m=s("iHbI"),d=s("7Qib"),u=s("m0go"),_=s("YP4+"),p={name:"WriteBookView",minixs:[u.a],metaInfo(){return{title:"create"===this.$route.params.book_id?"创建小书章节":`编辑-${this.editDataInfo.title||""}`||"",meta:[{name:"description",content:"create"===this.$route.params.book_id?"创建小书章节":`编辑-${this.editDataInfo.title||""}`||""}],htmlAttrs:{lang:"zh"},script:[...d.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},asyncData:async({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("PERSONAL_INFO",{accessToken:s}),t.dispatch("website/GET_WEBSITE_INFO"),t.dispatch("books/GET_BOOKS_INFO",{books_id:e.params.books_id,type:"info",accessToken:s})]),created(){this.currentWriteType=this.$route.query.type||"add"},mounted(){this.$store.dispatch("books/GET_BOOKS_BOOK_ALL",{books_id:this.$route.params.books_id}),this.initEdit()},data:()=>({currentWriteType:"",trialRead:_.n,trialReadText:_.o,isFree:_.e,write:{title:"",content:"",sort:0,trial_read:1},isShowAside:!0,toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,superscript:!0,quote:!0,ol:!0,link:!0,imagelink:!0,help:!0,code:!0,subfield:!0,fullscreen:!0,undo:!0,trash:!0,save:!1},editDataInfo:{}}),watch:{$route(t,e){this.initEdit()}},methods:{commandChange(t){"esc"!==t.name?this.$router.push(t):this.escLogin()},escLogin(){this.$message.warning("已退出当前账户，请重新登录"),n.a.delete("accessToken"),window.location.reload()},resetBook(){this.$confirm("此操作将恢复到初始编辑状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.initEdit()}).catch(()=>{})},deleteChapter(t){this.$confirm("此操作将永久删除该小书章节, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("book/DELETE_BOOK",{book_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message,",前往创建"),this.$store.dispatch("books/GET_BOOKS_BOOK_ALL",{books_id:this.$route.params.books_id}),this.writeChapter("create")):this.$message.warning(t.message)})}).catch(()=>{})},initEdit(){"create"!==this.$route.params.book_id?this.$store.dispatch("book/GET_USER_BOOK_INFO",{book_id:this.$route.params.book_id}).then(t=>{this.write=t.data.book,this.editDataInfo=t.data.book,this.write.content=t.data.book.origin_content}).catch(t=>{}):this.write={title:"",content:"",sort:this.books.booksBookAll?this.books.booksBookAll.length+1:0}},imageFilter(t){return!(t.size>1048576)||(this.$message.success("上传小书图片应该小于1M"),!1)},lookChapter(t){this.$router.push({name:"BookView",params:{books_id:this.$route.params.books_id,book_id:t}})},$imgAdd(t,e){var s=new FormData;s.append("file",e),this.$store.dispatch("book/UPLOAD_BOOK_IMG",s).then(e=>{if("success"!==e.state)return this.$message.warning(e.message),!1;this.$message.success("上传图片成功"),this.$refs.mavonEditor.$img2Url(t,e.data.img)})},writeChapter(t){this.$router.push({name:"WriteBookView",params:{books_id:this.$route.params.books_id,book_id:t}})},saveBook(){if(!this.write.title)return this.$message.warning("小书章节标题不能为空！"),!1;if(!this.write.content)return this.$message.warning("小书章节内容不能为空！"),!1;var t={books_id:this.$route.params.books_id,title:this.write.title,trial_read:this.write.trial_read,content:c()(this.write.content,{breaks:!0}),origin_content:this.write.content,sort:this.write.sort};"create"!==this.$route.params.book_id&&(t.book_id=this.$route.params.book_id);let e="create"===this.$route.params.book_id?"book/CREATE_BOOK":"book/UPDATE_BOOK";this.$store.dispatch(e,t).then(t=>{"success"===t.state?(this.$message.success(t.message),"create"===this.$route.params.book_id&&this.writeChapter(t.data.book.book_id),this.$store.dispatch("books/GET_BOOKS_BOOK_ALL",{books_id:this.$route.params.books_id})):this.$message.warning(t.message)}).catch(t=>{this.$message.error("出现错误："+t)})}},computed:{...Object(m.b)(["books","personalInfo","website"])},components:{"mavon-editor":i.mavonEditor,UploadImage:a.i,ClientOnly:r.a,Dropdown:a.c}},v=(s("5SXd"),s("Yj/X")),g=Object(v.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("client-only",[s("div",{staticClass:"book-read-view"},[s("div",{staticClass:"book-section",class:{"fold-pc":!t.isShowAside}},[s("div",{staticClass:"book-summary"},[s("div",{staticClass:"book-summary-inner"},[s("div",{staticClass:"book-summary__header"},[t.website.meta.logo?s("router-link",{staticClass:"navbar-brand logo",style:{"background-image":"url("+t.website.meta.logo+")"},attrs:{to:{name:"home"}}}):s("router-link",{staticClass:"navbar-brand logo-text",attrs:{to:{name:"home"}}},[t._v(t._s(t.website.meta.website_name))]),t._v(" "),s("div",{staticClass:"label"},[t._v("小书")])],1),t._v(" "),s("div",{staticClass:"book-summary-btn"},[s("div",{staticClass:"section-buy",on:{click:function(e){return t.writeChapter("create")}}},[t._v("创建新章节")])]),t._v(" "),s("div",{staticClass:"book-directory",class:{bought:t.personalInfo.islogin}},t._l(t.books.booksBookAll,(function(e,a){return s("router-link",{key:a,staticClass:"section",attrs:{to:{name:"WriteBookView",params:{books_id:t.$route.params.books_id,book_id:e.book_id}}}},[s("div",{staticClass:"step"},[s("div",{staticClass:"step-btn"},[t._v(t._s(a+1))])]),t._v(" "),s("div",{staticClass:"center"},[s("div",{staticClass:"title"},[t._v(t._s(e.title))])])])})),1),t._v(" "),s("div",{staticClass:"book-summary__footer"})])]),t._v(" "),s("div",{staticClass:"book-content"},[s("div",{staticClass:"book-content-inner"},[s("div",{staticClass:"book-content__header"},[s("div",{staticClass:"menu",on:{click:function(e){t.isShowAside=!t.isShowAside}}},[s("i",{staticClass:"el-icon-s-operation"})]),t._v(" "),s("div",{staticClass:"title"},[s("router-link",{attrs:{to:{name:"book",params:{books_id:t.$route.params.books_id}}}},[t._v(t._s(t.books.booksInfo.title))])],1),t._v(" "),s("div",{staticClass:"user-auth"},[t.personalInfo.islogin?s("div",{staticClass:"nav-item dropdown"},[s("Dropdown",{attrs:{placement:"right"}},[s("div",{staticClass:"el-dropdown-link",attrs:{slot:"button"},slot:"button"},[s("div",{staticClass:"avatar-img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.personalInfo.user.avatar,expression:"personalInfo.user.avatar"}],staticClass:"box-image",attrs:{alt:""}})])]),t._v(" "),s("div",{staticClass:"dropdown-menu-view"},[s("router-link",{staticClass:"dropdown-menu-item",attrs:{to:{name:"user",params:{uid:t.personalInfo.user.uid,routeType:"article"}}}},[t._v("\n                      我的主页")]),t._v(" "),s("router-link",{staticClass:"dropdown-menu-item",attrs:{to:{name:"setting"}}},[t._v("\n                      设置")]),t._v(" "),s("div",{staticClass:"dropdown-menu-item",on:{click:t.escLogin}},[t._v("\n                      退出\n                    ")])],1)])],1):s("div",{staticClass:"nav-item auth"},["yes"===t.website.config.on_login?s("div",{staticClass:"nav-item-view"},[s("router-link",{staticClass:"btn btn-sm sign-btn btn-block",attrs:{to:{name:"signIn"}}},[t._v("登录")])],1):t._e(),t._v(" "),"yes"===t.website.config.on_register?s("div",{staticClass:"nav-item-view"},[s("router-link",{staticClass:"btn s-btn--primary btn-sm sign-btn btn-outline-warning",attrs:{to:{name:"signIn"}}},[t._v("注册")])],1):t._e()])])]),t._v(" "),s("div",{staticClass:"book-body transition--next"},[s("div",{staticClass:"section-content"},[s("div",{staticClass:"operating clearfix"},[s("button",{staticClass:"btn btn-save",on:{click:t.saveBook}},[t._v(t._s("create"===t.$route.params.book_id?"新建小书章节":"更新当前章节"))]),t._v(" "),"create"!==t.$route.params.book_id?s("button",{staticClass:"btn btn-cancel",on:{click:t.resetBook}},[t._v("恢复默认稿")]):t._e(),t._v(" "),"create"!==t.$route.params.book_id?s("button",{staticClass:"btn btn-look",on:{click:function(e){return t.lookChapter(t.editDataInfo.book_id)}}},[t._v("查看演示")]):t._e(),t._v(" "),t.books.booksInfo.is_free===t.isFree.pay?s("div",{staticClass:"trial-read"},[s("label",{attrs:{for:""}},[t._v("开启试读：")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.trial_read,expression:"write.trial_read"}],staticClass:"trial-read-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"trial_read",e.target.multiple?s:s[0])}}},t._l(t.trialReadText,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])})),0)]):t._e(),t._v(" "),"create"!==t.$route.params.book_id?s("button",{staticClass:"btn btn-delete",on:{click:function(e){return t.deleteChapter(t.editDataInfo.book_id)}}},[s("i",{staticClass:"el-icon-delete"})]):t._e()]),t._v(" "),s("div",{staticClass:"content-edit"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.write.title,expression:"write.title"}],staticClass:"title-input",attrs:{type:"text"},domProps:{value:t.write.title},on:{input:function(e){e.target.composing||t.$set(t.write,"title",e.target.value)}}}),t._v(" "),s("mavon-editor",{ref:"mavonEditor",attrs:{defaultOpen:"edit",boxShadow:!1,toolbars:t.toolbars,imageFilter:t.imageFilter},on:{imgAdd:t.$imgAdd},model:{value:t.write.content,callback:function(e){t.$set(t.write,"content",e)},expression:"write.content"}})],1)])])])])])])])}),[],!1,null,"32727d92",null);e.default=g.exports},"1Ph+":function(t,e,s){"use strict";var a=s("AwkW");s.n(a).a},"2UPP":function(t,e,s){"use strict";var a=s("6Omj");s.n(a).a},"306U":function(t,e,s){"use strict";var a=s("lTgj");s.n(a).a},"34oN":function(t,e,s){},"3q3C":function(t,e,s){"use strict";var a=s("c/TI");s.n(a).a},"3sjr":function(t,e,s){"use strict";var a=s("I2+V");s.n(a).a},"4AYe":function(t,e,s){"use strict";var a=s("iHbI"),i=s("Kvkj"),n={name:"dynamicAside",asyncData:async({store:t,route:e,accessToken:s=""})=>Promise.all([]),mounted(){this.personalInfo.islogin&&this.$store.dispatch("user/GET_USER_INFO_ALL",{uid:this.personalInfo.user.uid}),this.$store.dispatch("dynamic/GET_RECOMMEND_DYNAMIC_LIST")},methods:{contentRender(t){let e=t;return i.j.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e},isRssDynamicTopic(t){return~this.user.allRssDynamicTopicId.indexOf(t.topic_id)}},computed:{...Object(a.b)(["personalInfo","dynamic","website","user"])}},o=(s("dnor"),s("Yj/X")),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",{staticClass:"dynamic-aside"},[t.personalInfo.islogin?s("div",{staticClass:"profile-box client-card"},[s("div",{staticClass:"profile"},[s("a",{attrs:{href:"javascript:;"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.user.user.avatar,expression:"user.user.avatar"}],staticClass:"avatar",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"user-info"},[s("a",{staticClass:"username ellipsis"},[t._v(t._s(t.user.user.nickname))]),t._v(" "),s("div",{staticClass:"position ellipsis"},[t._v(t._s(t.user.user.nickname))])])]),t._v(" "),s("ul",{staticClass:"stat-list"},[s("a",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("片刻")]),t._v(" "),s("div",{staticClass:"count"},[t._v(t._s(t.user.dynamicCount))])]),s("a",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("关注")]),t._v(" "),s("div",{staticClass:"count"},[t._v(t._s(t.user.userAttentionCount))])]),s("a",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("关注者")]),t._v(" "),s("div",{staticClass:"count"},[t._v(t._s(t.user.otherUserAttentionCount))])])])]):t._e(),t._v(" "),s("div",{staticClass:"related-dynamic-block dynamic-block client-card"},[s("header",{staticClass:"title"},[t._v("推荐片刻")]),t._v(" "),s("ul",{staticClass:"dynamic-list"},t._l(t.dynamic.recommendDynamicList,(function(e,a){return s("li",{key:a,staticClass:"item"},[s("router-link",{staticClass:"dynamic",attrs:{to:{name:"dynamicView",params:{dynamicId:e.id}}}},[s("div",{staticClass:"content-box"},[s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.contentRender(e.content))}}),t._v(" "),s("div",{staticClass:"stat item"},[s("span",[t._v(t._s(e.thumb_count)+" 赞 · ")]),s("span",[t._v(t._s(e.comment_count)+" 评论")])])])])],1)})),0)])])}),[],!1,null,null,null);e.a=r.exports},"4CcT":function(t,e,s){},"4DUp":function(t,e,s){"use strict";var a=s("34oN");s.n(a).a},"5+xG":function(t,e,s){"use strict";var a=s("EpuN");s.n(a).a},"5SXd":function(t,e,s){"use strict";var a=s("4CcT");s.n(a).a},"5d92":function(t,e,s){},"5kLx":function(t,e,s){"use strict";var a=s("fZ/o");s.n(a).a},"6+xG":function(t,e,s){"use strict";var a=s("upuQ");s.n(a).a},"6Omj":function(t,e,s){},"6Pmt":function(t,e,s){"use strict";var a=s("yvsf");s.n(a).a},"6QQT":function(t,e,s){},"7PYw":function(t,e,s){"use strict";var a=s("FT99");s.n(a).a},"7kO2":function(t,e,s){"use strict";var a=s("dY0y");s.n(a).a},"7yFN":function(t,e,s){"use strict";var a=s("6QQT");s.n(a).a},"8C+B":function(t,e,s){},"9zyW":function(t,e,s){"use strict";var a=s("kYSE");s.n(a).a},Alhn:function(t,e,s){"use strict";s.r(e);var a={name:"s-md-toolbar-right",props:{s_subfield:{type:Boolean,required:!0},toolbars:{type:Object,required:!0},s_preview_switch:{type:Boolean,required:!0},s_fullScreen:{type:Boolean,required:!0},s_html_code:{type:Boolean,required:!0},s_navigation:{type:Boolean,required:!0},d_words:{type:Object,required:!0}},methods:{$clicks(t){this.$emit("toolbar_right_click",t)}}},i=s("Yj/X"),n=Object(i.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"v-right-item"},[t._t("right-toolbar-before"),t._v(" "),t.toolbars.navigation?s("button",{directives:[{name:"show",rawName:"v-show",value:!t.s_navigation,expression:"!s_navigation"}],staticClass:"op-icon fa fa-mavon-bars",attrs:{type:"button","aria-hidden":"true",title:t.d_words.tl_navigation_on+" (F8)"},on:{click:function(e){return t.$clicks("navigation")}}}):t._e(),t._v(" "),t.toolbars.navigation?s("button",{directives:[{name:"show",rawName:"v-show",value:t.s_navigation,expression:"s_navigation"}],staticClass:"op-icon fa fa-mavon-bars selected",attrs:{type:"button","aria-hidden":"true",title:t.d_words.tl_navigation_off+" (F8)"},on:{click:function(e){return t.$clicks("navigation")}}}):t._e(),t._v(" "),t.toolbars.preview?s("button",{directives:[{name:"show",rawName:"v-show",value:t.s_preview_switch,expression:"s_preview_switch"}],staticClass:"op-icon fa fa-mavon-eye-slash selected",attrs:{type:"button","aria-hidden":"true",title:t.d_words.tl_edit+" (F9)"},on:{click:function(e){return t.$clicks("preview")}}}):t._e(),t._v(" "),t.toolbars.preview?s("button",{directives:[{name:"show",rawName:"v-show",value:!t.s_preview_switch,expression:"!s_preview_switch"}],staticClass:"op-icon fa fa-mavon-eye",attrs:{type:"button","aria-hidden":"true",title:t.d_words.tl_preview+" (F9)"},on:{click:function(e){return t.$clicks("preview")}}}):t._e(),t._v(" "),t.toolbars.fullscreen?s("button",{directives:[{name:"show",rawName:"v-show",value:!t.s_fullScreen,expression:"!s_fullScreen"}],staticClass:"op-icon fa fa-mavon-arrows-alt",attrs:{type:"button",title:t.d_words.tl_fullscreen_on+" (F10)","aria-hidden":"true"},on:{click:function(e){return t.$clicks("fullscreen")}}}):t._e(),t._v(" "),t.toolbars.fullscreen?s("button",{directives:[{name:"show",rawName:"v-show",value:t.s_fullScreen,expression:"s_fullScreen"}],staticClass:"op-icon fa fa-mavon-compress selected",attrs:{type:"button",title:t.d_words.tl_fullscreen_off+" (F10)","aria-hidden":"true"},on:{click:function(e){return t.$clicks("fullscreen")}}}):t._e(),t._v(" "),t.toolbars.readmodel?s("button",{staticClass:"op-icon fa fa-mavon-window-maximize",attrs:{type:"button","aria-hidden":"true",title:t.d_words.tl_read+" (F11)"},on:{click:function(e){return t.$clicks("read")}}}):t._e(),t._v(" "),t.toolbars.subfield?s("button",{staticClass:"op-icon fa fa-mavon-columns",class:{selected:t.s_subfield},attrs:{type:"button","aria-hidden":"true",title:(t.s_subfield?t.d_words.tl_single_column:t.d_words.tl_double_column)+" (F12)"},on:{click:function(e){return t.$clicks("subfield")}}}):t._e(),t._v(" "),t.toolbars.help&&t.toolbars.htmlcode&&t.toolbars.readmodel&&t.toolbars.fullscreen&&t.toolbars.subfield&&t.toolbars.navigation?s("span",{staticClass:"op-icon-divider"}):t._e(),t._v(" "),t.toolbars.htmlcode?s("button",{directives:[{name:"show",rawName:"v-show",value:!t.s_html_code,expression:"!s_html_code"}],staticClass:"op-icon fa fa-mavon-code",attrs:{type:"button",title:t.d_words.tl_html_on,"aria-hidden":"true"},on:{click:function(e){return t.$clicks("html")}}}):t._e(),t._v(" "),t.toolbars.htmlcode?s("button",{directives:[{name:"show",rawName:"v-show",value:t.s_html_code,expression:"s_html_code"}],staticClass:"op-icon fa fa-mavon-code selected",attrs:{type:"button",title:t.d_words.tl_html_off,"aria-hidden":"true"},on:{click:function(e){return t.$clicks("html")}}}):t._e(),t._v(" "),t.toolbars.help?s("button",{staticClass:"op-icon fa fa-mavon-question-circle",staticStyle:{"font-size":"17px",padding:"5px 6px 5px 3px"},attrs:{type:"button",title:t.d_words.tl_help,"aria-hidden":"true"},on:{click:function(e){return t.$clicks("help")}}}):t._e(),t._v(" "),t._t("right-toolbar-after")],2)}),[],!1,null,null,null);e.default=n.exports},AwkW:function(t,e,s){},"Bi/j":function(t,e,s){},Bspf:function(t,e,s){"use strict";var a=s("+4DI");s.n(a).a},ByEM:function(t,e,s){"use strict";var a=s("1+R9");s.n(a).a},CD3j:function(t,e,s){},CKd3:function(t,e,s){},CWHA:function(t,e,s){"use strict";s.r(e);var a=s("qYcz"),i=s("Z4jx"),n=s("iHbI"),o=s("vuaj"),r=s.n(o),l=s("Kvkj"),c=s("I9FN"),m=s("YP4+"),d={name:"order",metaInfo:()=>({title:"个人中心",htmlAttrs:{lang:"zh"}}),data:()=>({virtualPlusLess:m.s,virtualPlusLessText:m.t,productTypeInfo:m.k,modelName:m.i,statusList:m.l,currProductType:"",detail:{list:[],product_type:"",count:0,page:1,pageSize:10}}),mounted(){this.$store.registerModule("shop",c.a),this.personalInfo.islogin||this.$router.push({name:"signIn"}),this.getList()},methods:{pageChange(t){this.detail.page=t,this.getList()},switchType(t,e){this.currProductType=e,this.getList()},getList(){this.$store.dispatch("shop/GET_ORDER_LIST",{uid:this.personalInfo.user.uid,page:this.detail.page,product_type:this.currProductType||"",pageSize:this.detail.pageSize}).then(t=>{this.detail=t.data})}},computed:{...Object(n.b)(["personalInfo","user"])},components:{UserAside:a.a,ClientOnly:r.a,Collect:i.a,Page:l.f},destroyed(){this.$store.unregisterModule("shop")}},u=(s("306U"),s("Yj/X")),_=Object(u.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("client-only",[s("section",{staticClass:"layout-content detail-lay"},[s("div",{staticClass:"container  box-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8 main"},[s("div",{staticClass:"client-card pd20"},[s("h3",{staticClass:"title"},[t._v("我的订单")]),t._v(" "),s("ul",{staticClass:"nav-item-view"},[s("li",{staticClass:"nav-item",class:{active:!t.currProductType},on:{click:function(e){return t.switchType("","")}}},[s("a",{staticClass:"collection-name",attrs:{href:"javascript:;"}},[t._v("\n                  全部\n                ")])]),t._v(" "),t._l(t.productTypeInfo,(function(e,a,i){return e.isUse?s("li",{key:i,staticClass:"nav-item",class:{active:a==t.currProductType},on:{click:function(s){return t.switchType(e,a)}}},[s("a",{staticClass:"collection-name",attrs:{href:"javascript:;"}},[t._v("\n                  "+t._s(e.name)+"\n                ")])]):t._e()}))],2),t._v(" "),s("div",{staticClass:"detail-view row"},t._l(t.detail.list,(function(e,a){return s("div",{key:a,staticClass:"col-xs-12 col-sm-6 col-md-6 detail-item"},[e.product_type==t.modelName.books?s("div",{staticClass:"books"},[s("div",{staticClass:"library-item__thumb"},[s("router-link",{attrs:{to:{name:"book",params:{books_id:e.productInfo.books_id}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.productInfo.cover_img,expression:"item.productInfo.cover_img"}],staticClass:"img-full",attrs:{lazy:"loaded"}})])],1),t._v(" "),s("div",{staticClass:"library-item__body"},[s("router-link",{staticClass:"library-item__title",attrs:{to:{name:"book",params:{books_id:e.productInfo.books_id}}}},[t._v("\n                      "+t._s(e.productInfo.title)+"\n                      "),s("span",{staticClass:"tag-buy"},[t._v("已购买")])]),t._v(" "),s("div",{staticClass:"library-item__info"},[s("span",[s("i",{staticClass:"el-icon-view"}),t._v("\n                        "+t._s(e.productInfo.read_count||0)+" ")]),s("span",{staticStyle:{"margin-left":"8px"}},[s("i",{staticClass:"el-icon-notebook-2"}),t._v("\n                        "+t._s(e.productInfo.bookCount||0)+"\n                      ")])])],1)]):t._e(),t._v(" "),e.product_type==t.modelName.article_annex?s("div",{staticClass:"article-annex"},[s("div",{staticClass:"library-item__body"},[s("router-link",{staticClass:"library-item__title",attrs:{to:{name:"article",params:{aid:e.productInfo.aid}}}},[t._v(t._s(e.productInfo.title)+"\n                      "),s("span",{staticClass:"tag-buy"},[t._v("已购买")])])],1)]):t._e()])})),0),t._v(" "),s("Page",{attrs:{total:Number(t.detail.count),pageSize:Number(t.detail.pageSize),page:Number(t.detail.page)||1},on:{pageChange:t.pageChange}})],1)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4 box-aside"},[s("UserAside")],1)])])])])}),[],!1,null,"2fe428d2",null);e.default=_.exports},DVgl:function(t,e,s){},EG5s:function(t,e,s){},ERny:function(t,e,s){"use strict";var a=s("EG5s");s.n(a).a},EiZP:function(t,e,s){},EpuN:function(t,e,s){},FT99:function(t,e,s){},FX3L:function(t,e,s){"use strict";s.r(e);var a=s("8+Sn"),i=s("Pq6G"),n={name:"ResetPassword",metaInfo:()=>({title:"个人设置-重置密码",htmlAttrs:{lang:"zh"}}),data:()=>({formData:{old_password:"",new_password:"",repeat_new_password:""}}),mounted(){this.$store.registerModule("setting",i.a)},methods:{tapResetPassword(){this.$router.push({name:"resetPassword"})},save(){this.$store.dispatch("setting/PERSONAL_UPLOAD_PASSWORD",this.formData).then(t=>{this.$nextTick((function(){"success"===t.state?(this.$message.warning("密码修改成功,已退出当前账户，请重新登录"),a.a.delete("accessToken"),window.location.reload()):this.$message.warning(t.message)}))})}},destroyed(){this.$store.unregisterModule("setting")}},o=(s("sP4S"),s("Yj/X")),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:" setting-view client-card"},[s("div",{staticClass:"sub-view-box setting-password-view"},[s("h1",[t._v("修改密码")]),t._v(" "),s("ul",{staticClass:"setting-list"},[s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("旧密码")]),t._v(" "),s("div",{staticClass:"input-box password-input password-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.old_password,expression:"formData.old_password"}],staticClass:"input",attrs:{type:"password",placeholder:"请输入原密码"},domProps:{value:t.formData.old_password},on:{input:function(e){e.target.composing||t.$set(t.formData,"old_password",e.target.value)}}}),t._v(" "),s("a",{staticClass:"reset-password",attrs:{href:"javascript:;"},on:{click:t.tapResetPassword}},[t._v("忘记密码？")])])]),t._v(" "),s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("新密码")]),t._v(" "),s("div",{staticClass:"input-box password-input password-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.new_password,expression:"formData.new_password"}],staticClass:"input",attrs:{type:"password",placeholder:"请输入新密码"},domProps:{value:t.formData.new_password},on:{input:function(e){e.target.composing||t.$set(t.formData,"new_password",e.target.value)}}})])]),t._v(" "),s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("确认新密码")]),t._v(" "),s("div",{staticClass:"input-box password-input password-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repeat_new_password,expression:"formData.repeat_new_password"}],staticClass:"input",attrs:{type:"password",placeholder:"确认新密码"},domProps:{value:t.formData.repeat_new_password},on:{input:function(e){e.target.composing||t.$set(t.formData,"repeat_new_password",e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"footer-view"},[s("button",{staticClass:"button button-save",on:{click:t.save}},[t._v("保存")])])])])}),[],!1,null,"725c0b6d",null);e.default=r.exports},FmBQ:function(t,e,s){"use strict";var a=s("GJgk");s.n(a).a},GJgk:function(t,e,s){},GgHC:function(t,e,s){},GqIh:function(t,e,s){"use strict";var a=s("GgHC");s.n(a).a},HyrC:function(t,e,s){"use strict";var a=s("ar2a");s.n(a).a},"I2+V":function(t,e,s){},IW2X:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));const a={langList:["en","zh-CN","fr","pt-BR","ru","de","ja"],toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,undo:!0,redo:!0,trash:!0,save:!0,alignleft:!0,aligncenter:!0,alignright:!0,navigation:!0,subfield:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,preview:!0}}},IlbZ:function(t,e,s){"use strict";s.r(e);var a=s("/idF"),i=s("Kvkj"),n=s("i9CR"),o=s("iHbI"),r={name:"Search",metaInfo(){return{title:"搜索",titleTemplate:`%s - ${this.$route.query.query}`,meta:[{name:"description",content:`搜索-${this.$route.query.query}`}],htmlAttrs:{lang:"zh"}}},asyncData:async({store:t,route:e})=>t.dispatch("search/GET_ARTICLE_SEARCH",{search:e.query.query||"",page:e.query.page||1}),methods:{pageChange(t){this.$router.push({search:this.$route.query.query||"",page:this.$route.query.page||1})}},computed:{...Object(o.b)(["home","website"]),searchArticle(){return this.$store.state.search.searchArticle}},components:{ArticleItem:a.a,websiteNotice:n.a,Page:i.f}},l=(s("5kLx"),s("Yj/X")),c=Object(l.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"article-list-lay layout-content "},[s("div",{staticClass:"container box-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8"},[s("div",{staticClass:"article-list"},[s("div",{staticClass:"main-top"},[s("div",{staticClass:"title"},[s("a",{staticClass:"name",attrs:{href:"javascript:;"}},[t._v("搜索：\n                "+t._s(t.$route.query.query))])]),t._v(" "),s("div",{staticClass:"info"},[t._v("\n              一共有\n              "+t._s(t.searchArticle.count)+" 条结果\n            ")])]),t._v(" "),s("div",{staticClass:"list-container client-card"},[t._m(0),t._v(" "),s("div",{staticClass:"article-view"},t._l(t.searchArticle.article_list,(function(t,e){return s("div",{key:e,staticClass:"article-item"},[s("ArticleItem",{attrs:{articleItem:t}})],1)})),0),t._v(" "),s("Page",{attrs:{total:Number(t.searchArticle.count),pageSize:Number(t.searchArticle.pageSize),page:Number(t.$route.query.page)||1},on:{pageChange:t.pageChange}})],1)])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4"},[s("website-notice")],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"trigger-menu"},[e("li",{staticClass:"active"},[e("a",{attrs:{href:"javascript:;"}},[e("i",{staticClass:"iconfont ic-articles"}),this._v(" 文章")])])])}],!1,null,"6bf50bca",null);e.default=c.exports},JhGN:function(t,e,s){},"LCE+":function(t,e,s){},LFX6:function(t,e,s){"use strict";s.d(e,"a",(function(){return d})),s.d(e,"b",(function(){return u})),s.d(e,"c",(function(){return C}));var a=s("PKEJ");function i(t){if(t.d_history_index>0&&t.d_history_index--,t.s_preview_switch){let e=t.getTextareaDom().selectionStart,s=t.d_value.length;t.$nextTick(()=>{e-=s-t.d_value.length,t.getTextareaDom().selectionStart=e,t.getTextareaDom().selectionEnd=e})}t.getTextareaDom().focus()}function n(t){t.d_history_index<t.d_history.length-1&&t.d_history_index++,t.getTextareaDom().focus()}function o(t){t.d_value="",t.getTextareaDom().focus()}function r(t){t.save(t.d_value,t.d_render)}function l(t){t.insertOl()}function c(t){t.insertUl()}function m(t){t.removeLine()}const d=(t,e,s,a)=>{let i={prefix:"link"===t?`[${e}](`:`![${e}](`,subfix:")",str:s};a.insertText(a.getTextareaDom(),i)},u=(t,e)=>{var s={bold:{prefix:"**",subfix:"**",str:a.a.tl_bold},italic:{prefix:"*",subfix:"*",str:a.a.tl_italic},header:{prefix:"# ",subfix:"",str:a.a.tl_header},header1:{prefix:"# ",subfix:"",str:a.a.tl_header_one},header2:{prefix:"## ",subfix:"",str:a.a.tl_header_two},header3:{prefix:"### ",subfix:"",str:a.a.tl_header_three},header4:{prefix:"#### ",subfix:"",str:a.a.tl_header_four},header5:{prefix:"##### ",subfix:"",str:a.a.tl_header_five},header6:{prefix:"###### ",subfix:"",str:a.a.tl_header_six},underline:{prefix:"++",subfix:"++",str:a.a.tl_underline},strikethrough:{prefix:"~~",subfix:"~~",str:a.a.tl_strikethrough},mark:{prefix:"==",subfix:"==",str:a.a.tl_mark},superscript:{prefix:"^",subfix:"^",str:a.a.tl_superscript},subscript:{prefix:"~",subfix:"~",str:a.a.tl_subscript},quote:{prefix:"> ",subfix:"",str:a.a.tl_quote},link:{prefix:"[](",subfix:")",str:a.a.tl_link},imagelink:{prefix:"![](",subfix:")",str:a.a.tl_image},code:{prefix:"```",subfix:"\n\n```\n",str:"language"},table:{prefix:"",subfix:"",str:"|column1|column2|column3|\n|-|-|-|\n|content1|content2|content3|\n"},aligncenter:{prefix:"::: hljs-center\n\n",subfix:"\n\n:::\n",str:a.a.tl_aligncenter},alignright:{prefix:"::: hljs-right\n\n",subfix:"\n\n:::\n",str:a.a.tl_alignright},alignleft:{prefix:"::: hljs-left\n\n",subfix:"\n\n:::\n",str:a.a.tl_alignleft}};s.hasOwnProperty(t)&&e.insertText(e.getTextareaDom(),s[t]);var d={undo:i,redo:n,trash:o,save:r,ol:l,ul:c,removeLine:m};d.hasOwnProperty(t)&&d[t](e)};function _(t){t.s_html_code=!t.s_html_code,t.htmlcode&&t.htmlcode(t.s_html_code,t.d_value)}function p(t){t.s_help=!t.s_help,t.helptoggle&&t.helptoggle(t.s_help,t.d_value)}function v(t){let e=t.$refs.vReadModel;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function g(t){t.s_preview_switch=!t.s_preview_switch,t.previewtoggle&&t.previewtoggle(t.s_preview_switch,t.d_value)}function h(t){t.s_fullScreen=!t.s_fullScreen,t.fullscreen&&t.fullscreen(t.s_fullScreen,t.d_value)}function f(t){t.s_subfield=!t.s_subfield,t.s_preview_switch=t.s_subfield,t.previewtoggle&&t.previewtoggle(t.s_preview_switch,t.d_value),t.subfieldtoggle&&t.subfieldtoggle(t.s_subfield,t.d_value)}function b(t){t.s_navigation=!t.s_navigation,t.s_navigation&&(t.s_preview_switch=!0),t.navigationtoggle&&t.navigationtoggle(t.s_navigation,t.d_value),t.s_navigation&&t.getNavigation(t,!1)}const C=(t,e)=>{var s={help:p,html:_,read:v,preview:g,fullscreen:h,navigation:b,subfield:f};s.hasOwnProperty(t)&&s[t](e)}},LhYu:function(t,e,s){"use strict";var a=s("Rm61");s.n(a).a},MPXs:function(t,e,s){"use strict";s.r(e);var a=s("iHbI"),i=s("YP4+"),n={name:"dynamicTopicItem",props:["dynamicTopicItem"],methods:{subscribeDynamicTopic(){this.$store.dispatch("common/SET_ATTENTION",{associate_id:this.dynamicTopicItem.id,type:i.i.dynamic_topic}).then(t=>{"success"===t.state&&("enter"===t.data.type?this.dynamicTopicItem.attention_count=Number(this.dynamicTopicItem.attention_count)+1:this.dynamicTopicItem.attention_count-=1,this.$store.dispatch("user/GET_USER_INFO_ALL",{uid:this.personalInfo.user.uid}),this.$message.success(t.message))})}},computed:{...Object(a.b)(["personalInfo","user"]),isRssDynamicTopic(){return~this.user.allRssDynamicTopicId.indexOf(this.dynamicTopicItem.id)}}},o=(s("7yFN"),s("Yj/X")),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"topic-item"},[s("router-link",{staticClass:"icon",attrs:{to:{name:"dynamicTopicView",params:{dynamicTopicId:t.dynamicTopicItem.topic_id}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.dynamicTopicItem.icon,expression:"dynamicTopicItem.icon"}],staticClass:"avatar",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"content"},[s("router-link",{staticClass:"icon",attrs:{to:{name:"dynamicTopicView",params:{dynamicTopicId:t.dynamicTopicItem.topic_id}}}},[t._v("\n      "+t._s(t.dynamicTopicItem.name)+"\n    ")]),t._v(" "),s("span",[t._v("\n      "+t._s(t.dynamicTopicItem.dynamicCount)+" 片刻\n    ")])],1)],1)}),[],!1,null,"2478e00a",null).exports,l=s("7Qib"),c={name:"dynamicTopic",minixs:[s("m0go").a],metaInfo(){return{title:`话题-${this.website.meta.website_name}`,htmlAttrs:{lang:"zh"},script:[...l.a.resource({route:this.$route,config:this.website.config}),...l.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},asyncData:async({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("dynamic/GET_DYNAMIC_TOPIC_LIST")]),mounted(){this.$store.dispatch("user/GET_USER_INFO_ALL",{uid:this.personalInfo.user.uid})},methods:{isRssDynamicTopic(t){return~this.user.allRssDynamicTopicId.indexOf(t.topic_id)}},components:{dynamicTopicItem:r},computed:{...Object(a.b)(["home","dynamic","website","personalInfo","user"])}},m=(s("jzrc"),Object(o.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"dynamic-topic"}},[e("div",{staticClass:"container dynamic-main"},[e("div",{staticClass:"dynamic-main-title"},[this._v("全部话题")]),this._v(" "),e("div",{staticClass:"row"},this._l(this.dynamic.dynamicTopicList,(function(t,s){return e("div",{key:s,staticClass:"col-xs-12 col-sm-4 col-md-4"},[e("div",{staticClass:"client-card"},[e("dynamic-topic-item",{attrs:{dynamicTopicItem:t}})],1)])})),0)])])}),[],!1,null,"75d7f16a",null));e.default=m.exports},OQAD:function(t,e,s){},OrBW:function(t,e,s){"use strict";var a=s("h67d");s.n(a).a},P0Qu:function(t,e,s){},PKEJ:function(t,e,s){"use strict";e.a={start_editor:"开始编辑...",navigation_title:"导航目录",tl_bold:"粗体",tl_italic:"斜体",tl_header:"标题",tl_header_one:"一级标题",tl_header_two:"二级标题",tl_header_three:"三级标题",tl_header_four:"四级标题",tl_header_five:"五级标题",tl_header_six:"六级标题",tl_underline:"下划线",tl_strikethrough:"中划线",tl_mark:"标记",tl_superscript:"上角标",tl_subscript:"下角标",tl_quote:"段落引用",tl_ol:"有序列表",tl_ul:"无序列表",tl_link:"链接",tl_image:"添加图片链接",tl_code:"代码块",tl_table:"表格",tl_undo:"上一步",tl_redo:"下一步",tl_trash:"清空",tl_save:"保存",tl_navigation_on:"开启标题导航",tl_navigation_off:"关闭标题导航",tl_preview:"预览",tl_aligncenter:"居中",tl_alignleft:"居左",tl_alignright:"居右",tl_edit:"编辑",tl_single_column:"单栏",tl_double_column:"双栏",tl_fullscreen_on:"全屏编辑",tl_fullscreen_off:"退出全屏",tl_read:"沉浸式阅读",tl_html_on:"查看html文本",tl_html_off:"返回markdown文本",tl_help:"markdown语法帮助",tl_upload:"上传图片",tl_upload_remove:"删除",tl_popup_link_title:"添加链接",tl_popup_link_text:"链接描述",tl_popup_link_addr:"链接地址",tl_popup_img_link_title:"添加图片",tl_popup_img_link_text:"图片描述",tl_popup_img_link_addr:"图片链接",tl_popup_link_sure:"确定",tl_popup_link_cancel:"取消"}},Pq6G:function(t,e,s){"use strict";var a=s("IodM");const i={PERSONAL_UPLOAD_AVATAR:({commit:t,dispatch:e,state:s},i)=>Object(a.a)({url:"/personal/upload-avatar",method:"post",parameter:i}),PERSONAL_UPLOAD_INFO:({commit:t,dispatch:e,state:s},i)=>Object(a.a)({url:"/personal/update-info",method:"put",parameter:i}),PERSONAL_UPLOAD_PASSWORD:({commit:t,dispatch:e,state:s},i)=>Object(a.a)({url:"/personal/update-password",method:"put",parameter:i})};e.a={namespaced:!0,state:()=>({}),mutations:{},actions:i,getters:{}}},Q1UO:function(t,e,s){},QG78:function(t,e,s){"use strict";s.r(e);var a=s("Kvkj"),i=s("vuaj"),n=s.n(i),o=s("iHbI"),r=s("XFvl"),l={name:"SignUp",metaInfo(){return{title:`${this.website.meta.website_name}-注册`,htmlAttrs:{lang:"zh"}}},asyncData:({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("PERSONAL_INFO",{accessToken:s}),t.dispatch("website/GET_WEBSITE_INFO"),t.dispatch("articleTag/GET_ARTICLE_TAG_ALL")]),data:()=>({isSendCode:!1,isSendCodeSuccess:!1,formData:{nickname:"",email:"",phone:"",code:"",type:"email",password:"",double_password:""}}),mounted(){this.$store.registerModule("sign",r.a)},methods:{sendCode(){this.isSendCodeSuccess=!0,this.$store.dispatch("sign/SIGN_SEND_CODE",{email:this.formData.email}).then(t=>{this.isSendCodeSuccess=!1,"success"===t.state?this.isSendCode=!0:this.$message.warning(t.message)})},register(){this.$store.dispatch("sign/REGISTER",this.formData).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$refs.register.reset(),this.$router.push({name:"signIn"})):this.$message.warning(t.message)})},tapSign(){this.$router.push({name:"signIn"})}},computed:{...Object(o.b)(["website"])},components:{"send-code":a.k,ClientOnly:n.a},destroyed(){this.$store.unregisterModule("sign")}},c=s("Yj/X"),m=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ClientOnly",[s("section",{staticClass:"sign-lay layout-content"},[s("div",{staticClass:"sign-view client-card"},[s("div",{staticClass:"title"},[t._v("\n        注册\n      ")]),t._v(" "),s("div",{staticClass:"js-sign-in-container"},[s("form",{ref:"register",attrs:{id:"sign-up","accept-charset":"UTF-8",method:"post"}},[s("div",{staticClass:"input-prepend restyle js-normal"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.nickname,expression:"formData.nickname"}],staticClass:"nickname",attrs:{type:"text",placeholder:"你的昵称"},domProps:{value:t.formData.nickname},on:{input:function(e){e.target.composing||t.$set(t.formData,"nickname",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-user-solid"})]),t._v(" "),s("div",{staticClass:"input-prepend email-view"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"send-email-input account",attrs:{type:"text",placeholder:"邮箱"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-message"}),t._v(" "),s("send-code",{staticClass:"btn-send-email-code",attrs:{isSend:t.isSendCodeSuccess,"storage-key":"sendEmailCode"},nativeOn:{click:function(e){return t.sendCode(e)}},model:{value:t.isSendCode,callback:function(e){t.isSendCode=e},expression:"isSendCode"}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.formData.email,expression:"formData.email"}],staticClass:"input-prepend email-view-code"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.code,expression:"formData.code"}],staticClass:"send-email-code code",attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.formData.code},on:{input:function(e){e.target.composing||t.$set(t.formData,"code",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-chat-round"})]),t._v(" "),s("div",{staticClass:"input-prepend"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"password",attrs:{type:"password",placeholder:"密码"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-key"})]),t._v(" "),s("div",{staticClass:"input-prepend"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.double_password,expression:"formData.double_password"}],staticClass:"double_password",attrs:{type:"password",placeholder:"重复密码"},domProps:{value:t.formData.double_password},on:{input:function(e){e.target.composing||t.$set(t.formData,"double_password",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-key"})]),t._v(" "),s("div",{staticClass:"footer-text"},[t._v("已有账户， "),s("em",{on:{click:t.tapSign}},[t._v("登录")])]),t._v(" "),s("button",{staticClass:"sign-up-button",attrs:{type:"button"},on:{click:t.register}},[t._v("注册")])])])])])])}),[],!1,null,null,null);e.default=m.exports},QUau:function(t,e,s){"use strict";s.r(e);var a=s("iHbI"),i=s("Kvkj"),n={name:"blogArticleItem",props:{articleItem:{type:Object,default:{}}},data:()=>({articleTypeList:{1:"文章",2:"日记",3:"草稿"}}),methods:{articleTagFilter(t){var e=[];return this.articleTagAll.map((s,a)=>{-1!==t.split(",").indexOf(String(s.tag_id))&&e.push(s)}),e}},computed:{articleTagAll(){return this.$store.state.articleTag.article_tag_all}}},o=(s("n1l2"),s("Yj/X")),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"content-box content-box-index"},[t.articleItem.aid?s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-row title-row"},[s("router-link",{staticClass:"title",attrs:{to:{name:"article",params:{aid:t.articleItem.aid}}}},[t._v(t._s(t.articleItem.title))])],1),t._v(" "),s("div",{staticClass:"info-row meta-row"},[s("ul",{staticClass:"meta-list"},[s("li",{staticClass:"item username clickable"},[s("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{uid:t.articleItem.user.uid,routeType:"article"}}}},[t._v(t._s(t.articleItem.user.nickname))])],1),t._v(" "),s("li",{staticClass:"item item-icon read-count"},[s("i",{staticClass:"el-icon-reading"}),t._v(" "),s("strong",{domProps:{textContent:t._s(t.articleItem.read_count)}})]),t._v(" "),s("li",{staticClass:"item item-icon like-article"},[s("i",{staticClass:"el-icon-star-off"}),t._v(" "),s("strong",{domProps:{textContent:t._s(t.articleItem.thumb_count)}})]),t._v(" "),s("li",{staticClass:"item item-icon comment-count"},[s("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),s("strong",{domProps:{textContent:t._s(t.articleItem.comment_count)}})]),t._v(" "),s("li",{staticClass:"item",domProps:{textContent:t._s(t.articleItem.create_dt)}}),t._v(" "),t.articleItem.tag_ids?s("li",{staticClass:"item"},t._l(t.articleTagFilter(t.articleItem.tag_ids),(function(e,a){return s("router-link",{key:a,staticClass:"tag-class frontend",attrs:{to:{name:"article_tag",params:{en_name:e.en_name}}}},[t._v(t._s(e.name))])})),1):t._e(),t._v(" "),"2"===String(t.articleItem.type)?s("li",{staticClass:"item"},[t._v("\n          "+t._s(t.articleTypeList[String(t.articleItem.type)])+"\n        ")]):t._e()])])]):t._e(),t._v(" "),t.articleItem.cover_img?s("div",{staticClass:"thumb"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.articleItem.cover_img,expression:"articleItem.cover_img"}],staticClass:"box-image",attrs:{alt:""}})]):t._e()])}),[],!1,null,"8c004be4",null).exports,l=s("i9CR"),c=s("7Qib"),m=s("m0go"),d=s("YP4+"),u={name:"ArticleBlogView",mixins:[m.a],metaInfo(){return{title:this.articleBlog.blogInfo.name+"-"+this.website.meta.website_name||"",meta:[{name:"description",content:`${this.articleBlog.blogInfo.description||this.articleBlog.blogInfo.name}`}],htmlAttrs:{lang:"zh"},script:[...c.a.resource({route:this.$route,config:this.website.config,random:this.$route.params.blogId}),...c.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:this.$route.params.blogId})],__dangerouslyDisableSanitizers:["script"]}},asyncData:({store:t,route:e})=>Promise.all([t.dispatch("articleBlog/GET_ARTICLE_BLOG_INFO",{blogId:e.params.blogId}),t.dispatch("articleBlog/GET_ARTICLE_BLOG_ARTICLE_LIST",{blogId:e.params.blogId})]),data:()=>({modelName:d.i}),methods:{setBlogTime:t=>t.create_date===t.update_date?`创建于：${t.create_dt}`:`更新于：${t.update_dt}`,pageChange(t){this.$router.push({name:"articleBlog",params:{blogId:this.$route.params.blogId},query:{page:t}})},shareChange(t){let e=window.location.origin;"sina"===t.type?c.c.shareToXl(t.data.title,e+"/p/"+t.data.aid,this.website.meta.logo):"qzone"===t.type?c.c.shareToQq(t.data.title,e+"/p/"+t.data.aid,this.website.meta.logo):"qq"===t.type&&c.c.shareQQ(t.data.title,e+"/p/"+t.data.aid,this.website.meta.logo)},setLikeArticleBlog(t){this.$store.dispatch("common/SET_COLLECT",{associate_id:t,type:d.i.article_blog}).then(t=>{"success"===t.state?(this.$message.success(t.message),window.location.reload()):this.$message.warning(t.message)})},isCollect(t){let e=[];return t.likeUserIds.map(t=>{e.push(t.uid)}),~e.indexOf(Number(this.personalInfo.user.uid))?{status:!0,text:"已收藏"}:{status:!1,text:"收藏"}}},computed:{...Object(a.b)(["website","articleBlog","personalInfo"])},components:{websiteNotice:l.a,blogArticleItem:r,Page:i.f}},_=(s("cNny"),Object(o.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"article-blog"},[s("div",{staticClass:"container  box-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8"},[s("div",{staticClass:"article-blog-view client-card"},[s("div",{staticClass:"article-blog-header"},[s("div",{staticClass:"user-article-blog-top"},[s("div",{staticClass:"article-blog-icon"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.articleBlog.blogInfo.icon,expression:"articleBlog.blogInfo.icon"}],staticClass:"box-image",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"user-article-blog-info"},[s("div",{staticClass:"info-content"},[s("div",{staticClass:"name"},[t._v("\n                    "+t._s(t.articleBlog.blogInfo.name)+"\n                  ")]),t._v(" "),s("ul",{staticClass:"statistics"},[s("li",{staticClass:"item item-icon like-article"},[s("i",{staticClass:"el-icon-document"}),t._v(" "),s("span",{staticClass:"article-count"},[t._v(" "+t._s(t.articleBlog.blogInfo.articleCount))])]),t._v(" "),s("li",{staticClass:"item item-icon read-count"},[s("i",{staticClass:"el-icon-view"}),t._v(" "),s("span",{domProps:{textContent:t._s(t.articleBlog.blogInfo.read_count||0)}})]),t._v(" "),s("li",{staticClass:"item item-icon like-article"},[s("i",{staticClass:"el-icon-star-off"}),t._v(" "),s("span",{domProps:{textContent:t._s(t.articleBlog.blogInfo.likeCount||0)}})]),t._v(" "),~[2,4].indexOf(Number(t.articleBlog.blogInfo.status))&&t.personalInfo.islogin?s("li",{staticClass:"item attention",on:{click:function(e){return t.setLikeArticleBlog(t.articleBlog.blogInfo.blog_id)}}},[s("span",{class:{active:t.isCollect(t.articleBlog.blogInfo).status}},[t._v(t._s(t.isCollect(t.articleBlog.blogInfo).text))])]):t._e()])])])]),t._v(" "),s("div",{staticClass:"user-article-blog-tag"},[s("div",{staticClass:"title"},[t._v("所属标签:\n                "),t.articleBlog.blogInfo.tag?t._l(t.articleBlog.blogInfo.tag,(function(e,a){return s("router-link",{key:a,staticClass:"tag-class frontend",attrs:{to:{name:"article_tag",params:{en_name:e.en_name}}}},[t._v(t._s(e.name))])})):[s("span",{staticClass:"hint"},[t._v("\n                    暂时没有加入标签，加入标签更能容易被搜索到\n                  ")])]],2)]),t._v(" "),s("div",{staticClass:"user-article-blog-main"},[s("p",{staticClass:"description"},[t._v("介绍："+t._s(t.articleBlog.blogInfo.description||"暂时没有简介，输入简介更直观表达专栏内容"))]),t._v(" "),s("ul",[s("li",{staticClass:"item item-icon read-count"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.articleBlog.blogInfo.user.avatar,expression:"articleBlog.blogInfo.user.avatar"}],staticClass:"user-avatar",attrs:{alt:""}}),t._v(" "),s("router-link",{staticClass:"nickname",attrs:{to:{name:"user",params:{uid:t.articleBlog.blogInfo.user.uid}}}},[t._v(t._s(t.articleBlog.blogInfo.user.nickname))])],1),t._v(" "),s("li",{staticClass:"item item-icon"},[s("span",{staticClass:"time"},[t._v(t._s(t.setBlogTime(t.articleBlog.blogInfo)))])])])])]),t._v(" "),s("div",{staticClass:"article-blog-main"},[s("div",{staticClass:"article-view"},t._l(t.articleBlog.blogArticleList.list,(function(t,e){return s("div",{key:e,staticClass:"article-item"},[s("blogArticleItem",{key:e,attrs:{articleItem:t}})],1)})),0),t._v(" "),s("Page",{attrs:{total:Number(t.articleBlog.blogArticleList.count),pageSize:Number(t.articleBlog.blogArticleList.pageSize),page:Number(t.$route.query.page)||1},on:{pageChange:t.pageChange}})],1)])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4"},[s("website-notice")],1)])])])}),[],!1,null,"65f23ca7",null));e.default=_.exports},Qhtt:function(t,e,s){"use strict";s.r(e);var a=s("YP4+"),i={name:"ArticleTagItem",created(){this.article_count=this.articleTagItem.article_count,this.subscribe_count=this.articleTagItem.subscribe_count},data:()=>({article_count:0,subscribe_count:0}),props:{articleTagItem:{type:Object}},methods:{async subscribeTag(){await this.$store.dispatch("common/SET_ATTENTION",{associate_id:this.articleTagItem.id,type:a.i.article_tag}).then(t=>{this.$store.dispatch("articleTag/MY_SUBSCRIBE_TAG_LIST"),"success"===t.state&&("enter"===t.data.type?this.subscribe_count+=1:this.subscribe_count-=1,this.$message.success(t.message))})}},computed:{userArticleTag(){return this.$store.getters["articleTag/userArticleTag"]||[]},islogin(){return this.$store.state.personalInfo.islogin}}},n=(s("s2zN"),s("Yj/X")),o=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tag client-card"},[s("div",{staticClass:"info-box"},[s("router-link",{attrs:{to:{name:"article_tag",params:{en_name:t.articleTagItem.en_name}}}},[s("div",{staticClass:"thumb"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.articleTagItem.icon,expression:"articleTagItem.icon"}],staticClass:"box-image",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"title",domProps:{textContent:t._s(t.articleTagItem.name)}})]),t._v(" "),s("div",{staticClass:"meta-box"},[s("div",{staticClass:"meta article"},[t._v("\n        "+t._s(t.article_count)+" 篇文章\n      ")]),t._v(" "),s("div",{staticClass:"meta subscribe"},[t._v("\n        "+t._s(t.subscribe_count)+" 人关注\n      ")])])],1),t._v(" "),t.islogin?s("div",{staticClass:"action-box"},[~t.userArticleTag.indexOf(t.articleTagItem.id)?s("button",{staticClass:"subscribe-btn already-subscribe",on:{click:t.subscribeTag}},[t._v("已关注\n    ")]):s("button",{staticClass:"subscribe-btn not-subscribe",on:{click:t.subscribeTag}},[t._v("关注\n    ")])]):t._e()])}),[],!1,null,"9a16d060",null).exports,r=s("Kvkj"),l=s("iHbI"),c=s("7Qib"),m={name:"SubscribeTag",minixs:[s("m0go").a],metaInfo(){return{title:"订阅",titleTemplate:`%s - ${this.website.meta.website_name}`,meta:[{name:"description",content:`订阅-${this.website.meta.website_name}`}],htmlAttrs:{lang:"zh"},script:[...c.a.resource({route:this.$route,config:this.website.config}),...c.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},asyncData:async({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("articleTag/MY_SUBSCRIBE_TAG_LIST",{accessToken:s}),t.dispatch("articleTag/GET_ARTICLE_TAG_LIST",{tag_name:e.query.tag_name,tag_type:e.params.type,page:e.query.page||1,accessToken:s})]),data:()=>({tag_name:""}),methods:{pageChange(t){this.$router.push({name:"subscribe_tag",params:{type:this.$route.params.type},query:{tag_name:this.$route.query.tag_name,tag_type:this.$route.params.type,page:t,uid:this.personalInfo.user.uid}})},getArticleTagList(){if(!this.tag_name)return this.$message.warning("请输入搜索内容"),!1;this.$store.dispatch("articleTag/GET_ARTICLE_TAG_LIST",{tag_name:this.tag_name,tag_type:this.$route.params.type,page:this.$route.query.page||1})}},computed:{...Object(l.b)(["website"]),subscribe(){return this.$store.state.articleTag.subscribe||[]},personalInfo(){return this.$store.state.personalInfo}},components:{ArticleTagItem:o,Page:r.f}},d=(s("qDDT"),Object(n.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"subscribe-lay layout-content",attrs:{id:"subscribe-lay"}},[s("div",{staticClass:"container box-container client-card"},[s("nav",{staticClass:"switch-list-nav"},[s("div",{staticClass:"nav-list"},[s("router-link",{staticClass:"nav-item",attrs:{to:{name:"columnAll"}}},[t._v("专栏")]),t._v(" "),s("router-link",{staticClass:"nav-item",attrs:{to:{name:"subscribe_tag",params:{type:"all"}}}},[t._v("全部标签")])],1)]),t._v(" "),s("header",{staticClass:"list-header"},[s("nav",{staticClass:"list-nav",attrs:{role:"navigation"}},[s("ul",{staticClass:"nav-list"},[s("li",{staticClass:"nav-item",class:{active:"all"===t.$route.params.type}},[s("router-link",{attrs:{to:{name:"subscribe_tag",params:{type:"all"}}}},[t._v("全部")])],1),t._v(" "),t.personalInfo.islogin?s("li",{staticClass:"nav-item",class:{active:"my"===t.$route.params.type}},[s("router-link",{attrs:{to:{name:"subscribe_tag",params:{type:"my"}}}},[t._v("已关注")])],1):t._e(),t._v(" "),"my"!==t.$route.params.type?s("li",{staticClass:"nav-item search"},[s("form",{staticClass:"search-tag-from",attrs:{role:"search"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tag_name,expression:"tag_name"}],staticClass:"search-tag-input",attrs:{maxlength:"32",placeholder:"搜索标签",required:"true"},domProps:{value:t.tag_name},on:{input:function(e){e.target.composing||(t.tag_name=e.target.value)}}}),t._v(" "),s("button",{staticClass:"search-tag-btn",attrs:{type:"button"},on:{click:t.getArticleTagList}},[s("i",{staticClass:"el-icon-search"})])])]):t._e()])])]),t._v(" "),s("div",{staticClass:"row tag-list"},t._l(t.subscribe.article_tag_list,(function(t,e){return s("div",{key:e,staticClass:"item col-xs-12 col-sm-3 col-md-3"},[s("articleTagItem",{attrs:{articleTagItem:t}})],1)})),0),t._v(" "),s("Page",{attrs:{total:Number(t.subscribe.count),pageSize:Number(t.subscribe.pageSize),page:Number(t.$route.query.page)||1},on:{pageChange:t.pageChange}})],1)])}),[],!1,null,"3702cf5a",null));e.default=d.exports},Qoop:function(t,e,s){},R3xZ:function(t,e,s){"use strict";var a=s("xJx1"),i=s("Kvkj"),n=s("v/KW"),o=s("IodM"),r=s("iHbI"),l={name:"index",data:()=>({isLoading:!0,commentList:[],page:1,pageSize:6}),props:{dynamicId:{default:""}},created(){this.getCommentList()},methods:{getCommentList(){this.isLoading=!0,Object(o.a)({url:"/dynamic-comment/list",method:"get",parameter:{params:{dynamic_id:this.dynamicId,page:this.page,childPageSize:5,pageSize:this.pageSize}}}).then(t=>{this.commentList=t.data.list,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},deleteComment(t){this.commentList.splice(t,1)},commentChange(t){"success"===t.state?(this.commentList.unshift(t.data),this.$emit("dynamicCommentChange"),this.$message.success(t.message)):this.$message.warning(t.message)}},computed:{...Object(r.b)(["website","personalInfo"])},components:{"comment-item":a.a,"comment-form":n.a,Page:i.f}},c=(s("OrBW"),s("Yj/X")),m=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"dynamic-comment"},["yes"===t.website.config.on_comment?s("div",{staticClass:"dynamic-comment-part"},[s("comment-form",{attrs:{dynamicId:t.dynamicId},on:{commentChange:t.commentChange}}),t._v(" "),s("div",{staticClass:"comment-list"},t._l(t.commentList,(function(e,a){return a<6?s("comment-item",{key:a,attrs:{"comment-item":e,dynamicId:t.dynamicId,comentKey:a},on:{deleteComment:t.deleteComment}}):t._e()})),1)],1):s("div",[s("p",{staticClass:"no-comment"},[t._v("评论模块已关闭")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.commentList.length>=6,expression:"commentList.length>=6"}],staticClass:"more"},[s("router-link",{staticClass:"dynamic",attrs:{to:{name:"dynamicView",params:{dynamicId:t.dynamicId}}}},[t._v("\n      查看更多 >\n    ")])],1)])}),[],!1,null,"c45ded90",null).exports,d=s("7Qib"),u=s("YP4+"),_={name:"dynamicItem",props:{dynamicItem:{default:()=>({})},dfIsCommnet:{default:!0}},data:()=>({isCommnet:!1,isPreviewImg:!1,previewImgUrl:"",isShowDynamic:!0,dynamicType:u.c,modelName:u.i,dynamicTypeText:u.d}),methods:{previewImg(t){console.log("url",t),this.previewImgUrl=t,this.isPreviewImg=!0},setUserAttention(){if(!this.personalInfo.islogin)return this.$message.warning("请先登录"),!1;this.$store.dispatch("common/SET_ATTENTION",{associate_id:this.dynamicItem.user.uid,type:u.i.user}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$store.dispatch("user/GET_ASSOCIATE_INFO"),this.selectAttentionUserClass(t.data.type)):this.$message.error(t.message)})},selectAttentionUserClass(t){let e=document.querySelectorAll(`.user-attention-${this.dynamicItem.user.uid}`);for(let s=0;s<e.length;s++)"enter"===t?(e[s].classList.add("active"),e[s].innerHTML="已关注"):(e[s].classList.remove("active"),e[s].innerHTML="关注")},isAttention(t){return!(!this.user.associateInfo.userAttentionId||!~this.user.associateInfo.userAttentionId.indexOf(t.uid))},isShowDeleteBtn(){return this.personalInfo.islogin&&this.personalInfo.user.uid===this.dynamicItem.user.uid&&"dynamicView"!==this.$route.name},deleteDynamic(){this.$confirm("此操作将永久删除此条片刻?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("dynamic/DELETE_DYNAMIC",{id:this.dynamicItem.id}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.isShowDynamic=!1):this.$message.error(t.message)})}).catch(()=>{})},dynamicCommentChange(){this.dynamicItem.comment_count=Number(this.dynamicItem.comment_count)+1},contentRender(t){let e=t;return i.j.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e},userThumdDynamic(){if(!this.personalInfo.islogin)return this.$message.warning("请先登录"),!1;this.$store.dispatch("common/SET_THUMB",{associate_id:this.dynamicItem.id,type:u.i.dynamic}).then(t=>{"success"===t.state?("enter"===t.data.type?this.dynamicItem.thumb_count=Number(this.dynamicItem.thumb_count)+1:"cancel"===t.data.type&&(this.dynamicItem.thumb_count-=1),this.$store.dispatch("user/GET_ASSOCIATE_INFO")):this.$message.warning(t.message)}).catch((function(t){console.log(t)}))},imgAnalyze(t){let e=t.split(",")||[];return t.split(",").length>0?e:[]},shareChange(t){let e=window.location.origin;"sina"===t.type?d.c.shareToXl(t.data.content,e+"/dynamic/"+t.data.id,this.website.meta.logo):"qzone"===t.type?d.c.shareToQq(t.data.content,e+"/dynamic/"+t.data.id,this.website.meta.logo):"qq"===t.type&&d.c.shareQQ(t.data.content,e+"/dynamic/"+t.data.id,this.website.meta.logo)}},computed:{...Object(r.b)(["personalInfo","user","website"])},components:{DynamicComment:m,Dropdown:i.c,Dialog:i.b}},p=(s("zSuB"),Object(c.a)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDynamic,expression:"isShowDynamic"}],staticClass:"dynamic-item"},[s("div",{staticClass:"dynamic-header-row"},[s("div",{staticClass:"account-group"},[s("div",{staticClass:"user-popover-box"},["tree"!==t.dynamicItem.user.uid?s("router-link",{staticClass:"user-link",attrs:{to:{name:"user",params:{uid:t.dynamicItem.user.uid,routeType:"article"}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.dynamicItem.user.avatar,expression:"dynamicItem.user.avatar"}],staticClass:"avatar",attrs:{alt:""}})]):s("a",{staticClass:"user-link",attrs:{href:"javascript:;",target:"_blank"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.dynamicItem.user.avatar,expression:"dynamicItem.user.avatar"}],staticClass:"avatar",attrs:{alt:""}})])],1),t._v(" "),s("div",{staticClass:"dynamic-header-content"},[s("div",{staticClass:"user-popover-box"},["tree"!==t.dynamicItem.user.uid?s("router-link",{staticClass:"username",attrs:{to:{name:"user",params:{uid:t.dynamicItem.user.uid,routeType:"article"}}}},[t._v(t._s(t.dynamicItem.user.nickname))]):s("a",{staticClass:"username",attrs:{href:"javascript:;",target:"_blank"}},[t._v("\n            "+t._s(t.dynamicItem.user.nickname)+"\n          ")])],1),t._v(" "),s("div",{staticClass:"meta-box"},[s("div",{staticClass:"position ellipsis"},[t._v("\n            @ "+t._s(t.dynamicItem.user.introduction)+"\n          ")]),t._v(" "),s("div",{staticClass:"dot"},[t._v("·")]),t._v(" "),s("a",{staticClass:"time-box",attrs:{href:"javascript:;",target:"_blank",rel:""}},[s("time",{staticClass:"time",attrs:{title:t.dynamicItem.create_dt}},[t._v(t._s(t.dynamicItem.create_dt))])])])])]),t._v(" "),"tree"!==t.dynamicItem.user.uid&&t.personalInfo.islogin&&t.personalInfo.user.uid!==t.dynamicItem.user.uid?s("div",{staticClass:"header-action"},[s("button",{staticClass:"subscribe-btn follow-button",class:[{active:t.isAttention(t.dynamicItem||"")},"user-attention-"+t.dynamicItem.user.uid],on:{click:t.setUserAttention}},[t._v("\n        "+t._s(t.isAttention(t.dynamicItem)?"已关注":"关注")+"\n      ")])]):t._e()]),t._v(" "),s("div",{staticClass:"dynamic-content-row"},[s("div",{staticClass:"content-box"},[s("div",{domProps:{innerHTML:t._s(t.contentRender(t.dynamicItem.content))}}),t._v(" "),s("div",{staticClass:"limit-ctl-box"})])]),t._v(" "),t.dynamicItem.type===t.dynamicType.img?s("div",{staticClass:"dynamic-image-row"},t._l(t.imgAnalyze(t.dynamicItem.attach),(function(e,a){return e?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"url"}],key:a,staticClass:"preview-picture",staticStyle:{width:"100px",height:"100px"},attrs:{alt:""},on:{click:function(s){return t.previewImg(e)}}}):t._e()})),0):t._e(),t._v(" "),t.dynamicItem.type===t.dynamicType.link?s("div",{staticClass:"dynamic-link-row"},[s("a",{attrs:{href:t.dynamicItem.attach,target:"_block"}},[t._v(t._s(t.dynamicItem.attach))])]):t._e(),t._v(" "),t.dynamicItem.topic?s("div",{staticClass:"dynamic-topic-row"},[s("router-link",{staticClass:"topic-title",attrs:{to:{name:"dynamicTopicView",params:{dynamicTopicId:t.dynamicItem.topic.topic_id}}}},[t._v(t._s(t.dynamicItem.topic.name))])],1):t._e(),t._v(" "),s("div",{staticClass:"dynamic-action-row"},[s("div",{staticClass:"action-box"},[s("div",{staticClass:"like-action action",class:{active:~t.user.associateInfo.dynamicThumdId.indexOf(t.dynamicItem.id||"")},on:{click:t.userThumdDynamic}},[s("i",{staticClass:"el-icon-thumb"}),t._v(" "),s("span",{staticClass:"action-title"},[t._v(t._s(t.dynamicItem.thumb_count))])]),t._v(" "),s("div",{staticClass:"comment-action action",on:{click:function(e){t.isCommnet=!t.isCommnet}}},[s("i",{staticClass:"el-icon-chat-line-round"}),t._v(" "),s("span",{staticClass:"action-title"},[t._v(t._s(t.dynamicItem.comment_count))])]),t._v(" "),s("div",{staticClass:"share-action action"},[s("Dropdown",[s("div",{staticClass:"el-dropdown-link",attrs:{slot:"button"},slot:"button"},[s("i",{staticClass:"el-icon-share"})]),t._v(" "),s("div",{staticClass:"dropdown-menu-view"},[s("div",{staticClass:"dropdown-menu-item",on:{click:function(e){return t.shareChange({type:"qq",data:t.dynamicItem})}}},[t._v("\n              分享到QQ\n            ")]),t._v(" "),s("div",{staticClass:"dropdown-menu-item",on:{click:function(e){return t.shareChange({type:"sina",data:t.dynamicItem})}}},[t._v("\n              分享到新浪\n            ")]),t._v(" "),s("div",{staticClass:"dropdown-menu-item",on:{click:function(e){return t.shareChange({type:"qzone",data:t.dynamicItem})}}},[t._v("\n              分享到QQ空间\n            ")])])])],1),t._v(" "),t.isShowDeleteBtn()?s("div",{staticClass:"share-action action",on:{click:t.deleteDynamic}},[s("span",{staticClass:"action-title"},[t._v("删除")])]):t._e()])]),t._v(" "),t.isCommnet&&t.dfIsCommnet?s("div",{staticClass:"dynamic-comment-row"},[s("dynamic-comment",{attrs:{dynamicId:t.dynamicItem.id},on:{dynamicCommentChange:t.dynamicCommentChange}})],1):t._e(),t._v(" "),s("Dialog",{attrs:{visible:t.isPreviewImg,width:"550px"},on:{"update:visible":function(e){t.isPreviewImg=e}}},[s("img",{staticStyle:{width:"100%"},attrs:{src:t.previewImgUrl,alt:""}})])],1)}),[],!1,null,"7c2038b0",null));e.a=p.exports},R5gB:function(t,e,s){"use strict";s.r(e);var a=s("vuaj"),i=s.n(a),n=s("iHbI"),o={name:"Setting",metaInfo:()=>({title:"个人设置",htmlAttrs:{lang:"zh"}}),created(){this.personalInfo.islogin||this.$router.push({name:"home"})},computed:{...Object(n.b)(["personalInfo"])},components:{ClientOnly:i.a}},r=(s("hStU"),s("Yj/X")),l=Object(r.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("client-only",[s("section",{staticClass:"user-setting-lay layout-content",attrs:{id:"user-setting-profile"}},[s("div",{staticClass:"container box-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4"},[s("div",{staticClass:"user-setting-aside client-card"},[s("h2",{staticClass:"title"},[s("i",{staticClass:"el-icon-setting"}),t._v("设置")]),t._v(" "),s("ul",{staticClass:"setting-tap-list"},[s("li",[s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"settingProfile"}}},[s("i",{staticClass:"el-icon-user-solid"}),t._v("个人资料\n                ")])],1),t._v(" "),s("li",[s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"settingResetPassword"}}},[s("i",{staticClass:"el-icon-lock"}),t._v(" 密码修改\n                ")])],1),t._v(" "),s("li",[s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"ThirdParty"}}},[s("i",{staticClass:"el-icon-connection"}),t._v(" 第三方绑定\n                ")])],1)])])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8"},[s("router-view")],1)])])])])}),[],!1,null,"3e7cb1c1",null);e.default=l.exports},RV7I:function(t,e,s){"use strict";var a=s("yjCX");s.n(a).a},Rm61:function(t,e,s){},SyOQ:function(t,e,s){"use strict";var a=s("bbuj");s.n(a).a},T2z5:function(t,e,s){},T5eP:function(t,e,s){"use strict";s.r(e);var a={metaInfo:()=>({title:"评论编写规范",meta:[{name:"description",content:"评论编写规范"}],htmlAttrs:{lang:"zh"}})},i=(s("dCvR"),s("Yj/X")),n=Object(i.a)(a,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"layout-content box-container container",attrs:{id:"comment-rule-lay"}},[s("div",{staticClass:"row"},[s("main",{staticClass:"lay-main col-xs-12 col-sm-12 col-md-12"},[s("div",{staticClass:"comment-rule"},[s("p",[t._v("\n          本平台是一个致力于帮助每个人更好地运用数字产品或科学方法让生活工作变得更好的内容平台。\n        ")]),t._v(" "),s("h3",[t._v("违规内容界定")]),t._v(" "),s("h3",[t._v("1.违反法律法规，发布违反国家相关法律法规及「九不准」管理规定的信息，如")]),t._v(" "),s("ul",[s("li",[t._v("反对宪法所确定的基本原则危害国家安全；")]),t._v(" "),s("li",[t._v("泄露国家秘密，颠覆国家政权，破坏国家统一；")]),t._v(" "),s("li",[t._v("损害国家荣誉和利益；")]),t._v(" "),s("li",[t._v("煽动民族仇恨、民族歧视，破坏民族团结；")]),t._v(" "),s("li",[t._v("侮辱、滥用英烈形象，否定英烈事迹，美化粉饰侵略战争行为的；")]),t._v(" "),s("li",[t._v("破坏国家宗教政策，宣扬邪教和封建迷信；")]),t._v(" "),s("li",[t._v("散布谣言，扰乱社会秩序，破坏社会稳定；")]),t._v(" "),s("li",[t._v("宣扬淫秽、色情、赌博、暴力、凶杀、恐怖或者教唆犯罪；")]),t._v(" "),s("li",[t._v("煽动非法集会、结社、游行、示威、聚众扰乱社会秩序；")]),t._v(" "),s("li",[t._v("诽谤他人，泄露他人隐私，侵害他人合法权益；")]),t._v(" "),s("li",[t._v("含有法律、行政法规禁止的其他内容的信息。")])]),t._v(" "),s("h3",[t._v("2. 不友善行为，如")]),t._v(" "),s("ul",[s("li",[t._v("不尊重作者创作内容：如「太长不看」、「写的都是什么东西」……")]),t._v(" "),s("li",[t._v("恶意揣测：如「这篇文章就是软文」、「恰饭」……")]),t._v(" "),s("li",[t._v("阴阳怪气， 以比喻、暗喻、嘲讽等方式评论他人：如「你们 XX 用户就是比我们 XX 用户高端」、「你用这些应用就是装 X」……")]),t._v(" "),s("li",[t._v("煽动用户：如在关于 A 应用或系统的文章下评论「B 应用或系统早就有这功能了」……")]),t._v(" "),s("li",[t._v("发泄情绪：如「我觉得没用就是垃圾」……")]),t._v(" "),s("li",[t._v("无意义内容：如「沙发」、「顶」、「前排」……")]),t._v(" "),s("li",[t._v("因民族、种族、宗教、性取向、性别、年龄、地域、生理特征等身份或者归类而歧视、侮辱、攻击他人的内容。")])]),t._v(" "),s("h3",[t._v("3. 发布广告垃圾信息，如")]),t._v(" "),s("ul",[s("li",[t._v("评论中包含售卖产品、提供服务、宣传推广内容的；")]),t._v(" "),s("li",[t._v("\n            评论中包含未明确标明\n            "),s("sup",[t._v("\n              1\n              "),s("div",{staticClass:"sup-tips",staticStyle:{display:"none"}},[t._v("\n                未明确标明指评论中没有明确的文字说明\n                "),s("div",{staticClass:"pointer"})])]),t._v(" 的返利链接、推广链接、邀请红包等内容；\n          ")]),t._v(" "),s("li",[t._v("使用特殊符号、图片等方式规避广告内容审核的广告内容。")])]),t._v(" "),s("h3",[t._v("4. 恶意行为，如：")]),t._v(" "),s("ul",[s("li",[t._v("重复发布干扰正常用户体验的内容；")]),t._v(" "),s("li",[t._v("发布盗版相关内容；")]),t._v(" "),s("li",[t._v("冒充他人，通过头像、用户名等个人信息暗示自己与他人或机构相等同或有关联；")]),t._v(" "),s("li",[t._v("发布含有潜在危险的内容，或使用第三方网站伪造跳转链接，如钓鱼网站、木马、病毒网站等；")]),t._v(" "),s("li",[t._v("恶意对抗行为，包括但不限于使用变体、谐音等方式规避安全审查，明知相关行为违反法律法规和社区规范仍然发布等；")])]),t._v(" "),s("h2",[t._v("违规处理方式")]),t._v(" "),s("ul",[s("li",[t._v("对于评论涉及「违反法律法规」的，本平台将删除相关评论、并永久封停发布相关评论的用户账号，终止用户继续使用本平台；")]),t._v(" "),s("li",[t._v("对于评论涉及「不友善行为」、「发布广告垃圾信息」、「恶意行为」的，本平台将视严重程度采取以下措施：")]),t._v(" "),s("ul",[s("li",[t._v("对发布相关评论的用户进行不低于 3 天的禁言处理；")]),t._v(" "),s("li",[t._v("警告发布相关评论的用户，并建议立即按要求删改评论；")]),t._v(" "),s("li",[t._v("管理员直接修改或删除相关评论；")]),t._v(" "),s("li",[t._v("\n              永久封停账号，终止发布相关评论的用户继续使用本平台。\n              "),s("br")])]),t._v(" "),s("li",[t._v("对于屡次违规的用户，本平台将终止用户继续使用本平台。")])]),t._v(" "),s("p",[t._v("用户如发现评论存在上述违规行为，可联系网站管理员进行反馈。")]),t._v(" "),s("h2",[t._v("本平台欢迎什么评论？")]),t._v(" "),s("p",[s("strong",[t._v("1. 友好讨论、文明用词")])]),t._v(" "),s("p",[t._v("即使你对他人分享的内容或观点十分不认同，我们也建议你心平气和地表达自己的看法，美好的社区环境需要大家共同维护。")]),t._v(" "),s("p",[s("strong",[t._v("2. 请勿恶意揣测")])]),t._v(" "),s("p",[t._v("作者大多以分享好物的心态在本平台写作，通常情况下与写作的 App 或产品间并无利益关系。我们欢迎你发表一切友好的言论，但不欢迎对文章进行过度解读、恶意揣测。如：「免费的 XX 也能做到这些功能，为什么你还要推荐这个收费的 XX，一定是收钱了」……")]),t._v(" "),s("p",[s("strong",[t._v("3. 请勿发布站队言论，引发争端")])]),t._v(" "),s("p",[t._v("尊重作者、被讨论的主题、读者，尊重多样性、不同的思想、观点、习惯、需求。请勿发布站队言论。如：「只有我觉得 XX 更好吗」、「XX 一点用都没有，不知道作者为什么要推荐」……")]),t._v(" "),s("h3",[t._v("《哈维尔对话守则》与大家共勉")]),t._v(" "),s("pre",[t._v("              "),s("code",[t._v("1. 对话的目的是寻求真理，不是为了斗争。\n              2. 不做人身攻击。\n              3. 保持主题。\n              4. 辩论时要用证据。\n              5. 不要坚持错误不改。\n              6. 要分清对话与只准自己讲话的区别。\n              7. 对话要有记录。\n              8. 尽量理解对方。\n              ")]),t._v("\n          ")]),t._v(" "),s("p",[t._v("为维护本平台良好的氛围，我们会根据平台实际运营情况持续完善这个规范。")]),t._v(" "),s("p",[t._v("本规范自 2019 年 7 月 12 日起正式生效。")]),t._v(" "),s("p",[s("br")])])])])])}],!1,null,"1f6acaaf",null);e.default=n.exports},T6he:function(t,e,s){"use strict";var a=s("TiFb");s.n(a).a},THoR:function(t,e,s){},TZI6:function(t,e,s){"use strict";var a=s("EiZP");s.n(a).a},TiFb:function(t,e,s){},UWQL:function(t,e,s){},VEBL:function(t,e,s){"use strict";var a=s("u6Lb");s.n(a).a},VEj1:function(t,e,s){},VM11:function(t,e,s){"use strict";s.r(e);var a=s("Kvkj"),i=s("7Qib"),n=s("iHbI"),o=s("m0go"),r=s("Pq6G"),l={name:"profile",mixins:[o.a],metaInfo(){return{title:"个人设置-修改信息",htmlAttrs:{lang:"zh"},script:[...i.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},data:()=>({user_info:"",formData:{nickname:"",sex:"",is_msg_push:0,profession:"",company:"",introduction:"",home_page:"",avatar:"",avatar_review:"",avatar_review_status:0},file:{}}),created(){this.initInfo()},mounted(){this.$store.registerModule("setting",r.a)},methods:{initInfo(){this.formData={...this.personalInfo.user,...this.personalInfo.user_info},this.user_info=this.personalInfo.user_info},updateUserInfo(){this.$store.dispatch("setting/PERSONAL_UPLOAD_INFO",this.formData).then(t=>{this.$nextTick(()=>{"success"===t.state?(this.$message.success("保存成功"),this.$store.dispatch("PERSONAL_INFO")):this.$message.warning(t.message)})})},changeAvatar({formData:t,config:e}){this.$store.dispatch("setting/PERSONAL_UPLOAD_AVATAR",t).then(t=>{this.$nextTick((function(){"success"===t.state?(this.$message.success("上传用户头像成功，头像正在审核中"),this.$store.dispatch("PERSONAL_INFO"),window.location.reload()):this.$message.warning(t.message)}))})}},computed:{...Object(n.b)(["personalInfo","website"])},components:{UploadImage:a.i},destroyed(){this.$store.unregisterModule("setting")}},c=(s("7kO2"),s("Yj/X")),m=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view setting-view client-card"},[s("div",{staticClass:"sub-view-box setting-profile-view"},[s("h1",[t._v("个人资料")]),t._v(" "),s("ul",{staticClass:"setting-list"},[s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("头像")]),t._v(" "),s("div",{staticClass:"avatar-uploader avatar-uploader"},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:1===t.formData.avatar_review_status||3===t.formData.avatar_review_status?t.formData.avatar_review:t.formData.avatar,expression:"\n                formData.avatar_review_status === 1 ||\n                formData.avatar_review_status === 3\n                  ? formData.avatar_review\n                  : formData.avatar\n              "}],staticClass:"box-image",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"action-box"},[s("div",{staticClass:"hint"},[t._v("\n              支持 jpg、png 格式大小 1M 以内的图片\n              "),1===t.formData.avatar_review_status||3===t.formData.avatar_review_status?s("span",{staticClass:"hint-review"},[t._v("\n                ("+t._s(1===t.formData.avatar_review_status?"新头像正在审核中，审核通过则显示，否则将换回原头像":"头像审核失败，请重新上传")+")\n              ")]):t._e()]),t._v(" "),s("upload-image",{staticClass:"upload-image",on:{changeUpload:t.changeAvatar}},[t._v("上传图片")])],1)])]),t._v(" "),s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("昵称")]),t._v(" "),s("div",{staticClass:"input-box profile-input profile-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.nickname,expression:"formData.nickname"}],staticClass:"input",attrs:{placeholder:"填写你的昵称"},domProps:{value:t.formData.nickname},on:{input:function(e){e.target.composing||t.$set(t.formData,"nickname",e.target.value)}}})])]),t._v(" "),s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("性别")]),t._v(" "),s("div",{staticClass:"input-box profile-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sex,expression:"formData.sex"}],attrs:{type:"radio",name:"sex",value:"1"},domProps:{checked:t._q(t.formData.sex,"1")},on:{change:function(e){return t.$set(t.formData,"sex","1")}}}),s("span",[t._v("男")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sex,expression:"formData.sex"}],attrs:{type:"radio",name:"sex",value:"2"},domProps:{checked:t._q(t.formData.sex,"2")},on:{change:function(e){return t.$set(t.formData,"sex","2")}}}),s("span",[t._v("女")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sex,expression:"formData.sex"}],attrs:{type:"radio",name:"sex",value:"0"},domProps:{checked:t._q(t.formData.sex,"0")},on:{change:function(e){return t.$set(t.formData,"sex","0")}}}),s("span",[t._v("保密")])])]),t._v(" "),s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("职业")]),t._v(" "),s("div",{staticClass:"input-box profile-input profile-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.profession,expression:"formData.profession"}],staticClass:"input",attrs:{placeholder:"填写你的职业"},domProps:{value:t.formData.profession},on:{input:function(e){e.target.composing||t.$set(t.formData,"profession",e.target.value)}}})])]),t._v(" "),s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("公司")]),t._v(" "),s("div",{staticClass:"input-box profile-input profile-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.company,expression:"formData.company"}],staticClass:"input",attrs:{placeholder:"填写你的公司"},domProps:{value:t.formData.company},on:{input:function(e){e.target.composing||t.$set(t.formData,"company",e.target.value)}}})])]),t._v(" "),s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("个人介绍")]),t._v(" "),s("div",{staticClass:"input-box profile-input profile-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.introduction,expression:"formData.introduction"}],staticClass:"input",attrs:{placeholder:"填写职业技能、擅长的事情、喜欢的事情等"},domProps:{value:t.formData.introduction},on:{input:function(e){e.target.composing||t.$set(t.formData,"introduction",e.target.value)}}})])]),t._v(" "),s("li",{staticClass:"item-view"},[s("span",{staticClass:"title"},[t._v("个人主页")]),t._v(" "),s("div",{staticClass:"input-box profile-input profile-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.home_page,expression:"formData.home_page"}],staticClass:"input",attrs:{placeholder:"填写你的个人主页"},domProps:{value:t.formData.home_page},on:{input:function(e){e.target.composing||t.$set(t.formData,"home_page",e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"footer-view"},[s("button",{staticClass:"button button-save",on:{click:t.updateUserInfo}},[t._v("保存")])])])])}),[],!1,null,"ec31ffa4",null);e.default=m.exports},VVul:function(t,e,s){"use strict";s.r(e);var a=s("7Qib"),i=s("iHbI"),n=s("Kvkj"),o=s("i9CR"),r=s("m0go"),l=s("YP4+"),c={name:"books",mixins:[r.a],metaInfo(){return{title:`小书-${this.website.meta.website_name}`,meta:[{name:"description",content:`小书-${this.website.meta.website_name}`}],htmlAttrs:{lang:"zh"},script:[...a.a.resource({route:this.$route,config:this.website.config}),...a.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},asyncData:({store:t,route:e})=>Promise.all([t.dispatch("articleColumn/GET_ARTICLE_COLUMN_ALL"),t.dispatch("books/GET_BOOKS_LIST",{page:e.query.page||1,columnEnName:e.params.columnEnName||"",tagId:e.query.tagId||"",sort:e.query.sort||""})]),data:()=>({childNavItem:"",isFree:l.e,isFreeText:l.f,modelName:l.i,statusList:l.l,statusListText:l.m}),created(){this.initColumn()},watch:{$route(t,e){this.initColumn()}},methods:{initColumn(){this.$route.params.columnEnName&&"all"!==this.$route.params.columnEnName?this.switchColumn(this.$route.params.columnEnName):this.childNavItem={}},collectBooks(t){this.$store.dispatch("common/SET_COLLECT",{associate_id:t,type:l.i.books}).then(t=>{"success"===t.state?(this.$message.success(t.message),window.location.reload()):this.$message.warning(t.message)})},createBook(){this.$store.state.personalInfo.islogin?this.$router.push({name:"booksWrite",params:{type:"create"}}):this.$router.push({name:"signIn"})},isCollect(t){let e=[];return t.collectUserIds&&t.collectUserIds.length>0?(t.collectUserIds.map(t=>{e.push(t.uid)}),~e.indexOf(Number(this.personalInfo.user.uid))?{status:!0,text:"已收藏"}:{status:!1,text:"收藏"}):{status:!1,text:"收藏"}},switchColumn(t){this.articleColumn.homeColumn.map(e=>{e.en_name===t&&(this.childNavItem=e||{})})},sortMenu(t){let e={};return t&&(e.sort=t),this.$route.query.tagId&&(e.tagId=this.$route.query.tagId),e},shareChange(t){let e=window.location.origin;"sina"===t.type?a.c.shareToXl(t.data.name,e+"/p/"+t.data.aid,this.website.meta.logo):"qzone"===t.type?a.c.shareToQq(t.data.name,e+"/p/"+t.data.aid,this.website.meta.logo):"qq"===t.type&&a.c.shareQQ(t.data.name,e+"/p/"+t.data.aid,this.website.meta.logo)},pageChange(t){let e={page:t};this.$route.query.tagId&&(e.tagId=this.$route.query.tagId),this.$route.query.sort&&(e.sort=this.$route.query.sort),this.$router.push({name:"books",params:{columnEnName:this.$route.params.columnEnName},query:e})}},computed:{...Object(i.b)(["website","books","articleColumn","personalInfo"])},components:{websiteNotice:o.a,Page:n.f}},m=(s("sDPK"),s("Yj/X")),d=Object(m.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"books"},[s("div",{staticClass:"container  box-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-12 col-md-12"},[s("div",{staticClass:"books-menu client-card"},[s("nav",{staticClass:"column-menu"},[s("ul",{staticClass:"nav-item-view"},[t._l(t.articleColumn.homeColumn,(function(e){return s("li",{key:e.column_id,staticClass:"nav-item"},[s("router-link",{attrs:{to:{name:"books",params:{columnEnName:e.en_name}}}},[t._v("\n                  "+t._s(e.name)+"\n                ")])],1)})),t._v(" "),s("li",{staticClass:"nav-item more"},[s("router-link",{attrs:{to:{name:"columnAll"}}},[t._v(" 更多...")])],1)],2)]),t._v(" "),s("div",{staticClass:"menu-main"},[t.childNavItem.tag&&t.childNavItem.tag.length>0?s("nav",{staticClass:"column-tag-menu"},[s("ul",{staticClass:"nav-item-view"},t._l(t.childNavItem.tag,(function(e,a){return s("li",{key:a,staticClass:"nav-item",class:{active:e.tag_id===t.$route.query.tagId}},[s("router-link",{attrs:{to:{name:"books",query:{tagId:e.tag_id}}}},[t._v("\n                    "+t._s(e.name)+"\n                  ")])],1)})),0)]):t._e(),t._v(" "),s("nav",{staticClass:"sort-list-menu clearfix"},[s("router-link",{staticClass:"nav-item",attrs:{to:{name:"books",query:t.sortMenu("")}}},[t._v("热门")]),t._v(" "),s("router-link",{staticClass:"nav-item",attrs:{to:{name:"books",query:t.sortMenu("new")}}},[t._v("最新")]),t._v(" "),s("router-link",{staticClass:"nav-item",attrs:{to:{name:"books",query:t.sortMenu("30day")}}},[t._v("近30天")]),t._v(" "),s("router-link",{staticClass:"nav-item",attrs:{to:{name:"books",query:t.sortMenu("7day")}}},[t._v("近7天")]),t._v(" "),s("span",{staticClass:"nav-item add-book",on:{click:t.createBook}},[t._v("新增小书")])],1)])]),t._v(" "),s("div",{staticClass:"books-list"},[s("div",{staticClass:"row"},t._l(t.books.booksList.list,(function(e,a){return s("div",{key:a,staticClass:"col-xs-4 col-sm-4 col-md-4"},[s("div",{staticClass:"library-item clearfix"},[s("div",{staticClass:"library-item__thumb"},[s("router-link",{attrs:{to:{name:"book",params:{books_id:e.books_id}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cover_img,expression:"booksItem.cover_img"}],staticClass:"img-full",attrs:{lazy:"loaded"}})])],1),t._v(" "),s("div",{staticClass:"library-item__body"},[s("router-link",{staticClass:"library-item__title",attrs:{to:{name:"book",params:{books_id:e.books_id}}}},[t._v("\n                    "+t._s(e.title)+"\n                    "),s("span",{staticClass:"free",class:Number(e.is_free)===t.isFree.free?"yes":""},[t._v(t._s(t.isFreeText[e.is_free]))])]),t._v(" "),s("div",{staticClass:"library-item__info"},[s("span",[s("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(e.read_count||0)+"\n                    ")]),s("span",{staticStyle:{"margin-left":"8px"}},[s("i",{staticClass:"el-icon-notebook-2"}),t._v(" "+t._s(e.bookCount||0)+"\n                    ")]),t._v(" "),~[t.statusList.reviewSuccess,t.statusList.freeReview].indexOf(e.status)&&t.personalInfo.islogin?s("span",{staticClass:"attention",class:{active:t.isCollect(e).status},on:{click:function(s){return t.collectBooks(e.books_id)}}},[t._v(t._s(t.isCollect(e).text))]):t._e()]),t._v(" "),s("div",{staticClass:"library-item-tag"},[e.tag?t._l(e.tag,(function(e,a){return s("router-link",{key:a,staticClass:"tag-class frontend",attrs:{to:{name:"article_tag",params:{en_name:e.en_name}}}},[t._v(t._s(e.name))])})):[s("span",{staticClass:"hint"},[t._v("\n                        暂时没有加入标签，加入标签更能容易被搜索到\n                      ")])]],2)],1)])])})),0),t._v(" "),s("Page",{attrs:{total:Number(t.books.booksList.count),pageSize:Number(t.books.booksList.pageSize),page:Number(t.$route.query.page)||1},on:{pageChange:t.pageChange}})],1)])])])])}),[],!1,null,"01e32b54",null);e.default=d.exports},"W/+J":function(t,e,s){},W44R:function(t,e,s){"use strict";var a=s("nOK7");s.n(a).a},WlYL:function(t,e,s){"use strict";s.r(e);var a=s("qYcz"),i=s("Z4jx"),n=s("iHbI"),o=s("vuaj"),r=s.n(o),l=s("Kvkj"),c=s("YP4+"),m={name:"Personal",metaInfo:()=>({title:"个人中心",htmlAttrs:{lang:"zh"}}),data:()=>({modelName:c.i,userLevel:c.p,detail:{list:[],count:0,page:1,pageSize:10}}),mounted(){this.personalInfo.islogin||this.$router.push({name:"signIn"}),this.getVirtualList()},methods:{pageChange(t){this.detail.page=t,this.getVirtualList()},getVirtualList(){this.$store.dispatch("common/GET_EXPERIENCE_LIST",{uid:this.personalInfo.user.uid,page:this.detail.page,pageSize:this.detail.pageSize}).then(t=>{this.detail=t.data})},getLevel(){let t=0,e=this.user.user_info.experience;return e<this.userLevel.one?t=0:e<this.userLevel.two&&e>this.userLevel.one?t=1:e<this.userLevel.three&&e>this.userLevel.two?t=2:e<this.userLevel.four&&e>this.userLevel.three?t=3:e<this.userLevel.five&&e>this.userLevel.four?t=4:e>=this.userLevel.five&&(t=5),t}},computed:{...Object(n.b)(["personalInfo","user"])},components:{UserAside:a.a,ClientOnly:r.a,Collect:i.a,Page:l.f}},d=(s("bLBL"),s("Yj/X")),u=Object(d.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("client-only",[s("section",{staticClass:"layout-content detail-lay"},[s("div",{staticClass:"container  box-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8 main"},[s("div",{staticClass:"client-card pd20"},[s("h3",[t._v("经验明细")]),t._v(" "),s("div",{staticClass:"amount"},[t._v("\n              等级："),s("span",{staticClass:"amount-num"},[t._v("Lv "+t._s(t.getLevel()||0)+" ")]),t._v("\n              总经验："),s("span",{staticClass:"amount-num"},[t._v(t._s(t.personalInfo.user_info.experience||0)+"\n              ")])]),t._v(" "),s("table",{staticClass:"table-view"},[s("tr",[s("td",{staticClass:"hd",staticStyle:{width:"20%"}},[t._v("时间")]),t._v(" "),s("td",{staticClass:"hd",staticStyle:{width:"20%"}},[t._v("数额")]),t._v(" "),s("td",{staticClass:"hd",staticStyle:{width:"20%"}},[t._v("描述")])]),t._v(" "),t._l(t.detail.list,(function(e,a){return s("tr",{key:a},[s("td",{staticStyle:{width:"20%"}},[t._v(t._s(e.create_dt))]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[s("span",{staticClass:"balance"},[t._v(" +"+t._s(e.value)+" ")])]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[t._v("\n                  "+t._s(e.actionText+e.typeText)+"\n                  "),e.type===t.modelName.article?s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"article",params:{aid:e.content.aid}}}},[t._v(t._s(e.content.title))]):t._e(),t._v(" "),e.type===t.modelName.dynamic?s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"dynamicView",params:{dynamicId:e.content.id}}}},[t._v(t._s(e.content.content))]):t._e()],1)])}))],2),t._v(" "),s("Page",{attrs:{total:Number(t.detail.count),pageSize:Number(t.detail.pageSize),page:Number(t.detail.page)||1},on:{pageChange:t.pageChange}})],1)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4 box-aside"},[s("UserAside")],1)])])])])}),[],!1,null,"f8c76984",null);e.default=u.exports},XFvl:function(t,e,s){"use strict";var a=s("IodM");const i={SIGN_SEND_CODE:({commit:t,dispatch:e,state:s},{email:i})=>Object(a.a)({url:"/sign-up-code",method:"post",parameter:{email:i}}),LOGIN:({commit:t,dispatch:e,state:s},i)=>Object(a.a)({url:"/sign-in",method:"post",parameter:i}),REGISTER:({commit:t,dispatch:e,state:s},i)=>Object(a.a)({url:"/sign-up",method:"post",parameter:i}),RESET_PASSWORD_CODE:({commit:t,dispatch:e,state:s},i)=>Object(a.a)({url:"/reset-password-code",method:"post",parameter:i}),RESET_PASSWORD:({commit:t,dispatch:e,state:s},i)=>Object(a.a)({url:"/reset_password",method:"post",parameter:i})};e.a={namespaced:!0,state:()=>({}),mutations:{},actions:i}},Xjtm:function(t,e,s){},YHQV:function(t,e,s){"use strict";var a=s("CD3j");s.n(a).a},YXap:function(t,e,s){},Yx7G:function(t,e,s){"use strict";var a=s("DVgl");s.n(a).a},Z4jx:function(t,e,s){"use strict";var a=s("iHbI"),i=s("Kvkj"),n=s("YP4+"),o={name:"Collect",metaInfo:()=>({title:"小书-收藏集",htmlAttrs:{lang:"zh"}}),data:()=>({modelName:n.i,collectBooksInfo:{count:0,list:[],page:1,pageSize:10}}),mounted(){this.getCollectBooksList()},methods:{pageChange(t){this.collectBooksInfo.page=1,this.getCollectBooksList()},getCollectBooksList(t){this.$store.dispatch("books/GET_COLLECT_BOOKS_LIST",{page:this.collectBooksInfo.page||1,uid:this.personalInfo.user.uid}).then(t=>{this.collectBooksInfo=t.data})},collectBooks(t){this.$store.dispatch("common/SET_COLLECT",{associate_id:t,type:n.i.books}).then(t=>{"success"===t.state?(this.$message.success(t.message),window.location.reload()):this.$message.warning(t.message)})}},computed:{...Object(a.b)(["personalInfo","user"])},components:{Page:i.f}},r=(s("VEBL"),s("Yj/X")),l=Object(r.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"collect-books-lay layout-content"},[s("div",{staticClass:"books-list row"},t._l(t.collectBooksInfo.list,(function(e,a){return s("div",{key:a,staticClass:"col-xs-6 col-sm-6 col-md-6"},[s("div",{staticClass:"library-item clearfix"},[s("div",{staticClass:"library-item__thumb"},[s("router-link",{attrs:{to:{name:"book",params:{books_id:e.books.books_id}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.books.cover_img,expression:"booksItem.books.cover_img"}],staticClass:"img-full",attrs:{lazy:"loaded"}})])],1),t._v(" "),s("div",{staticClass:"library-item__body"},[s("div",{staticClass:"library-item__title"},[s("router-link",{staticClass:"link-dark-major",attrs:{to:{name:"book",params:{books_id:e.books.books_id}}}},[t._v("\n              "+t._s(e.books.title)+"\n            ")])],1),t._v(" "),s("div",{staticClass:"library-item__info"},[s("span",[s("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(e.books.read_count||0)+"\n            ")]),s("span",{staticStyle:{"margin-left":"8px"}},[s("i",{staticClass:"el-icon-notebook-2"}),t._v(" "+t._s(e.bookCount||0)+"\n            ")]),t._v(" "),~[2,4].indexOf(e.books.status)&&t.personalInfo.islogin?s("span",{staticClass:"attention",on:{click:function(s){return t.collectBooks(e.books.books_id)}}},[t._v("取消收藏")]):t._e()]),t._v(" "),s("div",{staticClass:"library-item-tag"},[e.tag?t._l(e.tag,(function(e,a){return s("router-link",{key:a,staticClass:"tag-class frontend",attrs:{to:{name:"article_tag",params:{en_name:e.en_name}}}},[t._v(t._s(e.name))])})):[s("span",{staticClass:"hint"},[t._v("\n                暂时没有加入标签，加入标签更能容易被搜索到\n              ")])]],2)])])])})),0),t._v(" "),s("Page",{attrs:{total:Number(t.collectBooksInfo.count),pageSize:t.collectBooksInfo.pageSize,page:Number(t.collectBooksInfo.page)||1},on:{pageChange:t.pageChange}})],1)}),[],!1,null,"4a65f231",null).exports,c={name:"TopArticleItem",props:{articleItem:{type:Object}},data:()=>({isOperating:!1}),methods:{commandChange(t){"cancel"===t.type&&this.$confirm("此操作将永久取消关注此文章?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.userLikeArticle()}).catch(()=>{})},userLikeArticle(){this.$store.dispatch("common/SET_LIKE",{associate_id:this.articleItem.aid,type:n.i.article}).then(t=>{"success"===t.state?this.$emit("likeArticle"):this.$message.warning(t.message)}).catch((function(t){console.log(t)}))}},components:{Dropdown:i.c},computed:{...Object(a.b)(["personalInfo","user"])}},m=(s("bFti"),Object(r.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"content-box content-box-index"},[s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-row title-row"},[s("router-link",{staticClass:"title",attrs:{to:{name:"article",params:{aid:t.articleItem.aid}}}},[t._v(t._s(t.articleItem.title))])],1),t._v(" "),s("div",{staticClass:"info-row meta-row"},[s("ul",{staticClass:"meta-list"},[s("li",{staticClass:"item username clickable"},[s("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{uid:t.articleItem.user.uid,routeType:"article"}}}},[t._v(t._s(t.articleItem.user.nickname))])],1),t._v(" "),s("li",{staticClass:"item item-icon read-count"},[s("i",{staticClass:"el-icon-reading"}),t._v(" "),s("strong",{domProps:{textContent:t._s(t.articleItem.read_count)}})]),t._v(" "),s("li",{staticClass:"item item-icon like-article"},[s("i",{staticClass:"el-icon-star-off"}),t._v(" "),s("strong",{domProps:{textContent:t._s(t.articleItem.thumb_count)}})]),t._v(" "),s("li",{staticClass:"item item-icon comment-count"},[s("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),s("strong",{domProps:{textContent:t._s(t.articleItem.comment_count)}})]),t._v(" "),s("li",{staticClass:"item",domProps:{textContent:t._s(t.articleItem.create_dt)}}),t._v(" "),t.articleItem.tag_ids?s("li",{staticClass:"item"},t._l(t.articleItem.tag,(function(e,a){return s("router-link",{key:a,staticClass:"tag-class frontend",attrs:{to:{name:"article_tag",params:{en_name:e.en_name}}}},[t._v(t._s(e.name))])})),1):t._e(),t._v(" "),t.personalInfo.islogin?s("li",{staticClass:"item operat-view",on:{click:function(e){t.isOperating=!t.isOperating}}},[s("Dropdown",[s("div",{staticClass:"el-dropdown-link",attrs:{slot:"button"},slot:"button"},[s("i",{staticClass:"el-icon-more"})]),t._v(" "),s("div",{staticClass:"dropdown-menu-view"},[s("div",{staticClass:"dropdown-menu-item",on:{click:function(e){return t.commandChange({type:"cancel"})}}},[t._v("\n                取消喜欢\n              ")])])])],1):t._e()])])]),t._v(" "),t.articleItem.cover_img?s("div",{staticClass:"lazy thumb thumb loaded",staticStyle:{"background-size":"cover"},style:{"background-image":"url("+t.articleItem.cover_img+")"}}):t._e()])}),[],!1,null,"3e3e8ca8",null).exports),d={name:"UserLike",metaInfo:()=>({title:"文章-收藏集",htmlAttrs:{lang:"zh"}}),data:()=>({articleList:{article_list:[],count:0,page:1,pageSize:10}}),mounted(){this.getUserLikeArticleList()},methods:{getUserLikeArticleList(){this.$store.dispatch("user/GET_USER_LIKE_ARTICLE_LIST",{uid:this.personalInfo.user.uid,page:this.articleList.page||1,pageSize:this.articleList.pageSize||10}).then(t=>{this.articleList=t.data})},pageChange(t){this.articleList.page=t,this.getUserLikeArticleList()}},computed:{...Object(a.b)(["personalInfo","user"])},components:{LikeArticleItem:m,Page:i.f}},u=Object(r.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-article-like"},[s("ul",{staticClass:"user-article-like-view"},t._l(t.articleList.article_list,(function(e,a){return s("li",{key:a},[s("LikeArticleItem",{attrs:{articleItem:e,Key:a},on:{likeArticle:t.getUserLikeArticleList}})],1)})),0),t._v(" "),s("Page",{attrs:{total:t.articleList.count,pageSize:t.articleList.pageSize,page:Number(t.articleList.page)||1},on:{pageChange:t.pageChange}})],1)}),[],!1,null,"15a36ee8",null).exports,_=s("7Qib"),p={name:"articleBlogItem",data:()=>({statusList:n.l,modelName:n.i}),props:["articleBlogItem"],methods:{shareChange(t){let e=window.location.origin;"sina"===t.type?_.c.shareToXl(t.data.title,e+"/p/"+t.data.aid,this.website.meta.logo):"qzone"===t.type?_.c.shareToQq(t.data.title,e+"/p/"+t.data.aid,this.website.meta.logo):"qq"===t.type&&_.c.shareQQ(t.data.title,e+"/p/"+t.data.aid,this.website.meta.logo)},setLikeArticleBlog(t){this.$store.dispatch("common/SET_COLLECT",{associate_id:t.associate_id,type:n.i.article_blog}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$emit("changeLike")):this.$message.warning(t.message)})},setBlogTime:t=>t.create_date===t.update_date?`创建于：${t.create_dt}`:`更新于：${t.update_dt}`},computed:{...Object(a.b)(["website","personalInfo"])},components:{Page:i.f}},v=(s("FmBQ"),Object(r.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-article-blog-item"},[t.articleBlogItem.articleBlog?[s("div",{staticClass:"user-article-blog-top"},[s("router-link",{staticClass:"article-blog-icon",attrs:{to:{name:"articleBlog",params:{blogId:t.articleBlogItem.articleBlog.blog_id}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.articleBlogItem.articleBlog.icon,expression:"articleBlogItem.articleBlog.icon"}],staticClass:"article-blog-icon-img",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"user-article-blog-info"},[s("div",{staticClass:"info-content"},[s("router-link",{staticClass:"name",attrs:{to:{name:"articleBlog",params:{blogId:t.articleBlogItem.articleBlog.blog_id}}}},[t._v("\n            "+t._s(t.articleBlogItem.articleBlog.name)+"\n          ")])],1)])],1),t._v(" "),s("div",{staticClass:"user-article-blog-main"},[s("ul",{staticClass:"user-info"},[s("li",{staticClass:"item item-icon read-count"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.articleBlogItem.user.avatar,expression:"articleBlogItem.user.avatar"}],staticClass:"user-avatar",attrs:{alt:""}}),t._v(" "),s("router-link",{staticClass:"nickname",attrs:{to:{name:"user",params:{uid:t.articleBlogItem.user.uid}}}},[t._v(t._s(t.articleBlogItem.user.nickname))])],1),t._v(" "),s("li",{staticClass:"item item-icon"},[s("span",{staticClass:"time"},[t._v(t._s(t.setBlogTime(t.articleBlogItem.articleBlog)))])])]),t._v(" "),s("p",{staticClass:"description"},[t._v("介绍："+t._s(t.articleBlogItem.articleBlog.description||"暂时没有简介，输入简介更直观表达专栏内容"))])]),t._v(" "),s("div",{staticClass:"user-article-blog-footer"},[s("ul",{staticClass:"statistics"},[s("li",{staticClass:"item item-icon"},[s("i",{staticClass:"el-icon-document"}),t._v(" "),s("span",{domProps:{textContent:t._s(t.articleBlogItem.articleCount||0)}})]),t._v(" "),s("li",{staticClass:"item item-icon read-count"},[s("i",{staticClass:"el-icon-view"}),t._v(" "),s("span",{domProps:{textContent:t._s(t.articleBlogItem.read_count||0)}})]),t._v(" "),s("li",{staticClass:"item item-icon like-article"},[s("i",{staticClass:"el-icon-star-off"}),t._v(" "),s("span",{domProps:{textContent:t._s(t.articleBlogItem.likeCount||0)}})]),t._v(" "),~[t.statusList.reviewSuccess,t.statusList.freeReview].indexOf(t.articleBlogItem.articleBlog.status)&&t.personalInfo.islogin?s("li",{staticClass:"item attention",on:{click:function(e){return t.setLikeArticleBlog(t.articleBlogItem)}}},[s("span",[t._v("取消收藏")])]):t._e()])])]:[s("div",{staticClass:"user-article-blog-null"},[s("span",{staticClass:"info"},[t._v("此专栏暂时不可见，原因有，1.专栏主人正在装修专栏中，2.由于未知原因，专栏被个人或者官方下架，你可以等待，或者点击下方的")]),t._v(" "),s("span",{staticClass:"cancel-attention",on:{click:function(e){return t.setLikeArticleBlog(t.articleBlogItem)}}},[t._v("取消关注")])])]],2)}),[],!1,null,"0ddb74b8",null).exports),g={name:"UserLike",metaInfo:()=>({title:"个人专栏-收藏集",htmlAttrs:{lang:"zh"}}),data:()=>({articleBlog:{list:[],count:0,page:1,pageSize:10}}),mounted(){this.getLikeArticleBlogList()},methods:{getLikeArticleBlogList(){this.$store.dispatch("articleBlog/GET_LIKE_ARTICLE_BLOG_LIST",{uid:this.personalInfo.user.uid,page:this.articleBlog.page||1,pageSize:this.articleBlog.pageSize||10}).then(t=>{this.articleBlog=t.data})},pageChange(t){this.articleBlog.page=t,this.getLikeArticleBlogList()}},computed:{...Object(a.b)(["personalInfo"])},components:{LikeBlogItem:v,Page:i.f}},h=Object(r.a)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-article-like"},[s("ul",{staticClass:"user-article-like-view row"},t._l(t.articleBlog.list,(function(e,a){return s("li",{key:a,staticClass:"col-xs-6 col-sm-6 col-md-6"},[s("LikeBlogItem",{attrs:{articleBlogItem:e},on:{changeLike:t.getLikeArticleBlogList}})],1)})),0),t._v(" "),s("Page",{attrs:{total:t.articleBlog.count,pageSize:Number(t.articleBlog.pageSize),page:Number(t.articleBlog.page)||1},on:{pageChange:t.pageChange}})],1)}),[],!1,null,"0c8d66cc",null).exports,f={name:"Collect",metaInfo:()=>({title:"收藏集",htmlAttrs:{lang:"zh"}}),data:()=>({type:"BooksCollect"}),computed:{...Object(a.b)(["personalInfo","user"])},components:{BooksCollect:l,ArticleLike:u,ArticleBlogLike:h}},b=(s("c3Z+"),Object(r.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"collect-lay layout-content"},[s("div",{staticClass:"filter"},[s("a",{staticClass:"filter-item",class:{active:"BooksCollect"===t.type},attrs:{href:"javascript:;"},on:{click:function(e){t.type="BooksCollect"}}},[t._v("小书")]),t._v(" "),s("a",{staticClass:"filter-item",class:{active:"ArticleLike"===t.type},attrs:{href:"javascript:;"},on:{click:function(e){t.type="ArticleLike"}}},[t._v("文章")]),t._v(" "),s("a",{staticClass:"filter-item",class:{active:"ArticleBlogLike"===t.type},attrs:{href:"javascript:;"},on:{click:function(e){t.type="ArticleBlogLike"}}},[t._v("专栏")])]),t._v(" "),s("div",{staticClass:"content"},[s("BooksCollect",{directives:[{name:"show",rawName:"v-show",value:"BooksCollect"===t.type,expression:"type==='BooksCollect'"}]}),t._v(" "),s("ArticleLike",{directives:[{name:"show",rawName:"v-show",value:"ArticleLike"===t.type,expression:"type==='ArticleLike'"}]}),t._v(" "),s("ArticleBlogLike",{directives:[{name:"show",rawName:"v-show",value:"ArticleBlogLike"===t.type,expression:"type==='ArticleBlogLike'"}]})],1)])}),[],!1,null,"196ae4fe",null));e.a=b.exports},ZAAj:function(t,e,s){},ZYqM:function(t,e,s){"use strict";s.r(e);var a=s("8+Sn"),i=s("vuaj"),n=s.n(i),o=s("iHbI"),r=s("XFvl"),l={name:"SignIn",metaInfo(){return{title:`${this.website.meta.website_name}-登录`,htmlAttrs:{lang:"zh"}}},asyncData:({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("PERSONAL_INFO",{accessToken:s}),t.dispatch("website/GET_WEBSITE_INFO"),t.dispatch("articleTag/GET_ARTICLE_TAG_ALL")]),mounted(){this.$store.registerModule("sign",r.a)},data:()=>({formData:{email:"",phone:"",type:"email",password:""}}),methods:{login(){this.$store.dispatch("sign/LOGIN",this.formData).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$refs.login.reset(),a.a.set("accessToken",t.data.token,7),this.$router.push({name:"home"})):this.$message.warning(t.message)})},tapRegister(){this.$router.push({name:"signUp"})},tapResetPassword(){this.$router.push({name:"resetPassword"})}},computed:{...Object(o.b)(["website"])},components:{ClientOnly:n.a},destroyed(){this.$store.unregisterModule("sign")}},c=(s("3sjr"),s("Yj/X")),m=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ClientOnly",[s("section",{staticClass:"sign-lay layout-content"},[s("div",{staticClass:"sign-view client-card"},[s("div",{staticClass:"title"},[t._v("\n        登录\n      ")]),t._v(" "),s("div",{staticClass:"js-sign-in-container"},[s("form",{ref:"login",attrs:{id:"new_session"}},[s("div",{staticClass:"input-prepend restyle js-normal"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],attrs:{placeholder:"邮箱",type:"text",value:""},domProps:{value:t.formData.email},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-user-solid"})]),t._v(" "),s("div",{staticClass:"input-prepend"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],attrs:{placeholder:"密码",type:"password",name:"password",value:""},domProps:{value:t.formData.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-key"})]),t._v(" "),s("div",{staticClass:"remember-btn clearfix"},[s("div",{staticClass:"pull-left"},[t._v("\n              没有账号？ "),s("em",{staticClass:"reg-btn",on:{click:t.tapRegister}},[t._v("注册")])]),t._v(" "),s("div",{staticClass:"pull-right"},[s("a",{attrs:{href:"javascript:;"},on:{click:t.tapResetPassword}},[t._v("忘记密码")])])]),t._v(" "),s("div",{staticClass:"footer-text"}),t._v(" "),s("button",{staticClass:"sign-in-button",attrs:{id:"sign-in-form-submit-btn",type:"button"},on:{click:t.login}},[t._v("\n            登录\n          ")]),t._v(" "),~t.website.oauths.indexOf("github")?s("div",{staticClass:"other-login"},[s("a",{staticClass:"github",attrs:{href:"/api-client/v1/oauth/github-oauth"}},[t._v("通过github登录")])]):t._e(),t._v(" "),s("router-link",{staticClass:"return-home",attrs:{to:{name:"home"}}},[t._v("返回首页")])],1)])])])])}),[],!1,null,"77703c48",null);e.default=m.exports},a9wT:function(t,e,s){"use strict";s.d(e,"c",(function(){return a})),s.d(e,"b",(function(){return i})),s.d(e,"d",(function(){return n})),s.d(e,"a",(function(){return o})),s.d(e,"f",(function(){return r})),s.d(e,"e",(function(){return l}));
/**
 * @Author: HuaChao Chen <chc>
 * @Date:   2017-06-14T23:04:34+08:00
 * @Email:  chenhuachaoxyz@gmail.com
 * @Filename: extra-function.js
 * @Last modified by:   CHC
 * @Last modified time: 2017-12-19T17:46:48+08:00
 * @License: MIT
 * @Copyright: 2017
 */
const a=(t,{prefix:e,subfix:s,str:a,type:i},n)=>{if(t.focus(),"number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd){var o=t.selectionStart,r=t.selectionEnd,l=t.value;o===r?(t.value=l.substring(0,o)+e+a+s+l.substring(r,l.length),t.selectionStart=o+e.length,t.selectionEnd=o+(a.length+e.length)):l.substring(o-e.length,o)===e&&l.substring(r,r+s.length)===s&&function(t,e,s,a,i){if("*"===t&&"*"===e&&"*"===s.substring(a-2,a-1)&&"*"===s.substring(i+1,i+2))return!1;return!0}(e,s,l,o,r)?(t.value=l.substring(0,o-e.length)+l.substring(o,r)+l.substring(r+s.length,l.length),t.selectionStart=o-e.length,t.selectionEnd=r-e.length):(t.value=l.substring(0,o)+e+l.substring(o,r)+s+l.substring(r,l.length),t.selectionStart=o+e.length,t.selectionEnd=o+(r-o+e.length))}else alert("Error: Browser version is too low");n.d_value=t.value,t.focus()};const i=t=>{let e=t.getTextareaDom();if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd){var s=e.selectionStart,a=e.selectionEnd,i=e.value;if(s===a)e.value=i.substring(0,s)+"1. "+i.substring(a,i.length),e.selectionEnd=e.selectionStart=s+3;else{let t=s;for(;t>0&&"\n"!==i.substring(t-1,t);)t--;let n=i.substring(t,a),o=n.split("\n");for(let t=0;t<o.length;t++)o[t]=t+1+". "+o[t];let r=o.join("\n");e.value=i.substring(0,t)+r+i.substring(a,i.length),e.selectionStart=t,e.selectionEnd=a+r.length-n.length}}else alert("Error: Browser version is too low");t.d_value=e.value,e.focus()},n=t=>{let e=t.getTextareaDom();if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd){var s=e.selectionStart,a=e.selectionEnd,i=e.value;if(s===a)e.value=i.substring(0,s)+"- "+i.substring(a,i.length),e.selectionEnd=e.selectionStart=s+2;else{let t=s;for(;t>0&&"\n"!==i.substring(t-1,t);)t--;let n=i.substring(t,a),o=n.replace(/\n/g,"\n- ");o="- "+o,e.value=i.substring(0,t)+o+i.substring(a,i.length),e.selectionStart=t,e.selectionEnd=a+o.length-n.length}}else alert("Error: Browser version is too low");t.d_value=e.value,e.focus()},o=(t,e)=>{let s;s=t.$refs.navigationContent,s.innerHTML=t.d_render;let a=s.children;if(a.length)for(let t=0;t<a.length;t++)i(a[t],t,a);function i(e,s,a){/^H[1-6]{1}$/.exec(e.tagName)?e.onclick=function(){let e=t.$refs.vShowContent,a=t.$refs.vNoteEdit;t.s_subfield?t.s_preview_switch&&(a.scrollTop=e.children[s].offsetTop*(a.scrollHeight-a.offsetHeight)/(e.scrollHeight-e.offsetHeight)):t.s_preview_switch&&(e.scrollTop=e.children[s].offsetTop)}:e.style.display="none"}},r=(t,e)=>{let s=t.srcElement?t.srcElement:t.target,a=s.scrollTop/(s.scrollHeight-s.offsetHeight);e.edit_scroll_height>=0&&s.scrollHeight!==e.edit_scroll_height&&s.scrollHeight-s.offsetHeight-s.scrollTop<=30&&(e.$refs.vNoteEdit.scrollTop=s.scrollHeight-s.offsetHeight,a=1),e.edit_scroll_height=s.scrollHeight,e.$refs.vShowContent.scrollHeight>e.$refs.vShowContent.offsetHeight&&(e.$refs.vShowContent.scrollTop=(e.$refs.vShowContent.scrollHeight-e.$refs.vShowContent.offsetHeight)*a)};function l(t,e){"function"!=typeof e&&(e=function(){});var s=document.querySelectorAll("script[src='"+t+"']");if(s.length>0)return s[0].addEventListener("load",(function(){e()})),void e();var a=document.createElement("script"),i=document.getElementsByTagName("head")[0];a.type="text/javascript",a.charset="UTF-8",a.src=t,a.addEventListener?a.addEventListener("load",(function(){e()}),!1):a.attachEvent&&a.attachEvent("onreadystatechange",(function(){"loaded"===window.event.srcElement.readyState&&e()})),i.appendChild(a)}},aZLT:function(t,e,s){"use strict";s.r(e);var a=s("8+Sn"),i=s("Kvkj"),n=s("vuaj"),o=s.n(n),r=s("XFvl"),l={name:"ResetPassword",metaInfo:()=>({title:"找回密码",htmlAttrs:{lang:"zh"}}),data:()=>({isSendCode:!1,isSendCodeSuccess:!1,formData:{email:"",code:"",type:"email",new_password:"",repeat_new_password:""}}),mounted(){this.$store.registerModule("sign",r.a)},methods:{tapRegister(){this.$router.push({name:"signUp"})},tapSign(){this.$router.push({name:"signIn"})},sendCode(){this.isSendCodeSuccess=!0,this.$store.dispatch("sign/RESET_PASSWORD_CODE",{email:this.formData.email,type:"email"}).then(t=>{this.isSendCodeSuccess=!1,"success"===t.state?this.isSendCode=!0:this.$message.warning(t.message)})},resetSubmit(){this.$store.dispatch("sign/RESET_PASSWORD",this.formData).then(t=>{this.$nextTick((function(){"success"===t.state?(this.$message.success("重置密码成功"),a.a.delete("accessToken")):this.$message.warning(t.message)}))})}},components:{"send-code":i.k,ClientOnly:o.a},destroyed(){this.$store.unregisterModule("sign")}},c=(s("vyXx"),s("Yj/X")),m=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ClientOnly",[s("section",{staticClass:"sign-lay layout-content",attrs:{id:"reset-password"}},[s("div",{staticClass:"sign-view client-card"},[s("div",{staticClass:"title"},[t._v("\n        重置密码\n      ")]),t._v(" "),s("div",{staticClass:"js-sign-in-container"},[s("form",[s("div",{staticClass:"input-prepend email-view"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"send-email-input account",attrs:{placeholder:"邮箱",type:"text"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-message"}),t._v(" "),s("send-code",{staticClass:"btn-send-email-code btn",attrs:{isSend:t.isSendCodeSuccess,"storage-key":"reset-sendEmailCode"},nativeOn:{click:function(e){return t.sendCode(e)}},model:{value:t.isSendCode,callback:function(e){t.isSendCode=e},expression:"isSendCode"}})],1),t._v(" "),s("div",{staticClass:"input-prepend"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.code,expression:"formData.code"}],staticClass:"send-email-code code",attrs:{placeholder:"请输入验证码",type:"text"},domProps:{value:t.formData.code},on:{input:function(e){e.target.composing||t.$set(t.formData,"code",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-chat-round"})]),t._v(" "),s("div",{staticClass:"input-prepend"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.new_password,expression:"formData.new_password"}],staticClass:"password",attrs:{placeholder:"新密码",type:"password"},domProps:{value:t.formData.new_password},on:{input:function(e){e.target.composing||t.$set(t.formData,"new_password",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-key"})]),t._v(" "),s("div",{staticClass:"input-prepend"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repeat_new_password,expression:"formData.repeat_new_password"}],staticClass:"double_password",attrs:{placeholder:"重复新密码",type:"password"},domProps:{value:t.formData.repeat_new_password},on:{input:function(e){e.target.composing||t.$set(t.formData,"repeat_new_password",e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-key"})]),t._v(" "),s("button",{staticClass:"sign-in-button",attrs:{type:"button"},on:{click:t.resetSubmit}},[t._v("\n            重置密码\n          ")])]),t._v(" "),s("div",{staticClass:"sign-footer"},[s("a",{staticClass:"return-btn",attrs:{href:"javascript:;"},on:{click:t.tapSign}},[t._v("返回登录")])])])])])])}),[],!1,null,"1b382c8d",null);e.default=m.exports},ar2a:function(t,e,s){},bFti:function(t,e,s){"use strict";var a=s("+Nfd");s.n(a).a},bHO7:function(t,e,s){"use strict";var a=s("UWQL");s.n(a).a},bLBL:function(t,e,s){"use strict";var a=s("z6Xr");s.n(a).a},bbuj:function(t,e,s){},"c/TI":function(t,e,s){},"c3Z+":function(t,e,s){"use strict";var a=s("06GZ");s.n(a).a},cNny:function(t,e,s){"use strict";var a=s("W/+J");s.n(a).a},dCvR:function(t,e,s){"use strict";var a=s("ql+d");s.n(a).a},dY0y:function(t,e,s){},dnor:function(t,e,s){"use strict";var a=s("nxr3");s.n(a).a},eVQm:function(t,e,s){"use strict";s.r(e);var a=s("R3xZ"),i=s("/W3c"),n=s("4AYe"),o=s("xJx1"),r=s("Kvkj"),l=s("v/KW"),c=s("7Qib"),m=s("IodM"),d=s("iHbI"),u={name:"dynamic-view",minixs:[s("m0go").a],metaInfo(){return{title:this.dynamic.dynamicView.content+"-片刻"||!1,meta:[{name:"description",content:`${this.dynamic.dynamicView.content||""}-片刻`},{property:"og:site_name",content:this.website.meta.website_name},{property:"og:image",content:this.website.meta.logo},{property:"og:type",content:"article"},{property:"og:title",content:this.dynamic.dynamicView.content},{property:"og:description",content:this.dynamic.dynamicView.content},{property:"og:url",content:`${this.website.meta.domain_name}/dynamic/${this.$route.params.dynamicId}`}],htmlAttrs:{lang:"zh"},script:[...c.a.resource({route:this.$route,config:this.website.config,random:this.$route.params.dynamicId}),...c.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:this.$route.params.dynamicId})],__dangerouslyDisableSanitizers:["script"]}},asyncData:async({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("dynamic/GET_DYNAMIC_VIEW",{id:e.params.dynamicId})]),data:()=>({commentList:[],page:1,pageSize:6,isLoading:!1,isMore:!0}),created(){this.$store.dispatch("dynamic/GET_RECOMMEND_DYNAMIC_LIST")},watch:{$route(t,e){this.commentList=[],this.page=1,this.isLoading=!1,this.isMore=!0}},methods:{infiniteHandler(){this.isLoading=!0,Object(m.a)({url:"/dynamic-comment/list",method:"get",parameter:{params:{dynamic_id:this.$route.params.dynamicId,page:this.page,childPageSize:5,pageSize:this.pageSize}}}).then(t=>{this.isLoading=!1,this.commentList=[...this.commentList,...t.data.list],t.data.list.length>=this.pageSize?this.page+=1:this.isMore=!1}).catch(t=>{this.isMore=!1})},commentChange(t){"success"===t.state?(this.commentList.unshift(t.data),this.dynamicView.comment_count=Number(this.dynamicView.comment_count)+1,this.$message.success(t.message)):this.$message.warning(t.message)}},computed:{dynamicView:{get(){return this.$store.state.dynamic.dynamicView},set(t){this.$store.state.dynamic.dynamicView=t}},...Object(d.b)(["dynamic","website","personalInfo"])},components:{dynamicItem:a.a,dynamicWrite:i.a,dynamicAside:n.a,ScrollLoading:r.h,"comment-item":o.a,"comment-form":l.a}},_=(s("5+xG"),s("Yj/X")),p=Object(_.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"dynamic-content"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8"},[s("div",{staticClass:"dynamic-content-main client-card"},[s("dynamic-item",{attrs:{dynamicItem:t.dynamicView,dfIsCommnet:!1}}),t._v(" "),"yes"===t.website.config.on_comment?s("div",{staticClass:"dynamic-comment-part"},[s("comment-form",{attrs:{dynamicId:t.$route.params.dynamicId},on:{commentChange:t.commentChange}}),t._v(" "),s("div",{staticClass:"comment-list"},[s("scroll-loading",{attrs:{isLoading:t.isLoading,isMore:t.isMore},on:{"scroll-loading":t.infiniteHandler}},t._l(t.commentList,(function(e,a){return s("comment-item",{key:a,attrs:{"comment-item":e,dynamicId:t.$route.params.dynamicId}})})),1)],1)],1):s("div",[s("p",{staticClass:"no-comment"},[t._v("评论模块已关闭")])])],1)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4"},[s("div",{staticClass:"sidebar shadow"},[s("div",{staticClass:"related-dynamic-block client-card"},[s("header",{staticClass:"title"},[t._v("相关推荐")]),t._v(" "),s("ul",{staticClass:"dynamic-list"},t._l(t.dynamic.recommendDynamicList,(function(e,a){return s("li",{key:a,staticClass:"item"},[s("router-link",{staticClass:"dynamic",attrs:{to:{name:"dynamicView",params:{dynamicId:e.id}}}},[s("div",{staticClass:"content-box"},[s("div",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),s("div",{staticClass:"stat item"},[s("span",[t._v(t._s(e.thumb_count)+" 赞 · ")]),s("span",[t._v(t._s(e.comment_count)+" 评论")])])])])],1)})),0)])])])])])])}),[],!1,null,"1f2f8d68",null);e.default=p.exports},"fZ/o":function(t,e,s){},gPNN:function(t,e,s){"use strict";var a=s("CKd3");s.n(a).a},h67d:function(t,e,s){},hPYK:function(t,e,s){"use strict";s.r(e);s("8+Sn");var a=s("iHbI"),i={name:"ResetPassword",metaInfo:()=>({title:"个人设置-重置密码",htmlAttrs:{lang:"zh"}}),data:()=>({githubBindUrl:""}),mounted(){this.initUrl()},methods:{initUrl(){this.githubBindUrl=`/api-client/v1/oauth/github-oauth?state=${this.personalInfo.user.uid}`},deletaAuth(){this.$store.dispatch("common/DELETE_OAUTN",{identity_type:"github"}).then(t=>{this.$store.dispatch("PERSONAL_INFO")})}},computed:{...Object(a.b)(["personalInfo"])}},n=(s("ysmF"),s("Yj/X")),o=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:" setting-view client-card"},[s("div",{staticClass:"sub-view-box setting-password-view"},[s("h1",[t._v("第三方登录绑定")]),t._v(" "),s("ul",{staticClass:"setting-list"},[s("li",[s("div",{staticClass:"type"},[t._v("github")]),t._v(" "),s("div",{staticClass:"info"},[~t.personalInfo.bindType.indexOf("github")?s("span",{staticClass:"bind"},[t._v("已绑定 "),s("span",{staticClass:"del-bind",on:{click:t.deletaAuth}},[t._v("解绑")])]):s("a",{staticClass:"no-bind",attrs:{href:t.githubBindUrl}},[t._v("未绑定，点击绑定")])])])])])])}),[],!1,null,"4dd6aa92",null);e.default=o.exports},hStU:function(t,e,s){"use strict";var a=s("5d92");s.n(a).a},hdQY:function(t,e,s){"use strict";s.r(e);var a=s("R3xZ"),i=s("/W3c"),n=s("4AYe"),o=s("iHbI"),r=s("Kvkj"),l=s("7Qib"),c={name:"dynamic",mixins:[s("m0go").a],metaInfo(){return{title:`片刻-${this.website.meta.website_name}`,htmlAttrs:{lang:"zh"},script:[...l.a.resource({route:this.$route,config:this.website.config}),...l.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},data:()=>({page:2,isLoading:!1,isMore:!0,loginUserInfo:{}}),async asyncData({store:t,route:e,accessToken:s=""}){const a="following"!==e.params.dynamicTopicId?"dynamic/GET_DYNAMIC_LIST":"dynamic/GET_DYNAMIC_LIST_ME",i=~["newest","hot"].indexOf(e.params.dynamicTopicId);return Promise.all([t.commit("dynamic/INIT_DYNAMIC_LIST"),t.dispatch(a,{topic_id:i?"":e.params.dynamicTopicId,sort:i?e.params.dynamicTopicId:"",accessToken:s,isCommit:!0})])},created(){this.$store.dispatch("dynamic/GET_DYNAMIC_TOPIC_INDEX")},methods:{dynamicSubmit(){"following"!==this.$route.params.dynamicTopicId?this.$router.push({name:"dynamics",params:{dynamicTopicId:"following"}}):window.location.reload()},infiniteHandler(){this.isLoading=!0;const t="following"!==this.$route.params.dynamicTopicId?"dynamic/GET_DYNAMIC_LIST":"dynamic/GET_DYNAMIC_LIST_ME",e=~["newest","hot"].indexOf(this.$route.params.dynamicTopicId);this.$store.dispatch(t,{topic_id:e?"":this.$route.params.dynamicTopicId,sort:e?this.$route.params.dynamicTopicId:"",page:this.page,isCommit:!0}).then(t=>{this.isLoading=!1,10===t.data.list.length?this.page+=1:this.isMore=!1}).catch(t=>{this.isMore=!1})}},computed:{...Object(o.b)(["home","dynamic","website","personalInfo"])},components:{ScrollLoading:r.h,dynamicItem:a.a,dynamicWrite:i.a,dynamicAside:n.a}},m=(s("taYa"),s("Yj/X")),d=Object(m.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"dynamic"}},[s("div",{staticClass:"container dynamic-container"},[s("div",{staticClass:"aside"},[s("nav",{staticClass:"dock-nav",attrs:{role:"navigation"}},[s("ul",{staticClass:"nav-list"},[s("li",{staticClass:"nav-item acitve"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"dynamics",params:{dynamicTopicId:"newest"}}}},[t._v("推荐")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"dynamics",params:{dynamicTopicId:"hot"}}}},[t._v("热门")])],1),t._v(" "),t.personalInfo.islogin?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"dynamics",params:{dynamicTopicId:"following"}}}},[t._v("我的")])],1):t._e()]),t._v(" "),s("ul",{staticClass:"nav-list"},[t._l(t.dynamic.dynamicTopicIndex,(function(e,a){return s("li",{key:a,staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"dynamics",params:{dynamicTopicId:e.topic_id}}}},[t._v(t._s(e.name))])],1)})),t._v(" "),s("li",{staticClass:"nav-item more"},[s("router-link",{staticClass:"more-view",attrs:{to:{name:"dynamicTopic"}}},[s("span",[t._v("更多")])])],1)],2)])]),t._v(" "),s("div",{staticClass:"row dynamic-main"},[s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8"},[s("div",{staticClass:"stream-wrapper client-card"},[s("dynamic-write",{on:{changeDynamicWrite:t.dynamicSubmit}})],1),t._v(" "),s("scroll-loading",{attrs:{isLoading:t.isLoading,isMore:t.isMore},on:{"scroll-loading":t.infiniteHandler}},t._l(t.dynamic.dynamicList.list,(function(t,e){return s("div",{key:e,staticClass:"dy-item client-card"},[s("dynamic-item",{attrs:{dynamicItem:t}})],1)})),0)],1),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4"},[s("dynamic-aside")],1)])])])}),[],!1,null,"11032349",null);e.default=d.exports},iT2u:function(t,e,s){"use strict";var a=s("OQAD");s.n(a).a},iVH8:function(t,e,s){"use strict";s.r(e);var a=s("qu4x"),i=s("vuaj"),n=s.n(i),o=s("MrL/"),r=s.n(o),l=(s("7Qib"),s("YP4+")),c=s("IodM");var m={namespaced:!0,state:()=>({}),mutations:{},actions:{GET_USER_BLOG:({commit:t,dispatch:e,state:s},{uid:a})=>Object(c.a)({url:"/user/blog-all",method:"get",parameter:{params:{uid:a}}}),CREATE_ARTICLE_BLOG:({commit:t,dispatch:e,state:s},a)=>Object(c.a)({url:"/personal/create-article-blog",method:"post",parameter:{...a}}),UPLOAD_ARTICLE_PICTURE:({commit:t,dispatch:e,state:s},a)=>Object(c.a)({url:"/article/upload-article-picture",method:"post",parameter:a}),SAVE_ARTICLE:({commit:t,dispatch:e,state:s},a)=>Object(c.a)({url:"/article/create",method:"post",parameter:a}),GET_USER_ARTICLE:({commit:t,dispatch:e,state:s},a)=>Object(c.a)({url:"/user-article",method:"get",parameter:{params:a}}),UPDATE_ARTICLE:({commit:t,dispatch:e,state:s},a)=>Object(c.a)({url:"/article/update",method:"put",parameter:a})}},d={name:"write",metaInfo:()=>({title:"文章编辑",htmlAttrs:{lang:"zh"}}),asyncData:async({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("PERSONAL_INFO",{accessToken:s}),t.dispatch("articleTag/GET_ARTICLE_TAG_ALL")]),data:()=>({write:{title:"",source:"1",content:"",blog_ids:"",type:"1",is_public:1,is_attachment:2,is_free:1,pay_type:1,price:0,attachment:""},publicTypeList:["仅自己可见","公开"],payTypeText:l.j,isFree:l.e,isFreeText:l.f,isOpen:l.g,isOpenInfo:l.h,articleTypeText:l.b,blog:{name:""},userArticleBlogAll:[],sourceList:[{id:"1",text:"原创"},{id:"2",text:"转载"}],isCreateBlogShow:!1,searchArticleTag:"",currentArticleTagArr:[],isSearchResultShow:!1,searchShowArticleTagAll:[],searchBoxWidth:"100%",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,superscript:!0,quote:!0,ol:!0,link:!0,imagelink:!0,help:!0,code:!0,subfield:!0,fullscreen:!0,undo:!0,trash:!0,save:!1}}),mounted(){this.$store.registerModule("editor",m),this.initArticleTagAll(),this.getUserArticleBlogAll(),"create"!==this.$route.params.type&&this.isEditArticle()},watch:{searchArticleTag(t){let e=[];for(let t in this.articleTagAll)this.articleTagAll[t].name.toLowerCase().indexOf(this.searchArticleTag.toLowerCase())>=0&&e.push(this.articleTagAll[t]);this.searchShowArticleTagAll=e,0===this.searchArticleTag.length?this.isSearchResultShow=!1:this.isSearchResultShow=!0}},methods:{isEditArticle(){"create"!==this.$route.params.type&&this.$store.dispatch("editor/GET_USER_ARTICLE",{aid:this.$route.params.type}).then(t=>{const e=t.data.article,s=t.data.articleAnnex;this.write={...e,...s},this.write.is_public=Number(e.is_public),this.write.content=e.origin_content,this.write.title=e.title,this.articleTagAll.map(t=>{~e.tag_ids.split(",").indexOf(String(t.tag_id))&&this.currentArticleTagArr.push(t)}),t.data.articleAnnex&&(this.write.is_attachment=e.is_attachment,this.write.attachment=s.origin_attachment),this.renderCurrentArticleTag()})},isFloor(){var t=event.target,e=t.value.charAt(0);t.value=t.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/[^\d.]/g,"").replace(/^\./g,"").replace(/([0-9]+\.[0-9]{2})[0-9]*/,"$1"),"-"==e&&(t.value="-"+t.value)},initArticleTagAll(){this.searchShowArticleTagAll=this.articleTagAll},getUserArticleBlogAll(){if(!this.$store.state.personalInfo.islogin)return this.$message.warning("当前用户未登陆，请前往首页登陆后尝试"),this.$router.push({name:"home"}),!1;this.$store.dispatch("editor/GET_USER_BLOG",{uid:this.$store.state.personalInfo.user.uid}).then(t=>{this.userArticleBlogAll=t.data.list})},addArticleTag(t){this.search_article_tag="";let e=[];for(var s in this.currentArticleTagArr)e.push(this.currentArticleTagArr[s].name);this.currentArticleTagArr.length<3&&-1===e.indexOf(t.name)&&this.currentArticleTagArr.push(t),this.renderCurrentArticleTag()},deleteCurrentArticleTag(t){for(var e in this.currentArticleTagArr)t.name===this.currentArticleTagArr[e].name&&this.currentArticleTagArr.splice(e,1);this.renderCurrentArticleTag()},renderCurrentArticleTag(){this.$nextTick(()=>{this.searchBoxWidth=this.$refs.search_box.offsetWidth-this.$refs.js_chosen_tags.offsetWidth-15+"px"})},getObjectValues(t){var e=[];for(var s in t)e.push(t[s].tag_id);return e},saveCreateBlog(){this.$store.dispatch("editor/CREATE_ARTICLE_BLOG",{blog_name:this.blog.name}).then(t=>{"success"===t.state?(this.$message.success("创建文章专题成功"),this.blog.name="",this.getUserArticleBlogAll(),this.isCreateBlogShow=!1):this.$message.warning(t.message)})},imageFilter(t){return!(t.size>1048576)||(this.$message.success("上传文章图片应该小于1M"),!1)},$imgAdd(t,e){var s=new FormData;s.append("file",e),this.$store.dispatch("editor/UPLOAD_ARTICLE_PICTURE",s).then(e=>{if("success"!==e.state)return this.$message.warning(e.message),!1;this.$message.success("上传文章图片成功"),this.$refs.mavonEditor.$img2Url(t,e.data.img)})},saveArticle(){const{is_attachment:t,is_free:e,pay_type:s,price:a,attachment:i}=this.write;let n={title:this.write.title,content:r()(this.write.content,{breaks:!0}),origin_content:this.write.content,source:this.write.source,type:this.write.type,is_public:this.write.is_public,blog_ids:this.write.blog_ids,tag_ids:this.getObjectValues(this.currentArticleTagArr).join(","),is_attachment:t,is_free:e,pay_type:s,price:Number(a),attachment:i?r()(i,{breaks:!0}):"",origin_attachment:i};"create"!==this.$route.params.type&&(n.aid=this.$route.params.type);let o="create"===this.$route.params.type?"editor/SAVE_ARTICLE":"editor/UPDATE_ARTICLE";this.$store.dispatch(o,n).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$router.push({name:"user",params:{uid:this.personalInfo.user.uid,routeType:"article"}})):this.$message.warning(t.message)}).catch((function(t){this.$message.error("出现错误："+t)}))}},components:{"mavon-editor":a.mavonEditor,ClientOnly:n.a},computed:{articleTagAll(){return this.$store.state.articleTag.article_tag_all},personalInfo(){return this.$store.state.personalInfo}},destroyed(){this.$store.unregisterModule("editor")}},u=(s("vPvB"),s("Yj/X")),_=Object(u.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("client-only",[s("section",{staticClass:"write-lay layout-content"},[s("div",{staticClass:"container client-card"},[s("div",{staticClass:"write-top  box-form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.write.title,expression:"write.title"}],staticClass:"box-input title",attrs:{type:"text",placeholder:"请输入文章标题"},domProps:{value:t.write.title},on:{input:function(e){e.target.composing||t.$set(t.write,"title",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"write mrg-bm20"},[s("mavon-editor",{ref:"mavonEditor",attrs:{defaultOpen:"edit",boxShadow:!1,toolbars:t.toolbars,imageFilter:t.imageFilter},on:{imgAdd:t.$imgAdd},model:{value:t.write.content,callback:function(e){t.$set(t.write,"content",e)},expression:"write.content"}})],1),t._v(" "),s("div",{staticClass:"row mrg-bm20"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("来源")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.source,expression:"write.source"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"source",e.target.multiple?s:s[0])}}},t._l(t.sourceList,(function(e,a){return s("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.text))])})),0)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("是否公开")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.is_public,expression:"write.is_public"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"is_public",e.target.multiple?s:s[0])}}},t._l(t.publicTypeList,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])})),0)])]),t._v(" "),s("div",{staticClass:"row mrg-bm20"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("个人专栏（非必选）")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.blog_ids,expression:"write.blog_ids"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"blog_ids",e.target.multiple?s:s[0])}}},t._l(t.userArticleBlogAll,(function(e,a){return s("option",{key:a,domProps:{value:e.blog_id}},[t._v(t._s(e.name))])})),0),t._v(" "),s("div",{staticClass:"create-blog"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isCreateBlogShow,expression:"isCreateBlogShow"}],staticClass:"create-blog-view"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.name,expression:"blog.name"}],staticClass:"create-blog-input box-input",attrs:{placeholder:"请输入专栏名字",type:"text"},domProps:{value:t.blog.name},on:{input:function(e){e.target.composing||t.$set(t.blog,"name",e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.saveCreateBlog}},[t._v("\n                保存\n              ")]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){t.isCreateBlogShow=!1}}},[t._v("\n                取消\n              ")])]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:!t.isCreateBlogShow,expression:"!isCreateBlogShow"}],staticClass:"btn btn-primary btn-sm",on:{click:function(e){t.isCreateBlogShow=!0}}},[t._v("\n              创建新个人专栏\n            ")])])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("文章类型")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.type,expression:"write.type"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"type",e.target.multiple?s:s[0])}}},t._l(t.articleTypeText,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])})),0)])]),t._v(" "),s("div",{staticClass:"tag-warp mrg-bm20"},[s("p",{staticClass:"common-title"},[t._v("\n          文章标签\n          "),s("span",[s("em",{attrs:{id:"chosen_tag_num"}},[t._v(t._s(t.currentArticleTagArr.length))]),t._v("/3\n          ")])]),t._v(" "),s("div",{ref:"search_box",staticClass:"search-box clearfix"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentArticleTagArr.length>0,expression:"currentArticleTagArr.length > 0"}],ref:"js_chosen_tags",staticClass:"clearfix js-chosen-tags"},t._l(t.currentArticleTagArr,(function(e,a){return s("span",{key:a,staticClass:"tag-item",on:{click:function(s){return t.deleteCurrentArticleTag(e)}}},[t._v(t._s(e.name))])})),0),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:t.currentArticleTagArr.length<3,expression:"currentArticleTagArr.length < 3"},{name:"model",rawName:"v-model",value:t.searchArticleTag,expression:"searchArticleTag"}],staticClass:"search-input",style:{width:t.searchBoxWidth},attrs:{placeholder:"选择下列热门标签或输入关键词检索标签"},domProps:{value:t.searchArticleTag},on:{input:function(e){e.target.composing||(t.searchArticleTag=e.target.value)}}})]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isSearchResultShow,expression:"isSearchResultShow"}],staticClass:"search-result js-search-result"},[t._v("\n          相关“\n          "),s("span",{staticClass:"js-search-text"},[t._v(t._s(t.searchArticleTag))]),t._v("”的搜索\n          "),s("span",{staticClass:"js-search-num"},[t._v(t._s(t.searchShowArticleTagAll.length))]),t._v("\n          个\n        ")]),t._v(" "),s("div",{staticClass:"tag-list-view js-tag-nano has-scrollbar"},[s("div",{staticClass:"clearfix js-tag-list"},t._l(t.searchShowArticleTagAll,(function(e,a){return s("span",{key:a,staticClass:"tag-item",on:{click:function(s){return t.addArticleTag(e)}}},[t._v(t._s(e.name))])})),0)])]),t._v(" "),s("div",{staticClass:"row mrg-bm20"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("是否添加附件")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.is_attachment,expression:"write.is_attachment"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"is_attachment",e.target.multiple?s:s[0])}}},t._l(t.isOpen,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(t.isOpenInfo[e]))])})),0)]),t._v(" "),Number(t.write.is_attachment)===t.isOpen.yes?s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("开启付费")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.is_free,expression:"write.is_free"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"is_free",e.target.multiple?s:s[0])}}},t._l(t.isFree,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(t.isFreeText[e]))])})),0)]):t._e()]),t._v(" "),Number(t.write.is_free||1)!==t.isFree.free&&Number(t.write.is_attachment)===t.isOpen.yes?s("div",{staticClass:"row mrg-bm20"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("支付类型")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.pay_type,expression:"write.pay_type"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"pay_type",e.target.multiple?s:s[0])}}},t._l(t.payTypeText,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])})),0)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("价格 ￥("+t._s(t.payTypeText[t.write.pay_type])+")")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.write.price,expression:"write.price"}],staticClass:"box-input",attrs:{type:"text"},domProps:{value:t.write.price},on:{keyup:t.isFloor,input:function(e){e.target.composing||t.$set(t.write,"price",e.target.value)}}})])]):t._e(),t._v(" "),Number(t.write.is_attachment)===t.isOpen.yes?s("div",{staticClass:"row mrg-bm20"},[s("div",{staticClass:"col-xs-12 col-sm-12 col-md-12"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("附件内容(支持markdown)")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.write.attachment,expression:"write.attachment"}],staticClass:"box-textarea",attrs:{cols:"30",rows:"10"},domProps:{value:t.write.attachment},on:{input:function(e){e.target.composing||t.$set(t.write,"attachment",e.target.value)}}})])]):t._e(),t._v(" "),s("div",{staticClass:"write-footer clearfix"},[s("button",{staticClass:"send-article",on:{click:t.saveArticle}},[t._v("发布文章")])])])])])}),[],!1,null,"93a98140",null);e.default=_.exports},is6g:function(t,e,s){"use strict";var a={data(){return{temp_value:(()=>this.value)(),s_autofocus:(()=>{if(this.autofocus)return"autofocus"})()}},created(){},props:{fullHeight:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},value:{type:String,default:""},placeholder:{type:String,default:""},border:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},onchange:{type:Function,default:null},fontSize:{type:String,default:"14px"},lineHeight:{type:String,default:"18px"}},methods:{change(t){this.onchange&&this.onchange(this.temp_value,t)}},watch:{value:function(t,e){this.temp_value=t},temp_value:function(t,e){this.$emit("input",t)}}},i=(s("6Pmt"),s("Yj/X")),n=Object(i.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"auto-textarea-wrapper",style:{fontSize:t.fontSize,lineHeight:t.lineHeight,height:t.fullHeight?"100%":"auto"}},[s("pre",{staticClass:"auto-textarea-block",style:{fontSize:t.fontSize,lineHeight:t.lineHeight,minHeight:t.fullHeight?"100%":"auto"}},[s("br"),t._v(t._s(t.temp_value)+" ")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.temp_value,expression:"temp_value"}],ref:"vTextarea",staticClass:"auto-textarea-input",class:{"no-border":!t.border,"no-resize":!t.resize},style:{fontSize:t.fontSize,lineHeight:t.lineHeight},attrs:{autofocus:t.s_autofocus,spellcheck:"false",placeholder:t.placeholder},domProps:{value:t.temp_value},on:{keyup:t.change,input:function(e){e.target.composing||(t.temp_value=e.target.value)}}})])}),[],!1,null,null,null);e.a=n.exports},itk0:function(t,e,s){},jHC5:function(t,e,s){"use strict";s.r(e);var a=s("Kvkj"),i=s("qu4x"),n=s("7Qib"),o=s("vuaj"),r=s.n(o),l=s("MrL/"),c=s.n(l),m=s("iHbI"),d=s("m0go"),u=s("YP4+"),_={name:"write",minixs:[d.a],metaInfo(){return{title:"小书编辑",htmlAttrs:{lang:"zh"},script:[...n.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},asyncData:async({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("PERSONAL_INFO",{accessToken:s}),t.dispatch("articleTag/GET_ARTICLE_TAG_ALL")]),data:()=>({write:{cover_img:"",title:"",description:"",content:"",is_public:1,is_free:1,pay_type:1,price:0},payTypeText:u.j,isFree:u.e,isFreeText:u.f,publicTypeList:["仅自己可见","公开"],searchArticleTag:"",currentArticleTagArr:[],isSearchResultShow:!1,searchShowArticleTagAll:[],searchBoxWidth:"100%",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,superscript:!0,quote:!0,ol:!0,link:!0,imagelink:!0,help:!0,code:!0,subfield:!0,fullscreen:!0,undo:!0,trash:!0,save:!1},editInfo:{}}),created(){this.initArticleTagAll(),"create"!==this.$route.params.type&&this.isEdit()},watch:{searchArticleTag(t){let e=[];for(let t in this.articleTagAll)this.articleTagAll[t].name.toLowerCase().indexOf(this.searchArticleTag.toLowerCase())>=0&&e.push(this.articleTagAll[t]);this.searchShowArticleTagAll=e,0===this.searchArticleTag.length?this.isSearchResultShow=!1:this.isSearchResultShow=!0}},methods:{isEdit(){"create"!==this.$route.params.type&&this.$store.dispatch("books/GET_USER_BOOKS_INFO",{books_id:this.$route.query.books_id}).then(t=>{this.write=t.data.books,this.write.is_public=Number(t.data.books.is_public),this.write.content=t.data.books.origin_content,this.editInfo=t.data.books,this.articleTagAll.map(t=>{~this.editInfo.tag_ids.split(",").indexOf(String(t.tag_id))&&this.currentArticleTagArr.push(t)}),this.renderCurrentArticleTag()})},isFloor(){var t=event.target,e=t.value.charAt(0);t.value=t.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/[^\d.]/g,"").replace(/^\./g,"").replace(/([0-9]+\.[0-9]{2})[0-9]*/,"$1"),"-"==e&&(t.value="-"+t.value)},changeUploadCoverImg({formData:t,config:e}){this.$store.dispatch("books/UPLOAD_BOOKS_COVER_IMG",t).then(t=>{"success"===t.state?(this.write.cover_img=t.data.img,this.$message.success("上传封面成功")):this.$message.warning(t.message)})},initArticleTagAll(){this.searchShowArticleTagAll=this.articleTagAll},addArticleTag(t){this.search_article_tag="";let e=[];for(var s in this.currentArticleTagArr)e.push(this.currentArticleTagArr[s].name);this.currentArticleTagArr.length<3&&-1===e.indexOf(t.name)&&this.currentArticleTagArr.push(t),this.renderCurrentArticleTag()},deleteCurrentArticleTag(t){for(var e in this.currentArticleTagArr)t.name===this.currentArticleTagArr[e].name&&this.currentArticleTagArr.splice(e,1);this.renderCurrentArticleTag()},renderCurrentArticleTag(){this.$nextTick(()=>{this.searchBoxWidth=this.$refs.search_box.offsetWidth-this.$refs.js_chosen_tags.offsetWidth-15+"px"})},getObjectValues(t){var e=[];for(var s in t)e.push(t[s].tag_id);return e},imageFilter(t){return!(t.size>1048576)||(this.$message.success("上传小书图片应该小于1M"),!1)},$imgAdd(t,e){var s=new FormData;s.append("file",e),this.$store.dispatch("books/UPLOAD_BOOKS_COVER_IMG",s).then(e=>{if("success"!==e.state)return this.$message.warning(e.message),!1;this.$message.success("上传小书图片成功"),this.$refs.mavonEditor.$img2Url(t,e.data.img)})},saveArticle(){if(!this.write.title)return this.$message.warning("小书标题不能为空！"),!1;if(!this.write.content)return this.$message.warning("小书内容不能为空！"),!1;if(Number(this.write.is_free||1)!==this.isFree.free&&this.write.price<1)return this.$message.warning("小书价格请大于0！"),!1;var t={title:this.write.title,description:this.write.description,cover_img:this.write.cover_img,content:c()(this.write.content,{breaks:!0}),origin_content:this.write.content,is_public:this.write.is_public,is_free:this.write.is_free,pay_type:this.write.pay_type,price:this.write.price,tag_ids:this.getObjectValues(this.currentArticleTagArr).join(",")};"create"!==this.$route.params.type&&(t.books_id=this.$route.query.books_id);let e="create"===this.$route.params.type?"books/CREATE_BOOKS":"books/UPDATE_BOOKS";this.$store.dispatch(e,t).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$router.push({name:"user",params:{uid:this.personalInfo.user.uid,routeType:"books"}})):this.$message.warning(t.message)}).catch((function(t){this.$message.error("出现错误："+t)}))}},components:{"mavon-editor":i.mavonEditor,UploadImage:a.i,ClientOnly:r.a},computed:{articleTagAll(){return this.$store.state.articleTag.article_tag_all},...Object(m.b)(["website","personalInfo"])}},p=(s("W44R"),s("Yj/X")),v=Object(p.a)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("client-only",[s("section",{staticClass:"books-write-lay layout-content"},[s("div",{staticClass:"container client-card-shadow"},[s("div",{staticClass:"row mrg-bm20 books-write-content "},[s("div",{staticClass:"col-xs-12 col-sm-4 col-md-3 box-form-group"},[s("div",{staticClass:"cover-img"},[t.write.cover_img?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.write.cover_img,expression:"write.cover_img"}],staticClass:"cover-img-view",attrs:{alt:""}}):s("div",{staticClass:"cover-img-view cover-img-null"},[s("p",[t._v("封面图片为空，如果未上传，将采用默认图片")])]),t._v(" "),s("upload-image",{staticClass:"upload-cover-image",on:{changeUpload:t.changeUploadCoverImg}},[t._v("上传封面")])],1)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-8 col-md-9 book-info"},[s("div",{staticClass:"box-form-group books-name-view"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("书名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.write.title,expression:"write.title"}],staticClass:"box-input title",attrs:{type:"text",placeholder:"请输入小书标题"},domProps:{value:t.write.title},on:{input:function(e){e.target.composing||t.$set(t.write,"title",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("简介")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.write.description,expression:"write.description"}],staticClass:"box-input title",attrs:{type:"text",placeholder:"请输入小书标题"},domProps:{value:t.write.description},on:{input:function(e){e.target.composing||t.$set(t.write,"description",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"write mrg-bm20 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("详情")]),t._v(" "),s("mavon-editor",{ref:"mavonEditor",attrs:{defaultOpen:"edit",boxShadow:!1,toolbars:t.toolbars,imageFilter:t.imageFilter},on:{imgAdd:t.$imgAdd},model:{value:t.write.content,callback:function(e){t.$set(t.write,"content",e)},expression:"write.content"}})],1),t._v(" "),s("div",{staticClass:"row mrg-bm20"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("是否公开")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.is_public,expression:"write.is_public"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"is_public",e.target.multiple?s:s[0])}}},t._l(t.publicTypeList,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])})),0)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("开启付费")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.is_free,expression:"write.is_free"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"is_free",e.target.multiple?s:s[0])}}},t._l(t.isFreeText,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])})),0)])]),t._v(" "),Number(t.write.is_free||1)!==t.isFree.free?s("div",{staticClass:"row mrg-bm20"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("支付类型")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.write.pay_type,expression:"write.pay_type"}],staticClass:"box-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.write,"pay_type",e.target.multiple?s:s[0])}}},t._l(t.payTypeText,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])})),0)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-6 col-md-6 box-form-group"},[s("label",{staticClass:"box-label",attrs:{for:""}},[t._v("价格 ￥("+t._s(t.payTypeText[t.write.pay_type])+")")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.write.price,expression:"write.price"}],staticClass:"box-input",attrs:{type:"text"},domProps:{value:t.write.price},on:{keyup:t.isFloor,input:function(e){e.target.composing||t.$set(t.write,"price",e.target.value)}}})])]):t._e(),t._v(" "),s("div",{staticClass:"tag-warp"},[s("p",{staticClass:"common-title"},[t._v("\n              小书标签\n              "),s("span",[s("em",{attrs:{id:"chosen_tag_num"}},[t._v(t._s(t.currentArticleTagArr.length))]),t._v("/3\n              ")])]),t._v(" "),s("div",{ref:"search_box",staticClass:"search-box clearfix"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentArticleTagArr.length>0,expression:"currentArticleTagArr.length>0"}],ref:"js_chosen_tags",staticClass:"clearfix js-chosen-tags"},t._l(t.currentArticleTagArr,(function(e,a){return s("span",{key:a,staticClass:"tag-item",on:{click:function(s){return t.deleteCurrentArticleTag(e)}}},[t._v(t._s(e.name))])})),0),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:t.currentArticleTagArr.length<3,expression:"currentArticleTagArr.length<3"},{name:"model",rawName:"v-model",value:t.searchArticleTag,expression:"searchArticleTag"}],staticClass:"search-input",style:{width:t.searchBoxWidth},attrs:{placeholder:"选择下列热门标签或输入关键词检索标签"},domProps:{value:t.searchArticleTag},on:{input:function(e){e.target.composing||(t.searchArticleTag=e.target.value)}}})]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isSearchResultShow,expression:"isSearchResultShow"}],staticClass:"search-result js-search-result"},[t._v("\n              相关“\n              "),s("span",{staticClass:"js-search-text"},[t._v(t._s(t.searchArticleTag))]),t._v("”的搜索\n              "),s("span",{staticClass:"js-search-num"},[t._v(t._s(t.searchShowArticleTagAll.length))]),t._v(" 个\n            ")]),t._v(" "),s("div",{staticClass:"tag-list-view js-tag-nano has-scrollbar"},[s("div",{staticClass:"clearfix js-tag-list"},t._l(t.searchShowArticleTagAll,(function(e,a){return s("span",{key:a,staticClass:"tag-item",on:{click:function(s){return t.addArticleTag(e)}}},[t._v(t._s(e.name))])})),0)])]),t._v(" "),s("div",{staticClass:"write-footer clearfix"},[s("button",{staticClass:"send-article",on:{click:t.saveArticle}},[t._v("发布小书")])])])])])])])}),[],!1,null,"5f49b45f",null);e.default=v.exports},jMCe:function(t,e,s){},jzrc:function(t,e,s){"use strict";var a=s("P0Qu");s.n(a).a},kYSE:function(t,e,s){},knsx:function(t,e,s){"use strict";var a=s("jMCe");s.n(a).a},lAnF:function(t,e,s){"use strict";var a=s("qfLB");s.n(a).a},lTgj:function(t,e,s){},lZpC:function(t,e,s){},mFTf:function(module,__webpack_exports__,__webpack_require__){"use strict";var _components_md_toolbar_left__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("nqCT"),_components_md_toolbar_right__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Alhn"),_libs_toobar_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("LFX6"),_libs_core_extra_function_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a9wT"),_components_auto_textarea__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("is6g"),_libs_lang__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("PKEJ"),_libs_config_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("IW2X"),_libs_css_fontello_css__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("xIR0"),_libs_css_fontello_css__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_libs_css_fontello_css__WEBPACK_IMPORTED_MODULE_7__),marked__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("MrL/"),marked__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(marked__WEBPACK_IMPORTED_MODULE_8__),_libs_mixins_markdown_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("sFCI");__webpack_exports__.a={name:"MarkDown",mixins:[_libs_mixins_markdown_js__WEBPACK_IMPORTED_MODULE_9__.a],props:{value:{type:String,default:""},scrollStyle:{type:Boolean,default:!0},boxShadow:{type:Boolean,default:!0},boxShadowStyle:{type:String,default:"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},toolbarsFlag:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},placeholder:{type:String,default:null},navigation:{type:Boolean,default:!1},fontSize:{type:String,default:"15px"},toolbars:{type:Object,default:()=>_libs_config_js__WEBPACK_IMPORTED_MODULE_6__.a.toolbars},previewBackground:{type:String,default:"#fbfbfb"},toolbarsBackground:{type:String,default:"#ffffff"},editorBackground:{type:String,default:"#ffffff"},editable:{type:Boolean,default:!0},subfield:{type:Boolean,default:!0},imageFilter:{type:Function,default:null}},data(){return{newValue:"",s_fullScreen:!1,s_subfield:(()=>this.subfield)(),s_navigation:(()=>this.navigation)(),s_scrollStyle:(()=>this.scrollStyle)(),s_readmodel:!1,d_history:(()=>{let t=[];return t.push(this.value),t})(),d_history_index:0,d_render:"",s_preview_switch:(()=>{let t=this.defaultOpen;return t||(t=this.subfield?"preview":"edit"),"preview"===t})(),s_html_code:!1,d_value:"",d_words:null}},mounted(){this.d_value=this.value},watch:{d_value:function(t,e){this.iRender()},value:function(t,e){t!==this.d_value&&(this.d_value=t)}},created(){this.init()},methods:{init(){var t=this;this.d_words=_libs_lang__WEBPACK_IMPORTED_MODULE_5__.a,t.$render("",(function(e){t.d_help=e}))},getTextareaDom(){return this.$refs.vNoteTextarea.$refs.vTextarea},insertUl(){Object(_libs_core_extra_function_js__WEBPACK_IMPORTED_MODULE_3__.d)(this)},insertOl(){Object(_libs_core_extra_function_js__WEBPACK_IMPORTED_MODULE_3__.b)(this)},$imgTouch(t){},iRender(){var t=this;t.$render(t.d_value,(function(e){t.d_render=e,t.change&&t.change(t.d_value,t.d_render),t.s_navigation&&Object(_libs_core_extra_function_js__WEBPACK_IMPORTED_MODULE_3__.a)(t,!1),t.$emit("input",t.d_value),t.d_value!==t.d_history[t.d_history_index]&&(window.clearTimeout(t.currentTimeout),t.currentTimeout=setTimeout(()=>{t.saveHistory()},500))}))},saveHistory(){this.d_history.splice(this.d_history_index+1,this.d_history.length),this.d_history.push(this.d_value),this.d_history_index=this.d_history.length-1},$imgDel(t){let e=t[0],s=new RegExp(`\\!\\[${t[1]._name}\\]\\(${e}\\)`,"g");this.d_value=this.d_value.replace(s,""),this.iRender(),this.$emit("imgDel",t)},$imgAdd(t,e,s){void 0===s&&(s=!0);var a=this;if(null==this.__rFilter&&(this.__rFilter=/^image\//i),this.__oFReader=new FileReader,this.__oFReader.onload=function(i){e.miniurl=i.target.result,!0===s&&(e._name=e.name.replace(/[\[\]\(\)\+\{\}&\|\\\*^%$#@\-]/g,""),a.insertText(a.getTextareaDom(),{prefix:"!["+e._name+"]("+t+")",subfix:"",str:""}),a.$nextTick((function(){a.$emit("imgAdd",t,e)})))},e){var i=e;this.__rFilter.test(i.type)&&this.__oFReader.readAsDataURL(i)}},$img2Url(fileIndex,url){var reg_str="/(!\\[[^\\[]*?\\](?=\\())\\(\\s*("+fileIndex+")\\s*\\)/g",reg=eval(reg_str);this.d_value=this.d_value.replace(reg,"$1("+url+")"),this.$refs.toolbar_left.$changeUrl(fileIndex,url),this.iRender()},defaultOpen(t){let e=t;return e||(e=this.subfield?"preview":"edit"),this.s_preview_switch="preview"===e},$v_edit_scroll(t){Object(_libs_core_extra_function_js__WEBPACK_IMPORTED_MODULE_3__.f)(t,this)},textAreaFocus(){this.$refs.vNoteTextarea.$refs.vTextarea.focus()},insertText(t,{prefix:e,subfix:s,str:a,type:i}){Object(_libs_core_extra_function_js__WEBPACK_IMPORTED_MODULE_3__.c)(t,{prefix:e,subfix:s,str:a,type:i},this)},toolbar_left_addlink(t,e,s){Object(_libs_toobar_js__WEBPACK_IMPORTED_MODULE_2__.a)(t,e,s,this)},toolbar_left_click(t){Object(_libs_toobar_js__WEBPACK_IMPORTED_MODULE_2__.b)(t,this)},toolbar_right_click(t){Object(_libs_toobar_js__WEBPACK_IMPORTED_MODULE_2__.c)(t,this)}},components:{mdToolbarleft:_components_md_toolbar_left__WEBPACK_IMPORTED_MODULE_0__.default,mdToolbarRight:_components_md_toolbar_right__WEBPACK_IMPORTED_MODULE_1__.default,autoTextara:_components_auto_textarea__WEBPACK_IMPORTED_MODULE_4__.a}}},n1l2:function(t,e,s){"use strict";var a=s("lZpC");s.n(a).a},nOK7:function(t,e,s){},nai1:function(t,e,s){"use strict";s.r(e);var a=s("mFTf").a,i=(s("LhYu"),s("Yj/X")),n=Object(i.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"v-note-wrapper markdown-body",class:[{fullscreen:t.s_fullScreen,shadow:t.boxShadow}],style:{"box-shadow":t.boxShadow?t.boxShadowStyle:""}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.toolbarsFlag,expression:"toolbarsFlag"}],staticClass:"v-note-op",style:{background:t.toolbarsBackground}},[s("mdToolbarleft",{ref:"toolbar_left",class:{transition:t.transition},attrs:{editable:t.editable,transition:t.transition,d_words:t.d_words,toolbars:t.toolbars,image_filter:t.imageFilter},on:{toolbar_left_click:t.toolbar_left_click,toolbar_left_addlink:t.toolbar_left_addlink,imgAdd:t.$imgAdd,imgDel:t.$imgDel,imgTouch:t.$imgTouch}},[t._t("left-toolbar-before",null,{slot:"left-toolbar-before"}),t._v(" "),t._t("left-toolbar-after",null,{slot:"left-toolbar-after"})],2),t._v(" "),s("mdToolbarRight",{ref:"toolbar_right",class:{transition:t.transition},attrs:{d_words:t.d_words,toolbars:t.toolbars,s_subfield:t.s_subfield,s_preview_switch:t.s_preview_switch,s_fullScreen:t.s_fullScreen,s_html_code:t.s_html_code,s_navigation:t.s_navigation},on:{toolbar_right_click:t.toolbar_right_click}},[t._t("right-toolbar-before",null,{slot:"right-toolbar-before"}),t._v(" "),t._t("right-toolbar-after",null,{slot:"right-toolbar-after"})],2)],1),t._v(" "),s("div",{staticClass:"v-note-panel"},[s("div",{ref:"vNoteEdit",staticClass:"v-note-edit divarea-wrapper",class:{"scroll-style":t.s_scrollStyle,"scroll-style-border-radius":t.s_scrollStyle&&!t.s_preview_switch&&!t.s_html_code,"single-edit":!t.s_preview_switch&&!t.s_html_code,"single-show":!t.s_subfield&&t.s_preview_switch||!t.s_subfield&&t.s_html_code,transition:t.transition},on:{scroll:t.$v_edit_scroll,click:t.textAreaFocus}},[s("div",{staticClass:"content-input-wrapper",style:{"background-color":t.editorBackground}},[s("autoTextara",{ref:"vNoteTextarea",staticClass:"content-input",style:{"background-color":t.editorBackground},attrs:{placeholder:t.placeholder?t.placeholder:t.d_words.start_editor,fontSize:t.fontSize,lineHeight:"1.5",fullHeight:""},model:{value:t.d_value,callback:function(e){t.d_value=e},expression:"d_value"}})],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.s_preview_switch||t.s_html_code,expression:"s_preview_switch || s_html_code"}],staticClass:"v-note-show",class:{"single-show":!t.s_subfield&&t.s_preview_switch||!t.s_subfield&&t.s_html_code}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.s_html_code,expression:"!s_html_code"}],ref:"vShowContent",staticClass:"v-show-content article-content",class:{"scroll-style":t.s_scrollStyle,"scroll-style-border-radius":t.s_scrollStyle},style:{"background-color":t.previewBackground},domProps:{innerHTML:t._s(t.d_render)}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.s_html_code,expression:"s_html_code"}],staticClass:"v-show-content-html",class:{"scroll-style":t.s_scrollStyle,"scroll-style-border-radius":t.s_scrollStyle},style:{"background-color":t.previewBackground}},[t._v("\n        "+t._s(t.d_render)+"\n      ")])])]),t._v(" "),s("div",{ref:"vReadModel",staticClass:"v-note-read-model scroll-style",class:{show:t.s_readmodel}},[s("div",{ref:"vNoteReadContent",staticClass:"v-note-read-content",domProps:{innerHTML:t._s(t.d_render)}})])])}),[],!1,null,"09f2f362",null);e.default=n.exports},noOV:function(t,e,s){"use strict";s.r(e);var a=s("8+Sn"),i={name:"Main",mounted(){this.githubAuth()},data:()=>({isloading:!1,authInfo:{data:{type:""}}}),methods:{githubAuth(){this.isloading=!0,this.$store.dispatch("common/GITHUB_OAUTN",this.$route.query).then(t=>{this.isloading=!1,this.authInfo=t,"success"===t.state&&("login"===t.data.type?(a.a.set("accessToken",t.data.token,7),window.location.href="/"):"create"===t.data.type?a.a.set("accessToken",t.data.token,7):"bind"===t.data.type&&setTimeout(()=>{this.$router.push({name:"ThirdParty"})},3e3))})}}},n=(s("2UPP"),s("Yj/X")),o=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"github"},[s("div",{staticClass:"github-view"},[s("div",{staticClass:"title"},[t._v("\n      "+t._s(t.$route.query.state?"github授权绑定":"github授权登录")+"\n    ")]),t._v(" "),t.isloading?s("div",{staticClass:"loading"},[s("p",[t._v("请稍等，正在操作中...")]),t._v(" "),s("p",[t._v("请勿关闭浏览器")]),t._v(" "),t._m(2)]):s("div",{staticClass:"github-main"},["success"===t.authInfo.state?s("div",{staticClass:"info"},["create"===t.authInfo.data.type?s("div",{staticClass:"create"},[s("p",[t._v("登录邮箱："+t._s(t.authInfo.data.user.email))]),t._v(" "),s("p",[t._v("登录密码："+t._s(t.authInfo.data.password))]),t._v(" "),s("p",[t._v("此账户是github授权登录时，生成的账户")]),t._v(" "),s("p",[t._v("请记住账号密码，可使用当前账号密码登录，也可直接使用github登录")]),t._v(" "),s("p",[t._v("请尽快在个人中心修改密码")]),t._v(" "),s("p",[t._v("当前页仅在首次登录时出现")]),t._v(" "),t._m(0)]):"bind"===t.authInfo.data.type?s("div",{staticClass:"bind"},[s("p",[t._v("\n            github授权绑定成功，返回个人中心\n          ")]),t._v(" "),s("p",[t._v("以后可使用当前绑定的github账户直接登录")]),t._v(" "),s("p",[t._v("3秒后返回个人中心")]),t._v(" "),t._m(1)]):"login"===t.authInfo.data.type?s("div",{staticClass:"login"},[s("p",[t._v("\n            登录成功，返回首页\n          ")])]):t._e()]):s("div",{staticClass:"error"},[s("div",{staticClass:"title"},[t._v("授权失败")]),t._v("\n        "+t._s(t.authInfo.message)+"\n        "),s("a",{attrs:{href:"/"}},[t._v("返回首页")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{href:"/"}},[this._v("直接登录，返回首页")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("a",{attrs:{href:"/"}},[this._v("返回个人中心")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("如果长时间无反应"),e("a",{attrs:{href:"/"}},[this._v("请返回首页")])])}],!1,null,"59ab5364",null);e.default=o.exports},nqCT:function(t,e,s){"use strict";s.r(e);var a={name:"s-md-toolbar-left",props:{editable:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},toolbars:{type:Object,required:!0},d_words:{type:Object,required:!0},image_filter:{type:Function,default:null}},data:()=>({img_file:[[0,null]],img_timer:null,header_timer:null,s_img_dropdown_open:!1,s_header_dropdown_open:!1,s_img_link_open:!1,trigger:null,num:0,link_text:"",link_addr:"",link_type:"link"}),methods:{$imgLinkAdd(){this.$emit("toolbar_left_addlink",this.link_type,this.link_text,this.link_addr),this.s_img_link_open=!1},$toggle_imgLinkAdd(t){this.link_type=t,this.link_text=this.link_addr="",this.s_img_link_open=!0,this.$nextTick(()=>{this.$refs.linkTextInput.focus()}),this.s_img_dropdown_open=!1},$imgFileListClick(t){this.$emit("imgTouch",this.img_file[t])},$changeUrl(t,e){this.img_file[t][0]=e},$imgFileAdd(t){this.img_file.push([++this.num,t]),this.$emit("imgAdd",this.num,t),this.s_img_dropdown_open=!1},$imgFilesAdd(t){let e="function"==typeof this.image_filter;for(let s=0;s<t.length;s++)(e&&!0===this.image_filter(t[s])||!e&&t[s].type.match(/^image\//i))&&this.$imgFileAdd(t[s])},$imgAdd(t){this.$imgFilesAdd(t.target.files),t.target.value=""},$imgDel(t){this.$emit("imgDel",this.img_file[t]),this.img_file.splice(t,1),this.num--,this.s_img_dropdown_open=!1},isEqualName(t,e){return!(!this.img_file[e][1]||this.img_file[e][1].name!=t&&this.img_file[e][1]._name!=t)},$imgDelByFilename(t){for(var e=0;this.img_file.length>e;){if(this.img_file[e][1]==t||this.isEqualName(t,e))return this.$imgDel(e),!0;e+=1}return!1},$imgAddByFilename(t,e){for(var s=0;s<this.img_file.length;s++)if(this.img_file[s][0]==t)return!1;return this.img_file[0][0]=t,this.img_file[0][1]=e,this.img_file[0][2]=t,this.img_file.unshift(["./"+this.num,null]),this.$emit("imgAdd",this.img_file[1][0],e,!1),!0},$imgAddByUrl(t,e){for(var s=0;s<this.img_file.length;s++)if(this.img_file[s][0]==t)return!1;return this.img_file[0][0]=t,this.img_file[0][1]=e,this.img_file.unshift(["./"+this.num,null]),!0},$imgUpdateByFilename(t,e){for(var s=0;s<this.img_file.length;s++)if(this.img_file[s][0]==t||this.isEqualName(t,s))return this.img_file[s][1]=e,this.$emit("imgAdd",t,e,!1),!0;return!1},$mouseenter_img_dropdown(){this.editable&&(clearTimeout(this.img_timer),this.s_img_dropdown_open=!0)},$mouseleave_img_dropdown(){let t=this;this.img_timer=setTimeout((function(){t.s_img_dropdown_open=!1}),200)},$mouseenter_header_dropdown(){this.editable&&(clearTimeout(this.header_timer),this.s_header_dropdown_open=!0)},$mouseleave_header_dropdown(){let t=this;this.header_timer=setTimeout((function(){t.s_header_dropdown_open=!1}),200)},$clicks(t){this.editable&&this.$emit("toolbar_left_click",t)},$click_header(t){this.$emit("toolbar_left_click",t),this.s_header_dropdown_open=!1},handleClose(t){this.s_img_dropdown_open=!1}}},i=(s("9zyW"),s("Yj/X")),n=Object(i.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"v-left-item"},[t._t("left-toolbar-before"),t._v(" "),t.toolbars.bold?s("button",{staticClass:"op-icon fa fa-mavon-bold",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_bold+" (ctrl+b)"},on:{click:function(e){return t.$clicks("bold")}}}):t._e(),t._v(" "),t.toolbars.italic?s("button",{staticClass:"op-icon fa fa-mavon-italic",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_italic+" (ctrl+i)"},on:{click:function(e){return t.$clicks("italic")}}}):t._e(),t._v(" "),t.toolbars.header?s("div",{staticClass:"op-icon fa fa-mavon-header dropdown dropdown-wrapper",class:{selected:t.s_header_dropdown_open},attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_header+" (ctrl+h)"},on:{mouseleave:t.$mouseleave_header_dropdown,mouseenter:t.$mouseenter_header_dropdown}},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.s_header_dropdown_open,expression:"s_header_dropdown_open"}],staticClass:"op-header popup-dropdown",class:{transition:t.transition},on:{mouseenter:t.$mouseenter_header_dropdown,mouseleave:t.$mouseleave_header_dropdown}},[s("div",{staticClass:"dropdown-item",attrs:{title:"#"},on:{click:function(e){return e.stopPropagation(),t.$click_header("header1")}}},[s("span",[t._v(t._s(t.d_words.tl_header_one))])]),t._v(" "),s("div",{staticClass:"dropdown-item",attrs:{title:"## "},on:{click:function(e){return e.stopPropagation(),t.$click_header("header2")}}},[s("span",[t._v(t._s(t.d_words.tl_header_two))])]),t._v(" "),s("div",{staticClass:"dropdown-item",attrs:{title:"### "},on:{click:function(e){return e.stopPropagation(),t.$click_header("header3")}}},[s("span",[t._v(t._s(t.d_words.tl_header_three))])]),t._v(" "),s("div",{staticClass:"dropdown-item",attrs:{title:"#### "},on:{click:function(e){return e.stopPropagation(),t.$click_header("header4")}}},[s("span",[t._v(t._s(t.d_words.tl_header_four))])]),t._v(" "),s("div",{staticClass:"dropdown-item",attrs:{title:"##### "},on:{click:function(e){return e.stopPropagation(),t.$click_header("header5")}}},[s("span",[t._v(t._s(t.d_words.tl_header_five))])]),t._v(" "),s("div",{staticClass:"dropdown-item",attrs:{title:"###### "},on:{click:function(e){return e.stopPropagation(),t.$click_header("header6")}}},[s("span",[t._v(t._s(t.d_words.tl_header_six))])])])])],1):t._e(),t._v(" "),t.toolbars.header||t.toolbars.italic||t.toolbars.bold?s("span",{staticClass:"op-icon-divider"}):t._e(),t._v(" "),t.toolbars.underline?s("button",{staticClass:"op-icon fa fa-mavon-underline",attrs:{disabled:!t.editable,type:"button",title:t.d_words.tl_underline+" (ctrl+u)","aria-hidden":"true"},on:{click:function(e){return t.$clicks("underline")}}}):t._e(),t._v(" "),t.toolbars.strikethrough?s("button",{staticClass:"op-icon fa fa-mavon-strikethrough",attrs:{disabled:!t.editable,type:"button",title:t.d_words.tl_strikethrough+" (ctrl+shift+d)","aria-hidden":"true"},on:{click:function(e){return t.$clicks("strikethrough")}}}):t._e(),t._v(" "),t.toolbars.mark?s("button",{staticClass:"op-icon fa fa-mavon-thumb-tack",attrs:{disabled:!t.editable,type:"button",title:t.d_words.tl_mark+" (ctrl+m)","aria-hidden":"true"},on:{click:function(e){return t.$clicks("mark")}}}):t._e(),t._v(" "),t.toolbars.superscript?s("button",{staticClass:"op-icon fa fa-mavon-superscript",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_superscript+" (ctrl+alt+s)"},on:{click:function(e){return t.$clicks("superscript")}}}):t._e(),t._v(" "),t.toolbars.subscript?s("button",{staticClass:"op-icon fa fa-mavon-subscript",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_subscript+" (ctrl+shift+s)"},on:{click:function(e){return t.$clicks("subscript")}}}):t._e(),t._v(" "),t.toolbars.alignleft?s("button",{staticClass:"op-icon fa fa-mavon-align-left",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_alignleft+" (ctrl+l)"},on:{click:function(e){return t.$clicks("alignleft")}}}):t._e(),t._v(" "),t.toolbars.aligncenter?s("button",{staticClass:"op-icon fa fa-mavon-align-center",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_aligncenter+" (ctrl+e)"},on:{click:function(e){return t.$clicks("aligncenter")}}}):t._e(),t._v(" "),t.toolbars.alignright?s("button",{staticClass:"op-icon fa fa-mavon-align-right",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_alignright+" (ctrl+r)"},on:{click:function(e){return t.$clicks("alignright")}}}):t._e(),t._v(" "),t.toolbars.superscript||t.toolbars.subscript||t.toolbars.underline||t.toolbars.strikethrough||t.toolbars.mark?s("span",{staticClass:"op-icon-divider"}):t._e(),t._v(" "),t.toolbars.quote?s("button",{staticClass:"op-icon fa fa-mavon-quote-left",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_quote+" (ctrl+q)"},on:{click:function(e){return t.$clicks("quote")}}}):t._e(),t._v(" "),t.toolbars.ol?s("button",{staticClass:"op-icon fa fa-mavon-list-ol",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_ol+" (ctrl+o)"},on:{click:function(e){return t.$clicks("ol")}}}):t._e(),t._v(" "),t.toolbars.ul?s("button",{staticClass:"op-icon fa fa-mavon-list-ul",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_ul+" (ctrl+alt+u)"},on:{click:function(e){return t.$clicks("ul")}}}):t._e(),t._v(" "),t.toolbars.ul||t.toolbars.ol||t.toolbars.quote?s("span",{staticClass:"op-icon-divider"}):t._e(),t._v(" "),t.toolbars.link?s("button",{staticClass:"op-icon fa fa-mavon-link",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_link+" (ctrl+l)"},on:{click:function(e){return e.stopPropagation(),t.$toggle_imgLinkAdd("link")}}}):t._e(),t._v(" "),t.toolbars.imagelink?s("div",{staticClass:"op-icon fa fa-mavon-picture-o dropdown dropdown-wrapper",class:{selected:t.s_img_dropdown_open},attrs:{disabled:!t.editable,type:"button","aria-hidden":"true"},on:{mouseleave:t.$mouseleave_img_dropdown,mouseenter:t.$mouseenter_img_dropdown}},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.s_img_dropdown_open,expression:"s_img_dropdown_open"}],staticClass:"op-image popup-dropdown",class:{transition:t.transition},on:{mouseleave:t.$mouseleave_img_dropdown,mouseenter:t.$mouseenter_img_dropdown}},[s("div",{staticClass:"dropdown-item",on:{click:function(e){return e.stopPropagation(),t.$toggle_imgLinkAdd("imagelink")}}},[s("span",[t._v(t._s(t.d_words.tl_image))])]),t._v(" "),s("div",{staticClass:"dropdown-item",staticStyle:{overflow:"hidden"}},[s("input",{attrs:{type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",multiple:"multiple"},on:{change:function(e){return t.$imgAdd(e)}}}),t._v(t._s(t.d_words.tl_upload)+"\n        ")]),t._v(" "),t._l(t.img_file,(function(e,a){return e&&e[1]?s("div",{key:a,staticClass:"dropdown-item dropdown-images",attrs:{title:e[1].name},on:{click:function(e){return e.stopPropagation(),t.$imgFileListClick(a)}}},[s("span",[t._v(t._s(e[1].name))]),t._v(" "),s("button",{staticClass:"op-icon fa fa-mavon-times",attrs:{slot:"right",type:"button","aria-hidden":"true",title:t.d_words.tl_upload_remove},on:{click:function(e){return e.stopPropagation(),t.$imgDel(a)}},slot:"right"}),t._v(" "),s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e[1].miniurl,expression:"item[1].miniurl"}],staticClass:"image-show",class:{transition:t.transition},attrs:{alt:"none"}})]):t._e()}))],2)])],1):t._e(),t._v(" "),t.toolbars.code?s("button",{staticClass:"op-icon fa fa-mavon-code",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_code+" (ctrl+alt+c)"},on:{click:function(e){return t.$clicks("code")}}}):t._e(),t._v(" "),t.toolbars.table?s("button",{staticClass:"op-icon fa fa-mavon-table",attrs:{disabled:!t.editable,type:"button","aria-hidden":"true",title:t.d_words.tl_table+" (ctrl+alt+t)"},on:{click:function(e){return t.$clicks("table")}}}):t._e(),t._v(" "),t.toolbars.link||t.toolbars.imagelink||t.toolbars.code||t.toolbars.table?s("span",{staticClass:"op-icon-divider"}):t._e(),t._v(" "),t.toolbars.undo?s("button",{staticClass:"op-icon fa fa-mavon-undo",attrs:{type:"button","aria-hidden":"true",title:t.d_words.tl_undo+" (ctrl+z)"},on:{click:function(e){return t.$clicks("undo")}}}):t._e(),t._v(" "),t.toolbars.redo?s("button",{staticClass:"op-icon fa fa-mavon-repeat",attrs:{type:"button","aria-hidden":"true",title:t.d_words.tl_redo+" (ctrl+y)"},on:{click:function(e){return t.$clicks("redo")}}}):t._e(),t._v(" "),t.toolbars.trash?s("button",{staticClass:"op-icon fa fa-mavon-trash-o",attrs:{type:"button","aria-hidden":"true",title:t.d_words.tl_trash+" (ctrl+breakspace)"},on:{click:function(e){return t.$clicks("trash")}}}):t._e(),t._v(" "),t.toolbars.save?s("button",{staticClass:"op-icon fa fa-mavon-floppy-o",attrs:{type:"button","aria-hidden":"true",title:t.d_words.tl_save+" (ctrl+s)"},on:{click:function(e){return t.$clicks("save")}}}):t._e(),t._v(" "),t._t("left-toolbar-after"),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.s_img_link_open?s("div",{staticClass:"add-image-link-wrapper"},[s("div",{staticClass:"add-image-link"},[s("i",{staticClass:"fa fa-mavon-times",attrs:{"aria-hidden":"true"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.s_img_link_open=!1}}}),t._v(" "),s("h3",{staticClass:"title"},[t._v(t._s("link"==t.link_type?t.d_words.tl_popup_link_title:t.d_words.tl_popup_img_link_title))]),t._v(" "),s("div",{staticClass:"link-text input-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.link_text,expression:"link_text"}],ref:"linkTextInput",attrs:{type:"text",placeholder:"link"==t.link_type?t.d_words.tl_popup_link_text:t.d_words.tl_popup_img_link_text},domProps:{value:t.link_text},on:{input:function(e){e.target.composing||(t.link_text=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"link-addr input-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.link_addr,expression:"link_addr"}],attrs:{type:"text",placeholder:"link"==t.link_type?t.d_words.tl_popup_link_addr:t.d_words.tl_popup_img_link_addr},domProps:{value:t.link_addr},on:{input:function(e){e.target.composing||(t.link_addr=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"op-btn cancel",on:{click:function(e){e.stopPropagation(),t.s_img_link_open=!1}}},[t._v(t._s(t.d_words.tl_popup_link_cancel))]),t._v(" "),s("div",{staticClass:"op-btn sure",on:{click:function(e){return e.stopPropagation(),t.$imgLinkAdd()}}},[t._v(t._s(t.d_words.tl_popup_link_sure))])])]):t._e()])],2)}),[],!1,null,"7449390c",null);e.default=n.exports},nxr3:function(t,e,s){},"o/YZ":function(t,e,s){"use strict";var a=s("VEj1");s.n(a).a},oGNv:function(t,e,s){"use strict";var a=s("T2z5");s.n(a).a},ohNQ:function(t,e,s){},otwO:function(t,e,s){},ovrn:function(t,e,s){},qDDT:function(t,e,s){"use strict";var a=s("8C+B");s.n(a).a},qFOh:function(t,e,s){"use strict";s.r(e);var a=s("Kvkj"),i=s("iHbI"),n=s("YP4+"),o={name:"UserMessage",data:()=>({isLoading:!1,modelName:n.i,messageList:{list:[],count:0,page:1,pageSize:10}}),mounted(){this.getUserMessageList()},methods:{getUserMessageList(){this.$store.dispatch("user/GET_ATTENTION_MESSAGE_LIST",{page:this.messageList.page||1,pageSize:this.messageList.pageSize||10}).then(t=>{this.messageList=t.data?t.data.userUnreadList:{},this.$store.dispatch("user/GET_UNREAD_MESSAGE_COUNT"),this.isLoading=!1}).catch(()=>{this.isLoading=!1})},deleteChange(){this.getUserMessageList()},pageChange(t){this.messageList.page=t,this.getUserMessageList()}},computed:{...Object(i.b)(["personalInfo","user"])},components:{Page:a.f}},r=(s("1Ph+"),s("Yj/X")),l=Object(r.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"article-list-lay layout-content "},[s("div",{staticClass:"container box-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-12 col-md-12"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user-message client-card"},[s("h3",{staticClass:"title"},[t._v("关注")]),t._v(" "),s("div",{staticClass:"user-message-view"},t._l(t.messageList.list,(function(e,a){return s("div",{key:a,ref:"user_message_list",refInFor:!0,staticClass:"user-message-item attention"},[s("div",{staticClass:"main clearfix"},[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:e.sender.uid,routeType:"article"}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.sender.avatar,expression:"MessageItem.sender.avatar"}],staticClass:"avatar",attrs:{alt:""}}),t._v(" "),s("span",{staticClass:"nickname"},[t._v(t._s(e.sender.nickname))])]),t._v(" "),s("p",{staticClass:"time"},[t._v(" "+t._s(e.create_dt))]),t._v(" "),s("div",{staticClass:"content"},[t._v("\n                  "+t._s(e.actionText)+t._s(e.typeText)+"\n                  "),e.type===t.modelName.article?s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"article",params:{aid:e.associateInfo.aid}}}},[t._v(t._s(e.associateInfo.title))]):t._e(),t._v(" "),e.type===t.modelName.dynamic?s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"dynamicView",params:{dynamicId:e.associateInfo.id}}}},[t._v(t._s(e.associateInfo.content))]):t._e(),t._v(" "),e.type===t.modelName.books?s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"book",params:{books_id:e.associateInfo.books_id}}}},[t._v(t._s(e.associateInfo.title))]):t._e()],1)],1)])})),0),t._v(" "),s("Page",{attrs:{total:t.messageList.count,pageSize:t.messageList.pageSize,page:Number(t.messageList.page)},on:{pageChange:t.pageChange}})],1)])])])])}),[],!1,null,"5780e5a8",null);e.default=l.exports},qPLm:function(t,e,s){"use strict";var a=s("Bi/j");s.n(a).a},qfLB:function(t,e,s){},"ql+d":function(t,e,s){},qu4x:function(t,e,s){"use strict";const a=s("nai1").default,i={mavonEditor:a,LeftToolbar:s("nqCT").default,RightToolbar:s("Alhn").default,install:function(t){t.component("mark-editor",a)}};t.exports=i},rER3:function(t,e,s){"use strict";s.r(e);var a=s("iHbI"),i=s("Kvkj"),n={name:"CommentForm",data:()=>({commentContent:"",faceVisible:!1}),props:{type:{type:String,default:"parent"},reply_uid:{default:""},reply_id:{default:""},parent_id:{default:""}},methods:{getParams(){return{books_id:this.$route.params.books_id,book_id:this.$route.params.book_id,content:this.commentContent,reply_uid:this.reply_uid,reply_id:this.reply_id,parent_id:this.parent_id}},changeFace(t){this.faceVisible=!1,this.commentContent=this.commentContent+t.face_text},submitComment(){if(!this.commentContent)return this.$message.warning("请填写评论内容"),!1;var t=this.getParams();this.$store.dispatch("book/BOOK_COMMENT_CREATE",t).then(t=>{this.commentContent="",this.$emit("commentChange",t)}).catch(t=>{this.commentContent=""})}},computed:{article(){return this.$store.state.article.article||{}},personalInfo(){return this.$store.state.personalInfo||{}}},components:{Face:i.d,Popover:i.g}},o=(s("lAnF"),s("Yj/X")),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment-form",attrs:{id:"comment_form"}},[s("div",{staticClass:"comment-avatar"},[t.personalInfo.islogin?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.personalInfo.user.avatar,expression:"personalInfo.user.avatar"}],staticClass:"box-image",attrs:{alt:""}}):s("img",{staticClass:"box-image",attrs:{src:"/default/img/avatar.jpeg",alt:""}})]),t._v(" "),s("div",{staticClass:"form-item",staticStyle:{"margin-left":"50px"}},[s("div",{staticClass:"input-view"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"txt long-txt textarea ",attrs:{name:"comment"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-item form-btns clearfix"},[s("div",{staticClass:"left-view"},[s("Popover",{attrs:{visible:t.faceVisible},on:{"update:visible":function(e){t.faceVisible=e}}},[t.faceVisible?s("Face",{on:{changeFace:t.changeFace}}):t._e(),t._v(" "),s("i",{staticClass:"face-icon el-icon-picture-outline-round",attrs:{slot:"button"},slot:"button"})],1)],1),t._v(" "),s("div",{staticClass:"right-view"},[s("button",{staticClass:"form-btn",attrs:{type:"submit"},on:{click:t.submitComment}},[t._v("提交评论")])])])])])}),[],!1,null,"1efa87ef",null).exports,l=s("YP4+"),c={name:"childrenItem",props:["childCommentItem","p_id","comentKey"],data:function(){return{isComment:!1,reply_uid:"",statusList:l.l}},methods:{commentChange(t){this.isComment=!1,this.$emit("ChildCommentChange",t)},onReply(){this.isComment=!this.isComment,this.reply_uid=this.childCommentItem.uid},deleteComment(t){this.$store.dispatch("book/BOOK_COMMENT_DELETE",{book_id:this.$route.params.book_id,comment_id:t}).then(t=>{"success"===t.state?(this.$emit("deleteChildComment",this.comentKey),this.$message.success(t.message)):this.$message.warning(t.message)}).catch((function(t){console.log(t)}))},commentRender(t){let e=t;return i.j.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}},computed:{article(){return this.$store.state.article.article||{}},personalInfo(){return this.$store.state.personalInfo||{}}},components:{"comment-form":r}},m=(s("3q3C"),{name:"index",props:["commentItem","comentKey"],data:function(){return{isComment:!1,statusList:l.l}},methods:{commentChange(t){"success"===t.state?(this.$message.success(t.message),this.$nextTick((function(){this.commentItem.children.push(t.data)}))):this.$message.warning(t.message),this.isComment=!1},deleteChildComment(t){this.commentItem.children.splice(t,1)},deleteComment(t){this.$store.dispatch("book/BOOK_COMMENT_DELETE",{book_id:this.$route.params.book_id,comment_id:t}).then(t=>{"success"===t.state?(this.$emit("deleteComment",this.comentKey),this.$message.success(t.message)):this.$message.warning(t.message)}).catch((function(t){console.log(t)}))},commentRender(t){let e=t;return i.j.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}},computed:{article(){return this.$store.state.article.article||{}},personalInfo(){return this.$store.state.personalInfo||{}}},components:{"comment-form":r,"comment-child-item":Object(o.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment-item",attrs:{id:"comment"+t.childCommentItem.id}},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.childCommentItem.user.avatar,expression:"childCommentItem.user.avatar"}],staticClass:"box-image",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"comment-body"},[s("div",{staticClass:"comment-main"},[s("h4",[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.childCommentItem.user.uid,routeType:"article"}}}},[t._v(t._s(t.childCommentItem.user.nickname))]),t._v(" "),t.childCommentItem.reply_user?[s("i",{staticClass:"middle-text"},[t._v("回复")]),t._v(" "),s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.childCommentItem.reply_user.uid,routeType:"article"}}}},[t._v(t._s(t.childCommentItem.reply_user.nickname))])]:t._e()],2),t._v(" "),Number(t.childCommentItem.status)===t.statusList.reviewSuccess||Number(t.childCommentItem.status)===t.statusList.freeReview?s("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.commentRender(t.childCommentItem.content))}}):Number(t.childCommentItem.status)===t.statusList.pendingReview?s("div",{staticClass:"comment-text",staticStyle:{color:"#f96b84"}},[t._v("当前用户评论需要管理员审核才能可见")]):Number(t.childCommentItem.status)===t.statusList.reviewFail?s("div",{staticClass:"comment-text",staticStyle:{color:"#f96b84"}},[t._v("当前用户评论违规")]):t._e()]),t._v(" "),s("div",{staticClass:"comment-foot clearfix"},[s("span",[t._v(t._s(t.childCommentItem.create_dt))]),t._v(" "),Number(t.childCommentItem.status)===t.statusList.reviewSuccess||Number(t.childCommentItem.status)===t.statusList.freeReview?s("span",{directives:[{name:"show",rawName:"v-show",value:t.personalInfo.islogin,expression:"personalInfo.islogin"}],staticClass:"comment-reply",on:{click:t.onReply}},[t._v(t._s(t.isComment?"取消回复":"回复"))]):t._e(),t._v(" "),t.personalInfo.user.uid===t.childCommentItem.uid?s("span",{staticClass:"comment-delete",on:{click:function(e){return t.deleteComment(t.childCommentItem.id)}}},[t._v("删除")]):t._e()])]),t._v(" "),t.isComment?s("div",{staticClass:"comment-form-view",attrs:{id:"comment-reply"+t.childCommentItem.id}},[s("comment-form",{attrs:{reply_uid:t.reply_uid,parent_id:t.p_id,reply_id:t.childCommentItem.id},on:{commentChange:t.commentChange}})],1):t._e()])}),[],!1,null,"8011f992",null).exports}}),d=(s("/rXd"),Object(o.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"comment_list",staticClass:"comment-item",attrs:{id:"comment"+t.commentItem.id}},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.commentItem.user.avatar,expression:"commentItem.user.avatar"}],staticClass:"box-image",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"comment-body"},[s("div",{staticClass:"comment-main"},[s("h4",[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.commentItem.user.uid,routeType:"article"}}}},[t._v(t._s(t.commentItem.user.nickname))])],1),t._v(" "),Number(t.commentItem.status)===t.statusList.reviewSuccess||Number(t.commentItem.status)===t.statusList.freeReview?s("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.commentRender(t.commentItem.content))}}):Number(t.commentItem.status)===t.statusList.pendingReview?s("div",{staticClass:"comment-text",staticStyle:{color:"#f96b84"}},[t._v("当前用户评论需要管理员审核才能可见")]):Number(t.commentItem.status)===t.statusList.reviewFail?s("div",{staticClass:"comment-text",staticStyle:{color:"#f96b84"}},[t._v("当前用户评论违规")]):t._e()]),t._v(" "),s("div",{staticClass:"comment-foot clearfix"},[s("span",[t._v(t._s(t.commentItem.create_dt))]),t._v(" "),Number(t.commentItem.status)===t.statusList.reviewSuccess||Number(t.commentItem.status)===t.statusList.freeReview?s("span",{directives:[{name:"show",rawName:"v-show",value:t.personalInfo.islogin,expression:"personalInfo.islogin"}],staticClass:"comment-reply",on:{click:function(e){t.isComment=!t.isComment}}},[t._v(t._s(t.isComment?"取消回复":"回复"))]):t._e(),t._v(" "),t.personalInfo.user.uid===t.commentItem.uid?s("span",{staticClass:"comment-delete",on:{click:function(e){return t.deleteComment(t.commentItem.id)}}},[t._v("删除")]):t._e()]),t._v(" "),t.isComment?s("div",{staticClass:"comment-form-view",attrs:{id:"comment-reply"+t.commentItem.id}},[s("comment-form",{attrs:{reply_uid:t.commentItem.uid,parent_id:t.commentItem.id,reply_id:t.commentItem.id},on:{commentChange:t.commentChange}})],1):t._e()]),t._v(" "),t.commentItem.children.length>0||t.isComment?s("div",{staticClass:"comment-item-children"},[t.commentItem.children.length>0?s("div",{staticClass:"comment-item-children-view"},t._l(t.commentItem.children,(function(e,a){return s("comment-child-item",{key:a,attrs:{comentKey:a,p_id:t.commentItem.id,childCommentItem:e},on:{deleteChildComment:t.deleteChildComment,ChildCommentChange:t.commentChange}})})),1):t._e()]):t._e()])}),[],!1,null,"39fbad3a",null).exports),u={name:"index",data:()=>({isLoading:!0,comment:{comment_list:[],count:0,page:1,pageSize:10}}),created(){this.getCommentList()},watch:{$route(t,e){this.getCommentList()}},methods:{getCommentList(){this.isLoading=!0,this.$store.dispatch("book/BOOK_COMMENT_LIST",{book_id:this.$route.params.book_id,page:this.comment.page,pageSize:this.comment.pageSize}).then(t=>{this.comment=t.data,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},pageChange(t){this.$store.dispatch("book/BOOK_COMMENT_LIST",{book_id:this.$route.params.book_id,page:t,pageSize:this.comment.pageSize}).then(t=>{this.comment=t.data})},deleteComment(t){this.articleComment.list.splice(t,1)},commentChange(t){"success"===t.state?(this.$message.success(t.message),this.comment.comment_list.unshift(t.data),this.comment.count+=1):this.$message.warning(t.message)}},computed:{...Object(a.b)(["website","personalInfo"])},components:{"comment-item":d,"comment-form":r,Page:i.f}},_=(s("ERny"),Object(o.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"box-comment"},["yes"===t.website.config.on_comment?s("div",{staticClass:"box-comment-part"},[s("div",{staticClass:"box-comment-part-title"},[s("span",[t._v("发表评论")]),t._v(" "),s("small",[t._v("\n        已发布评论\n        "),s("em",[t._v(t._s(t.comment.count))]),t._v(" 条\n      ")]),t._v(" "),s("router-link",{staticClass:"comment-rule",attrs:{to:{name:"comment_rule"}}},[t._v("《点我查看评论规范》")])],1),t._v(" "),s("comment-form",{on:{commentChange:t.commentChange}}),t._v(" "),s("div",{staticClass:"comment-list"},[s("div",{attrs:{id:"commentlist"}},t._l(t.comment.comment_list,(function(e,a){return s("comment-item",{key:a,attrs:{"comment-item":e,comentKey:a},on:{deleteComment:t.deleteComment}})})),1),t._v(" "),s("Page",{attrs:{total:Number(t.comment.count),pageSize:Number(t.comment.pageSize)},on:{pageChange:t.pageChange}})],1)],1):s("div",[s("p",{staticClass:"no-comment"},[t._v("评论模块已关闭")])])])}),[],!1,null,"2eae6572",null).exports),p=s("8+Sn"),v=s("vuaj"),g=s.n(v),h=s("7Qib"),f={name:"BookInfo",minixs:[s("m0go").a],metaInfo(){return{title:this.book.bookInfo.title||"",meta:[{name:"description",content:`${this.book.bookInfo.title||""}`}],htmlAttrs:{lang:"zh"},script:[...h.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},asyncData:async({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("PERSONAL_INFO",{accessToken:s}),t.dispatch("website/GET_WEBSITE_INFO"),t.dispatch("books/GET_BOOKS_INFO",{books_id:e.params.books_id,type:"info",accessToken:s}),t.dispatch("book/GET_BOOK_INFO",{book_id:e.params.book_id,accessToken:s})]),data:()=>({trialRead:l.n,isFree:l.e,isShowAside:!0,bookInfoOther:{prev:{},next:{}}}),watch:{$route(t,e){this.getBookNextPrev()}},mounted(){this.getBooksBookAll(),this.getBookNextPrev()},methods:{commandChange(t){"esc"!==t.name?this.$router.push(t):this.escLogin()},escLogin(){this.$message.warning("已退出当前账户，请重新登录"),p.a.delete("accessToken"),window.location.reload()},lookChapter(t){this.$router.push({name:"BookView",params:{books_id:this.$route.params.books_id,book_id:t}})},writeChapter(t){this.$router.push({name:"WriteBookView",params:{books_id:this.$route.params.books_id,book_id:t}})},getBooksBookAll(){this.$store.dispatch("books/GET_BOOKS_BOOK_ALL",{books_id:this.$route.params.books_id})},getBookNextPrev(){this.$store.dispatch("book/BOOK_NEXT_PREV",{book_id:this.$route.params.book_id,books_id:this.$route.params.books_id}).then(t=>{this.bookInfoOther=t.data})}},computed:{...Object(a.b)(["books","book","personalInfo","website"])},components:{BookComment:_,ClientOnly:g.a,Dropdown:i.c}},b=(s("GqIh"),Object(o.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("client-only",[s("div",{staticClass:"book-read-view"},[s("div",{staticClass:"book-section",class:{"fold-pc":!t.isShowAside}},[s("div",{staticClass:"book-summary"},[s("div",{staticClass:"book-summary-inner"},[s("div",{staticClass:"book-summary__header"},[t.website.meta.logo?s("router-link",{staticClass:"navbar-brand logo",style:{"background-image":"url("+t.website.meta.logo+")"},attrs:{to:{name:"home"}}}):s("router-link",{staticClass:"navbar-brand logo-text",attrs:{to:{name:"home"}}},[t._v(t._s(t.website.meta.website_name))]),t._v(" "),s("div",{staticClass:"label"},[t._v("小书")])],1),t._v(" "),t.personalInfo.islogin&&t.book.bookInfo.uid===t.personalInfo.user.uid?s("div",{staticClass:"book-summary-btn"},[s("div",{staticClass:"section-buy",on:{click:function(e){return t.writeChapter("create")}}},[t._v("创建新章节")])]):t._e(),t._v(" "),s("div",{staticClass:"book-directory",class:{bought:t.personalInfo.islogin}},t._l(t.books.booksBookAll,(function(e,a){return s("router-link",{key:a,staticClass:"section",attrs:{to:{name:"BookView",params:{books_id:t.$route.params.books_id,book_id:e.book_id}}}},[s("div",{staticClass:"step"},[s("div",{staticClass:"step-btn"},[t._v(t._s(a+1))])]),t._v(" "),s("div",{staticClass:"center"},[s("div",{staticClass:"title"},[t._v(t._s(e.title)+" "),Number(t.books.booksInfo.is_free)===t.isFree.pay&&e.trial_read===t.trialRead.yes?s("span",{staticClass:"read"},[t._v("可试读")]):t._e()])])])})),1),t._v(" "),s("div",{staticClass:"book-summary__footer"})])]),t._v(" "),s("div",{staticClass:"book-content"},[s("div",{staticClass:"book-content-inner"},[s("div",{staticClass:"book-content__header"},[s("div",{staticClass:"menu",on:{click:function(e){t.isShowAside=!t.isShowAside}}},[s("i",{staticClass:"el-icon-s-operation"})]),t._v(" "),s("div",{staticClass:"title"},[s("router-link",{attrs:{to:{name:"book",params:{books_id:t.$route.params.books_id}}}},[t._v(t._s(t.books.booksInfo.title))])],1),t._v(" "),s("div",{staticClass:"user-auth"},[t.personalInfo.islogin?s("div",{staticClass:"nav-item dropdown"},[s("Dropdown",{attrs:{placement:"right"}},[s("div",{staticClass:"el-dropdown-link",attrs:{slot:"button"},slot:"button"},[s("div",{staticClass:"avatar-img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.personalInfo.user.avatar,expression:"personalInfo.user.avatar"}],staticClass:"box-image",attrs:{alt:""}})])]),t._v(" "),s("div",{staticClass:"dropdown-menu-view"},[s("router-link",{staticClass:"dropdown-menu-item",attrs:{to:{name:"user",params:{uid:t.personalInfo.user.uid,routeType:"article"}}}},[t._v("\n                      我的主页")]),t._v(" "),s("router-link",{staticClass:"dropdown-menu-item",attrs:{to:{name:"setting"}}},[t._v("\n                      设置")]),t._v(" "),s("div",{staticClass:"dropdown-menu-item",on:{click:t.escLogin}},[t._v("\n                      退出\n                    ")])],1)])],1):s("div",{staticClass:"nav-item auth"},["yes"===t.website.config.on_login?s("div",{staticClass:"nav-item-view"},[s("router-link",{staticClass:"btn btn-sm sign-btn btn-block",attrs:{to:{name:"signIn"}}},[t._v("登录")])],1):t._e(),t._v(" "),"yes"===t.website.config.on_register?s("div",{staticClass:"nav-item-view"},[s("router-link",{staticClass:"btn s-btn--primary btn-sm sign-btn btn-outline-warning",attrs:{to:{name:"signIn"}}},[t._v("注册")])],1):t._e()])])]),t._v(" "),s("div",{staticClass:"book-body transition--next"},[s("div",{staticClass:"section-content"},[s("div",{staticClass:"clearfix"},[t.personalInfo.islogin&&t.book.bookInfo.uid===t.personalInfo.user.uid?s("div",{staticClass:"btn edit-outline",on:{click:function(e){return t.writeChapter(t.book.bookInfo.book_id)}}},[t._v("\n                  编辑当前章节\n                ")]):t._e()]),t._v(" "),t.book.bookInfo.isLook?s("div",{staticClass:"entry-content article-content",domProps:{innerHTML:t._s(t.book.bookInfo.content)}}):s("div",{staticClass:"no-read"},[s("p",[t._v("当前章节需要购买此小书后，方可继续阅读")])]),t._v(" "),s("div",{staticClass:"book-comments"},[t.personalInfo.islogin?t._e():s("div",{staticClass:"comment-box"},[s("div",{staticClass:"comment-form comment-form unauthorized",attrs:{id:"comment"}},[s("div",{staticClass:"unauthorized-panel"},[s("router-link",{staticClass:"authorize-btn",attrs:{to:{name:"signIn"}}},[t._v("登录")]),t._v(" "),s("div",{staticClass:"placeholder"},[t._v("评论将在后台进行审核，审核通过后对所有人可见")])],1)])]),t._v(" "),s("BookComment")],1)])]),t._v(" "),s("div",{staticClass:"book-handle book-direction"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.bookInfoOther.prev,expression:"bookInfoOther.prev"}],staticClass:"step-btn step-btn--prev",on:{click:function(e){return t.lookChapter(t.bookInfoOther.prev.book_id)}}},[s("i",{staticClass:"el-icon-arrow-left"})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.bookInfoOther.next,expression:"bookInfoOther.next"}],staticClass:"step-btn step-btn--next",on:{click:function(e){return t.lookChapter(t.bookInfoOther.next.book_id)}}},[s("i",{staticClass:"el-icon-arrow-right"})])])])])])])])}),[],!1,null,"08c0f470",null));e.default=b.exports},rasB:function(t,e,s){"use strict";s.r(e);var a=s("qYcz"),i=s("Z4jx"),n=s("iHbI"),o=s("vuaj"),r=s.n(o),l=s("Kvkj"),c=s("YP4+"),m={name:"Personal",metaInfo:()=>({title:"个人中心",htmlAttrs:{lang:"zh"}}),data:()=>({virtualPlusLess:c.s,virtualPlusLessText:c.t,modelName:c.i,detail:{list:[],count:0,page:1,pageSize:10}}),mounted(){this.personalInfo.islogin||this.$router.push({name:"signIn"}),this.getVirtualList()},methods:{pageChange(t){this.detail.page=t,this.getVirtualList()},getVirtualList(){this.$store.dispatch("virtual/GET_VIRTUAL_LIST",{uid:this.personalInfo.user.uid,page:this.detail.page,pageSize:this.detail.pageSize}).then(t=>{this.detail=t.data})}},computed:{...Object(n.b)(["personalInfo","user"])},components:{UserAside:a.a,ClientOnly:r.a,Collect:i.a,Page:l.f}},d=(s("oGNv"),s("Yj/X")),u=Object(d.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("client-only",[s("section",{staticClass:"layout-content detail-lay"},[s("div",{staticClass:"container  box-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8 main"},[s("div",{staticClass:"client-card pd20"},[s("h3",[t._v("贝壳明细")]),t._v(" "),s("div",{staticClass:"amount"},[t._v("\n              余额："),s("span",{staticClass:"amount-num"},[t._v(t._s(t.personalInfo.user_info.shell_balance||0)+"\n              ")])]),t._v(" "),s("table",{staticClass:"table-view"},[s("tr",[s("td",{staticClass:"hd",staticStyle:{width:"20%"}},[t._v("时间")]),t._v(" "),s("td",{staticClass:"hd",staticStyle:{width:"20%"}},[t._v("类型")]),t._v(" "),s("td",{staticClass:"hd",staticStyle:{width:"20%"}},[t._v("数额")]),t._v(" "),s("td",{staticClass:"hd",staticStyle:{width:"20%"}},[t._v("余额")]),t._v(" "),s("td",{staticClass:"hd",staticStyle:{width:"20%"}},[t._v("描述")])]),t._v(" "),t._l(t.detail.list,(function(e,a){return s("tr",{key:a},[s("td",{staticStyle:{width:"20%"}},[t._v(t._s(e.create_dt))]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[t._v(t._s(e.actionText))]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[s("span",{staticClass:"amount",class:t.virtualPlusLess.plus===e.plus_less?"plus":"less"},[t._v("\n                    "+t._s(t.virtualPlusLessText[e.plus_less]+e.amount)+"\n                  ")])]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[s("span",{staticClass:"balance"},[t._v("\n                    "+t._s(e.balance)+"\n                  ")])]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[t._v("\n                  "+t._s(e.actionText+e.typeText)+"\n                  "),e.type===t.modelName.article?s("router-link",{attrs:{to:{name:"article",params:{aid:e.article.aid}}}},[t._v(t._s(e.article.title))]):t._e(),t._v(" "),e.type===t.modelName.dynamic?s("router-link",{attrs:{to:{name:"dynamicView",params:{dynamicId:e.dynamic.id}}}},[t._v(t._s(e.dynamic.content))]):t._e(),t._v(" "),e.type===t.modelName.books?s("router-link",{attrs:{to:{name:"book",params:{books_id:e.books.books_id}}}},[t._v(t._s(e.books.title))]):t._e(),t._v(" "),e.type===t.modelName.article_annex?s("router-link",{attrs:{to:{name:"article",params:{aid:e.article_annex.aid}}}},[t._v(t._s(e.article_annex.title))]):t._e(),t._v(" "),e.type===t.modelName.book?s("router-link",{attrs:{to:{name:"BookView",params:{books_id:e.book.books_id,book_id:e.book.book_id}}}},[t._v(t._s(e.book.title))]):t._e(),t._v(" "),e.type===t.modelName.chat_message?s("a",{staticStyle:{color:"#666"},attrs:{href:"javascript:;"}},[t._v(t._s(e.chat_message.content))]):t._e()],1)])}))],2),t._v(" "),s("Page",{attrs:{total:Number(t.detail.count),pageSize:Number(t.detail.pageSize),page:Number(t.detail.page)||1},on:{pageChange:t.pageChange}})],1)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4 box-aside"},[s("UserAside")],1)])])])])}),[],!1,null,"27b060ac",null);e.default=u.exports},rm9i:function(t,e,s){"use strict";s.r(e);var a=s("iHbI"),i=s("Kvkj"),n=s("7Qib"),o={name:"ArticleColumn",minixs:[s("m0go").a],metaInfo(){return{title:"专栏",titleTemplate:`%s - ${this.website.meta.website_name}`,meta:[{name:"description",content:`专栏-${this.website.meta.website_name}`}],htmlAttrs:{lang:"zh"},script:[...n.a.resource({route:this.$route,config:this.website.config}),...n.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},asyncData:async({store:t,route:e,accessToken:s=""})=>Promise.all([t.dispatch("articleColumn/GET_ARTICLE_COLUMN_LIST",{page:e.query.page||1})]),methods:{pageChange(t){this.$router.push({name:"column",query:{page:t}})}},computed:{...Object(a.b)(["articleColumn","website"])},components:{Page:i.f}},r=(s("SyOQ"),s("Yj/X")),l=Object(r.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"article-column",attrs:{id:"article-column"}},[s("div",{staticClass:"container  box-container client-card"},[s("nav",{staticClass:"switch-list-nav"},[s("div",{staticClass:"nav-list"},[s("router-link",{staticClass:"nav-item",attrs:{to:{name:"columnAll"}}},[t._v("专栏")]),t._v(" "),s("router-link",{staticClass:"nav-item",attrs:{to:{name:"subscribe_tag",params:{type:"all"}}}},[t._v("全部标签")])],1)]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"column-view clearfix"},t._l(t.articleColumn.column_list.list,(function(e,a){return"all"!==e.en_name?s("div",{key:a,staticClass:"column-item"},[s("div",{staticClass:"column-item-box"},[s("h2",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),s("ul",{staticClass:"tag-body"},t._l(e.tag,(function(e,a){return s("li",{key:a},[s("router-link",{staticClass:"tag-class frontend",attrs:{to:{name:"article_tag",params:{en_name:e.en_name}}}},[s("div",{staticClass:"img",style:"background-image: url("+e.icon+")",attrs:{alt:e.name}}),t._v("\n                  "+t._s(e.name)+"\n                ")])],1)})),0)])]):t._e()})),0),t._v(" "),s("Page",{attrs:{total:Number(t.articleColumn.column_list.count),pageSize:Number(t.articleColumn.column_list.pageSize),page:Number(t.$route.query.page)||1},on:{pageChange:t.pageChange}})],1)])])}),[],!1,null,"7f3fa705",null);e.default=l.exports},s2zN:function(t,e,s){"use strict";var a=s("Qoop");s.n(a).a},sDPK:function(t,e,s){"use strict";var a=s("JhGN");s.n(a).a},sFCI:function(t,e,s){"use strict";var a=s("a9wT"),i=s("MrL/"),n=s.n(i),o=[];e.a={methods:{$render(t,e){o=[];var s=n()(t,{breaks:!0});this.ishljs&&o.length>0&&this.$_render(t,e,s),e(s)},$_render(t,e,s){for(var i=0,n=0;n<o.length;n++){var r=this.p_external_link.hljs_lang(o[n]);Object(a.e)(r,(function(){(i+=1)===o.length&&e(s)}))}}}}},sP4S:function(t,e,s){"use strict";var a=s("ohNQ");s.n(a).a},"sPx/":function(t,e,s){},t4dQ:function(t,e,s){"use strict";s.r(e);var a={metaInfo:()=>({title:"文章编写规范",meta:[{name:"description",content:"文章编写规范"}],htmlAttrs:{lang:"zh"}})},i=(s("thuk"),s("Yj/X")),n=Object(i.a)(a,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"layout-content box-container container",attrs:{id:"article-rule-lay"}},[s("div",{staticClass:"row"},[s("main",{staticClass:"lay-main col-xs-12 col-sm-12 col-md-12"},[s("div",{staticClass:"comment-rule"},[s("p",[t._v("本平台是一个致力于帮助每个人更好地运用数字产品或科学方法让生活工作变得更好的内容平台。")]),t._v(" "),s("h3",[t._v("违规内容界定")]),t._v(" "),s("h3",[t._v("1.违反法律法规，发布违反国家相关法律法规及「九不准」管理规定的信息，如")]),t._v(" "),s("ul",[s("li",[t._v("反对宪法所确定的基本原则危害国家安全；")]),t._v(" "),s("li",[t._v("泄露国家秘密，颠覆国家政权，破坏国家统一；")]),t._v(" "),s("li",[t._v("损害国家荣誉和利益；")]),t._v(" "),s("li",[t._v("煽动民族仇恨、民族歧视，破坏民族团结；")]),t._v(" "),s("li",[t._v("侮辱、滥用英烈形象，否定英烈事迹，美化粉饰侵略战争行为的；")]),t._v(" "),s("li",[t._v("破坏国家宗教政策，宣扬邪教和封建迷信；")]),t._v(" "),s("li",[t._v("散布谣言，扰乱社会秩序，破坏社会稳定；")]),t._v(" "),s("li",[t._v("宣扬淫秽、色情、赌博、暴力、凶杀、恐怖或者教唆犯罪；")]),t._v(" "),s("li",[t._v("煽动非法集会、结社、游行、示威、聚众扰乱社会秩序；")]),t._v(" "),s("li",[t._v("诽谤他人，泄露他人隐私，侵害他人合法权益；")]),t._v(" "),s("li",[t._v("含有法律、行政法规禁止的其他内容的信息。")])]),t._v(" "),s("h3",[t._v("2. 发布广告垃圾信息，如")]),t._v(" "),s("ul",[s("li",[t._v("文章中包含售卖产品、提供服务、宣传推广内容的；")]),t._v(" "),s("li",[t._v("\n            文章中包含未明确标明\n            "),s("sup",[t._v("\n              1\n              "),s("div",{staticClass:"sup-tips",staticStyle:{display:"none"}},[t._v("\n                未明确标明指文章中没有明确的文字说明\n                "),s("div",{staticClass:"pointer"})])]),t._v(" 的返利链接、推广链接、邀请红包等内容；\n          ")]),t._v(" "),s("li",[t._v("使用特殊符号、图片等方式规避广告内容审核的广告内容。")])]),t._v(" "),s("h3",[t._v("3. 恶意行为，如：")]),t._v(" "),s("ul",[s("li",[t._v("重复发布干扰正常用户体验的内容；")]),t._v(" "),s("li",[t._v("发布盗版相关内容；")]),t._v(" "),s("li",[t._v("冒充他人，通过头像、用户名等个人信息暗示自己与他人或机构相等同或有关联；")]),t._v(" "),s("li",[t._v("发布含有潜在危险的内容，或使用第三方网站伪造跳转链接，如钓鱼网站、木马、病毒网站等；")]),t._v(" "),s("li",[t._v("恶意对抗行为，包括但不限于使用变体、谐音等方式规避安全审查，明知相关行为违反法律法规和社区规范仍然发布等；")])]),t._v(" "),s("h2",[t._v("违规处理方式")]),t._v(" "),s("ul",[s("li",[t._v("对于文章涉及「违反法律法规」的，本平台将删除相关文章、并永久封停发布相关文章的用户账号，终止用户继续使用本平台；")]),t._v(" "),s("li",[t._v("对于文章涉及「不友善行为」、「发布广告垃圾信息」、「恶意行为」的，本平台将视严重程度采取以下措施：")]),t._v(" "),s("ul",[s("li",[t._v("对发布相关文章的用户进行不低于 3 天的文章禁言处理；")]),t._v(" "),s("li",[t._v("警告发布相关文章的用户，并建议立即按要求删改文章；")]),t._v(" "),s("li",[t._v("管理员直接修改或删除相关文章；")]),t._v(" "),s("li",[t._v("\n              永久封停账号，终止发布相关文章的用户继续使用本平台。\n              "),s("br")])]),t._v(" "),s("li",[t._v("对于屡次违规的用户，本平台将终止用户继续使用本平台。")])]),t._v(" "),s("p",[t._v("用户如发现文章存在上述违规行为，可联系网站管理员进行反馈。")]),t._v(" "),s("p",[t._v("为维护本平台良好的氛围，我们会根据平台实际运营情况持续完善这个规范。")]),t._v(" "),s("p",[t._v("本规范自 2019 年 7 月 12 日起正式生效。")]),t._v(" "),s("p",[s("br")])])])])])}],!1,null,"04e960f6",null);e.default=n.exports},taYa:function(t,e,s){"use strict";var a=s("sPx/");s.n(a).a},thuk:function(t,e,s){"use strict";var a=s("itk0");s.n(a).a},u6Lb:function(t,e,s){},upuQ:function(t,e,s){},"v/KW":function(t,e,s){"use strict";var a=s("Kvkj"),i=s("IodM"),n={name:"CommentForm",data:()=>({commentContent:"",faceVisible:!1}),props:{type:{type:String,default:"parent"},reply_uid:{default:""},reply_id:{default:""},parent_id:{default:""},dynamicId:{default:""}},methods:{getParams(){return{dynamic_id:this.dynamicId,content:this.commentContent,reply_uid:this.reply_uid,reply_id:this.reply_id,parent_id:this.parent_id}},changeFace(t){this.faceVisible=!1,this.commentContent=this.commentContent+t.face_text},submitComment(){if(!this.commentContent)return this.$message.warning("请填写评论内容"),!1;var t=this.getParams();Object(i.a)({url:"/dynamic-comment/create",method:"post",parameter:t}).then(t=>{this.commentContent="",this.$emit("commentChange",t)}).catch(t=>{this.commentContent=""})}},computed:{article(){return this.$store.state.article.article||{}},personalInfo(){return this.$store.state.personalInfo||{}}},components:{Face:a.d,Popover:a.g}},o=(s("TZI6"),s("Yj/X")),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment-form",attrs:{id:"comment_form"}},[s("div",{staticClass:"comment-avatar"},[t.personalInfo.islogin?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.personalInfo.user.avatar,expression:"personalInfo.user.avatar"}],staticClass:"box-image",attrs:{alt:""}}):s("img",{staticClass:"box-image",attrs:{src:"/default/img/avatar.jpeg",alt:""}})]),t._v(" "),s("div",{staticClass:"form-item",staticStyle:{"margin-left":"45px"}},[s("div",{staticClass:"input-view"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"txt long-txt textarea ",attrs:{name:"comment"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-item form-btns clearfix"},[s("div",{staticClass:"left-view"},[s("Popover",{attrs:{visible:t.faceVisible},on:{"update:visible":function(e){t.faceVisible=e}}},[t.faceVisible?s("Face",{on:{changeFace:t.changeFace}}):t._e(),t._v(" "),s("i",{staticClass:"face-icon el-icon-picture-outline-round",attrs:{slot:"button"},slot:"button"})],1)],1),t._v(" "),s("div",{staticClass:"right-view"},[s("button",{staticClass:"form-btn",attrs:{type:"submit"},on:{click:t.submitComment}},[t._v("评论")])])])])])}),[],!1,null,"63957fa3",null);e.a=r.exports},"v6l+":function(t,e,s){"use strict";s.r(e);var a=s("R3xZ"),i=s("/W3c"),n=s("4AYe"),o=s("iHbI"),r=s("Kvkj"),l=s("7Qib"),c=s("m0go"),m=s("YP4+"),d={name:"dynamic",minixs:[c.a],metaInfo(){return{title:this.topicInfo.name+"-话题-"+this.website.meta.website_name||"",meta:[{name:"description",content:`${this.topicInfo.name}-${this.topicInfo.description||""}`}],htmlAttrs:{lang:"zh"},script:[...l.a.resource({route:this.$route,config:this.website.config}),...l.b.statisticsCode({route:this.$route,googleCode:this.website.config.googleCode,random:""})],__dangerouslyDisableSanitizers:["script"]}},data:()=>({afferentTopic:"",topicInfo:{},page:1,isLoading:!1,isMore:!0,list:[]}),created(){this.afferentTopic=this.$route.params.dynamicTopicId},watch:{$route(t,e){this.page=1,this.isLoading=!1,this.isMore=!0,this.list=[],this.infiniteHandler(),this.getDynamicTopicInfo()}},mounted(){this.$store.dispatch("user/GET_USER_INFO_ALL",{uid:this.personalInfo.user.uid}),this.getDynamicTopicInfo()},methods:{infiniteHandler(){this.isLoading=!0;let t=this.list;this.$store.dispatch("dynamic/GET_DYNAMIC_LIST",{topic_id:this.$route.params.dynamicTopicId,page:this.page,isCommit:!1,sort:this.$route.query.sort||""}).then(e=>{this.isLoading=!1,this.list=[...t,...e.data.list],10===e.data.list.length?this.page+=1:this.isMore=!1}).catch(t=>{this.isMore=!1})},dynamicSubmit(){"new"!==this.$route.query.sort?this.$router.push({name:"dynamicTopicView",params:{dynamicTopicId:this.afferentTopic},query:{sort:"new"}}):window.location.reload()},getDynamicTopicInfo(){this.$store.dispatch("dynamic/GET_DYNAMIC_TOPIC_INFO",{topic_id:this.$route.params.dynamicTopicId||""}).then(t=>{this.topicInfo=t.data.info||{}})},async subscribeDynamicTopic(){await this.$store.dispatch("common/SET_ATTENTION",{associate_id:this.topicInfo.id,type:m.i.dynamic_topic}).then(t=>{"success"===t.state&&("enter"===t.data.type?this.topicInfo.attention_count=Number(this.topicInfo.attention_count)+1:this.topicInfo.attention_count-=1,this.$store.dispatch("user/GET_USER_INFO_ALL",{uid:this.personalInfo.user.uid}),this.$message.success(t.message))})}},computed:{...Object(o.b)(["personalInfo","dynamic","user","website"]),isRssDynamicTopic(){return!!this.personalInfo.islogin&&~this.user.allRssDynamicTopicId.indexOf(this.topicInfo.id)}},components:{dynamicItem:a.a,dynamicWrite:i.a,dynamicAside:n.a,ScrollLoading:r.h}},u=(s("iT2u"),s("Yj/X")),_=Object(u.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"dynamic-topic-view"}},[s("div",{staticClass:"container dynamic-container"},[s("div",{staticClass:"row dynamic-main"},[s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8 left"},[s("div",{staticClass:"stream-wrapper"},[t.personalInfo.islogin?s("div",{staticClass:"edit-view client-card"},[t.personalInfo.islogin?s("dynamic-write",{attrs:{afferentTopic:t.afferentTopic},on:{changeDynamicWrite:t.dynamicSubmit}}):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"sort client-card"},[s("router-link",{staticClass:"topic-title",attrs:{to:{name:"dynamicTopicView",params:{dynamicTopicId:t.afferentTopic}}}},[t._v("推荐")]),t._v(" "),s("router-link",{staticClass:"topic-title",attrs:{to:{name:"dynamicTopicView",params:{dynamicTopicId:t.afferentTopic},query:{sort:"new"}}}},[t._v("最新")])],1),t._v(" "),s("div",{staticClass:"dy-view"},[s("scroll-loading",{attrs:{isLoading:t.isLoading,isMore:t.isMore},on:{"scroll-loading":t.infiniteHandler}},t._l(t.list,(function(t,e){return s("div",{key:e,staticClass:"dy-item client-card"},[s("dynamic-item",{attrs:{dynamicItem:t}})],1)})),0)],1)])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4"},[s("aside",{staticClass:"topic-side topic-side sidebar client-card"},[s("div",{staticClass:"topic-box"},[s("div",{staticClass:"wallpaper"},[s("span",{style:"background-image: url("+t.topicInfo.icon+");"})]),t._v(" "),s("div",{staticClass:"content"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.topicInfo.icon,expression:"topicInfo.icon"}],staticClass:"icon",attrs:{alt:""}}),t._v(" "),s("div",{staticClass:"title"},[t._v(t._s(t.topicInfo.name))]),t._v(" "),t.personalInfo.islogin?s("span",{staticClass:"followed",class:{active:t.isRssDynamicTopic},on:{click:t.subscribeDynamicTopic}},[t._v(t._s(t.isRssDynamicTopic?"已关注":"+ 关注"))]):t._e(),t._v(" "),s("div",{staticClass:"describe"},[s("div",{staticClass:"desc-title"},[t._v("话题介绍:")]),s("span",[t._v(t._s(t.topicInfo.description))]),t._v(" "),s("div",{staticClass:"limit-ctl-box"})])]),t._v(" "),s("div",{staticClass:"stat-box"},[s("li",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(t._s(t.topicInfo.dynamic_count))]),t._v(" "),s("div",{staticClass:"title"},[t._v("片刻")])]),t._v(" "),s("li",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(t._s(t.topicInfo.attention_count))]),t._v(" "),s("div",{staticClass:"title"},[t._v("关注")])])])])])])])])])}),[],!1,null,"0e313650",null);e.default=_.exports},vPvB:function(t,e,s){"use strict";var a=s("ovrn");s.n(a).a},vyXx:function(t,e,s){"use strict";var a=s("Xjtm");s.n(a).a},wEEM:function(t,e,s){"use strict";var a=s("Q1UO");s.n(a).a},we5D:function(t,e,s){"use strict";var a=s("ZAAj");s.n(a).a},"x2A+":function(t,e,s){"use strict";s.r(e);var a=s("iHbI"),i=s("vuaj"),n=s.n(i),o=s("qYcz"),r=s("Kvkj"),l=s("YP4+"),c={name:"ArticleItem",props:{articleItem:{type:Object}},data:()=>({statusList:l.l,statusListText:l.m,articleTypeList:l.b}),methods:{deleteArticle(){this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("user/DELETE_ARTICLE",{aid:this.articleItem.aid}).then(t=>{this.$message.success("删除成功"),this.$emit("delete-change")})}).catch(()=>{this.$message.warning("取消删除")})},commandChange(t){"delete"!==t.name?this.$router.push(t):this.deleteArticle()}},components:{Dropdown:r.c},computed:{...Object(a.b)(["personalInfo","user"])}},m=(s("ByEM"),s("Yj/X")),d=Object(m.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"content-box content-box-index"},[s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-row title-row"},[s("router-link",{staticClass:"title",attrs:{to:{name:"article",params:{aid:t.articleItem.aid}}}},[t._v(t._s(t.articleItem.title))])],1),t._v(" "),t.personalInfo.islogin&&t.personalInfo.user.uid===t.user.user.uid?s("div",{staticClass:"operat-view"},[s("Dropdown",[s("div",{staticClass:"operat-view-icon el-dropdown-link",attrs:{slot:"button"},slot:"button"},[s("i",{staticClass:"el-icon-more"})]),t._v(" "),s("div",{staticClass:"dropdown-menu-view"},[s("div",{staticClass:"dropdown-menu-item",on:{click:function(e){return t.commandChange({name:"Write",params:{type:t.articleItem.aid}})}}},[t._v("\n            修改\n          ")]),t._v(" "),s("div",{staticClass:"dropdown-menu-item",on:{click:function(e){return t.commandChange({name:"delete"})}}},[t._v("\n            删除\n          ")])])])],1):t._e(),t._v(" "),s("div",{staticClass:"info-row meta-row"},[s("ul",{staticClass:"meta-list"},[s("li",{staticClass:"item item-icon read-count"},[s("i",{staticClass:"el-icon-view"}),t._v(" "),s("strong",{domProps:{textContent:t._s(t.articleItem.read_count)}})]),t._v(" "),s("li",{staticClass:"item item-icon like-article"},[s("i",{staticClass:"el-icon-star-off"}),t._v(" "),s("strong",{domProps:{textContent:t._s(t.articleItem.thumb_count)}})]),t._v(" "),s("li",{staticClass:"item item-icon comment-count"},[s("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),s("strong",{domProps:{textContent:t._s(t.articleItem.comment_count)}})]),t._v(" "),s("li",{staticClass:"item",domProps:{textContent:t._s(t.articleItem.create_dt)}}),t._v(" "),t.articleItem.tag_ids?s("li",{staticClass:"item"},t._l(t.articleItem.tag,(function(e,a){return s("router-link",{key:a,staticClass:"tag-class frontend",attrs:{to:{name:"article_tag",params:{en_name:e.en_name}}}},[t._v(t._s(e.name))])})),1):t._e(),t._v(" "),s("li",{staticClass:"item"},[t._v("\n          "+t._s(t.articleTypeList[t.articleItem.type])+"\n        ")]),t._v(" "),t.articleItem.is_public?t._e():s("li",{staticClass:"item public-status"},[s("span",[t._v("仅自己可见")])]),t._v(" "),t.articleItem.status===t.statusList.reviewFail?s("li",{staticClass:"item",staticStyle:{color:"#F07178"}},[t._v(t._s(t.statusListText[t.articleItem.status])+":"+t._s(t.articleItem.rejection_reason))]):t._e()])]),t._v(" "),t.articleItem.article_blog?s("div",{staticClass:"info-row footer-view"},[s("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{uid:t.articleItem.user.uid,routeType:"article"}}}},[t._v(t._s(t.articleItem.user.nickname))]),t._v(" "),s("span",[t._v("发布于专栏")]),t._v(" "),t.articleItem.article_blog?s("router-link",{staticClass:"article-blog",attrs:{to:{name:"articleBlog",params:{blogId:t.articleItem.article_blog.blog_id}}}},[t._v("\n        "+t._s(t.articleItem.article_blog.name)+"\n      ")]):s("span",{staticClass:"article-blog"},[t._v("正在审核中的专栏")])],1):t._e()]),t._v(" "),t.articleItem.cover_img?s("div",{staticClass:"lazy thumb thumb loaded"},[s("router-link",{attrs:{to:{name:"article",params:{aid:t.articleItem.aid}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.articleItem.cover_img,expression:"articleItem.cover_img"}],staticClass:"box-image",attrs:{alt:""}})])],1):t._e()])}),[],!1,null,"24370205",null).exports,u={name:"userArticle",data:()=>({isCreateBlogShow:!1,isLoading:!1,articleType:l.a,articleTypeList:l.b,myArticle:{list:[],count:0,page:1,pageSize:10}}),created(){this.getUserArticleBlogList(),this.getMyArticleList()},watch:{$route(t,e){this.getMyArticleList()}},methods:{getMyArticleList(){this.isLoading=!0,this.$store.dispatch("user/USER_MY_ARTICLE",{uid:this.$route.params.uid,blog_id:this.$route.query.blog_id||"all",type:this.$route.query.type||"",page:this.myArticle.page||1,pageSize:this.myArticle.pageSize||10}).then(t=>{this.myArticle=t.data,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},pageChange(t){this.myArticle.page=t,this.getMyArticleList()},updateArticleList(){this.getMyArticleList()},async getUserArticleBlogList(){await this.$store.dispatch("user/GET_USER_ARTICLE_BLOG_ALL",{uid:this.$route.params.uid})}},computed:{...Object(a.b)(["personalInfo","user"]),currentBlogId(){return this.$route.query.blog_id||"all"},userArticleBlogAll(){return this.$store.state.user.user_article_blog||[]}},components:{UserArticleItem:d,UploadImage:r.i,Page:r.f}},_=(s("we5D"),Object(m.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user-center-article-view"},[s("ul",{staticClass:"blog-list"},[s("li",{staticClass:"title"},[t._v("个人专栏：")]),t._v(" "),s("li",{staticClass:"blog-list-item",class:{current:!t.$route.query.blog_id||"all"===t.$route.query.blog_id}},[s("router-link",{attrs:{to:{name:"user",query:{blog_id:"all"},params:{routeType:"article"}}}},[s("span",{staticClass:"name"},[t._v("全部")])])],1),t._v(" "),t._l(t.userArticleBlogAll,(function(e,a){return s("li",{key:a,staticClass:"blog-list-item",class:{current:e.blog_id==t.$route.query.blog_id}},[s("router-link",{staticClass:"avatar",attrs:{to:{name:"user",query:{blog_id:e.blog_id},params:{routeType:"article"}}}},[s("span",{staticClass:"name"},[t._v(t._s(e.name))])])],1)})),t._v(" "),t.personalInfo.user.uid===t.user.user.uid?[s("li",{staticClass:"blog-list-item"},[s("router-link",{staticClass:"btn-user-blog",attrs:{to:{name:"user",params:{routeType:"blog"}}}},[t._v("\n          管理个人专栏\n        ")])],1)]:t._e()],2),t._v(" "),s("ul",{staticClass:"article-type"},[s("li",{class:{active:!t.$route.query.type}},[s("router-link",{attrs:{to:{name:"user",query:{blog_id:t.$route.query.blog_id||"all",type:""},params:{routeType:"article"}}}},[s("span",{staticClass:"name"},[t._v("全部")])])],1),t._v(" "),t._l(t.articleTypeList,(function(e,a){return s("li",{key:a,class:{active:t.$route.query.type===a}},[s("router-link",{attrs:{to:{name:"user",query:{blog_id:t.$route.query.blog_id||"all",type:a},params:{routeType:"article"}}}},[s("span",{staticClass:"name"},[t._v(t._s(e))])])],1)}))],2),t._v(" "),s("div",{staticClass:"list-container"},[s("div",{staticClass:"article-view"},t._l(t.myArticle.list,(function(e,a){return s("div",{key:a,staticClass:"article-item"},[s("UserArticleItem",{attrs:{articleItem:e},on:{"delete-change":t.updateArticleList}})],1)})),0),t._v(" "),s("Page",{attrs:{total:Number(t.myArticle.count),pageSize:Number(t.myArticle.pageSize),page:Number(t.myArticle.page)||1},on:{pageChange:t.pageChange}})],1)])}),[],!1,null,"16068f74",null).exports),p={name:"Blog",asyncData:async({store:t,route:e})=>t.dispatch("user/GET_USER_ARTICLE_BLOG_LIST",{uid:e.params.uid,page:e.query.page||1,pageSize:e.query.pageSize||10}),data:()=>({modelName:l.i,isCreateBlogShow:!1,isCreate:!0,isLoading:!1,articleBlog:{count:0,list:[],page:1,pageSize:10},blogForm:{blog_id:"",blog_name:"",en_name:"",description:"",icon:"",tag_ids:""}}),mounted(){this.$store.dispatch("articleTag/GET_ARTICLE_TAG_ALL"),this.getArticleBlogList()},methods:{getArticleBlogList(){this.isLoading=!0,this.$store.dispatch("user/GET_USER_ARTICLE_BLOG_LIST",{uid:this.$route.params.uid,page:this.articleBlog.page||1,pageSize:this.articleBlog.pageSize||10}).then(t=>{this.articleBlog=t.data,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},pageChange(t){this.articleBlog.page=t,this.getArticleBlogList()},createEditArticleBlog(t){this.isCreateBlogShow=!0,this.isCreate=!0,this.blogForm.blog_name="",this.blogForm.en_name="",this.blogForm.description="",this.blogForm.icon="",this.blogForm.tag_ids=""},changeArticleBlogImg({formData:t,config:e}){this.$store.dispatch("articleBlog/UPLOAD_ARTICLE_BLOG_IMG",t).then(t=>{"success"===t.state?this.blogForm.icon=t.data.img:this.$message.warning(t.message)})},setBlogTime:t=>t.create_date===t.update_date?`创建于：${t.create_dt}`:`更新于：${t.update_dt}`,setIsEditCreateArticleBlog(){let t="",e={};t=this.isCreate?"user/CREATE_ARTICLE_BLOG":"user/UPDATE_ARTICLE_BLOG",e={...this.blogForm,tag_ids:this.blogForm.tag_ids},this.$store.dispatch(t,{...e}).then(t=>{"success"===t.state?(this.isEdit=!1,this.$message.success(t.message),this.isCreateBlogShow=!1,this.getArticleBlogList()):this.$message.warning(t.message)})},deleteArticleBlog(t){this.$store.dispatch("user/DELETE_ARTICLE_BLOG",{blog_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),window.location.reload()):this.$message.warning(t.message)})},commandChange(t){"edit"===t.type?(this.isCreateBlogShow=!0,this.isCreate=!1,this.blogForm=t.articleBlogItem,this.blogForm.blog_name=t.articleBlogItem.name,t.articleBlogItem.tag_ids&&(this.blogForm.tag_ids=t.articleBlogItem.tag_ids.split(","))):"delete"===t.type&&this.$confirm("此操作将永久删除该个人专栏, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.deleteArticleBlog(t.articleBlogItem.blog_id)}).catch(()=>{})},setLikeArticleBlog(t){this.$store.dispatch("common/SET_COLLECT",{associate_id:t,type:l.i.article_blog}).then(t=>{"success"===t.state?(this.$message.success(t.message),window.location.reload()):this.$message.warning(t.message)})},isLike(t){let e=[];return t.likeUserIds.map(t=>{e.push(t.uid)}),~e.indexOf(Number(this.personalInfo.user.uid))?{status:!0,text:"已关注"}:{status:!1,text:"关注"}}},computed:{...Object(a.b)(["user","personalInfo"]),articleTagAll(){return this.$store.state.articleTag.article_tag_all}},components:{Page:r.f,UploadImage:r.i,Dialog:r.b,Dropdown:r.c}},v=(s("4DUp"),Object(m.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user-article-blog"},[s("button",{staticClass:"btn create-article-blog",on:{click:function(e){return t.createEditArticleBlog("create")}}},[t._v("\n    创建个人专栏\n  ")]),t._v(" "),s("div",{staticClass:"user-article-blog-view row"},t._l(t.articleBlog.list,(function(e,a){return s("div",{key:a,staticClass:"col-xs-12 col-sm-6 col-md-6"},[s("div",{staticClass:"user-article-blog-item "},[s("div",{staticClass:"user-article-blog-top"},[s("router-link",{staticClass:"article-blog-icon",attrs:{to:{name:"articleBlog",params:{blogId:e.blog_id}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.icon,expression:"articleBlogItem.icon"}],staticClass:"article-blog-icon-img",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"user-article-blog-info"},[s("router-link",{staticClass:"name",attrs:{to:{name:"articleBlog",params:{blogId:e.blog_id}}}},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"time-view"},[s("span",{staticClass:"time"},[t._v(t._s(t.setBlogTime(e)))])])],1),t._v(" "),t.personalInfo.islogin&&t.personalInfo.user.uid===e.user.uid?s("div",{staticClass:"operat-view"},[s("Dropdown",[s("div",{staticClass:"el-dropdown-link",attrs:{slot:"button"},slot:"button"},[s("i",{staticClass:"el-icon-more"})]),t._v(" "),s("div",{staticClass:"dropdown-menu-view"},[s("div",{staticClass:"dropdown-menu-item",on:{click:function(s){return t.commandChange({type:"edit",articleBlogItem:e})}}},[t._v("\n                  修改\n                ")]),t._v(" "),s("div",{staticClass:"dropdown-menu-item",on:{click:function(s){return t.commandChange({type:"delete",articleBlogItem:e})}}},[t._v("\n                  删除\n                ")])])])],1):t._e()],1),t._v(" "),s("div",{staticClass:"user-article-blog-tag"},[s("span",{staticClass:"title"},[t._v("所属标签:")]),t._v(" "),e.tag?t._l(e.tag,(function(e,a){return s("router-link",{key:a,staticClass:"tag-class frontend",attrs:{to:{name:"article_tag",params:{en_name:e.en_name}}}},[t._v(t._s(e.name))])})):[s("span",{staticClass:"hint"},[t._v("\n              暂时没有加入标签，加入标签更能容易被搜索到\n            ")])]],2),t._v(" "),s("div",{staticClass:"user-article-blog-main"},[3!==e.status?s("p",{staticClass:"description"},[t._v("\n            介绍："+t._s(e.description||"没有写入介绍")+"\n          ")]):s("p",{staticClass:"description faild"},[t._v("\n            审核失败 原因："+t._s(e.rejection_reason)+"\n          ")])]),t._v(" "),s("div",{staticClass:"user-article-blog-footer"},[s("ul",{staticClass:"statistics"},[s("li",{staticClass:"item"},[s("i",{staticClass:"el-icon-document"}),t._v(" "),s("span",{staticClass:"article-count"},[t._v(t._s(e.articleCount))])]),t._v(" "),s("li",{staticClass:"item item-icon read-count"},[s("i",{staticClass:"el-icon-view"}),t._v(" "),s("span",{domProps:{textContent:t._s(e.read_count||0)}})]),t._v(" "),s("li",{staticClass:"item item-icon like-article"},[s("i",{staticClass:"el-icon-star-off"}),t._v(" "),s("span",{domProps:{textContent:t._s(e.likeCount||0)}})]),t._v(" "),~[2,4].indexOf(e.status)&&t.personalInfo.islogin?s("li",{staticClass:"item attention",on:{click:function(s){return t.setLikeArticleBlog(e.blog_id)}}},[s("span",{class:{active:t.isLike(e).status}},[t._v(t._s(t.isLike(e).text))])]):t._e()])])])])})),0),t._v(" "),s("Page",{attrs:{total:Number(t.articleBlog.count),pageSize:Number(t.articleBlog.pageSize),page:Number(t.articleBlog.page)||1},on:{pageChange:t.pageChange}}),t._v(" "),s("Dialog",{attrs:{visible:t.isCreateBlogShow,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"380px"},on:{"update:visible":function(e){t.isCreateBlogShow=e}}},[s("div",{staticClass:"blog-modal"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"blog-name-input"}},[t._v("专题名字：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.blogForm.blog_name,expression:"blogForm.blog_name"}],staticClass:"form-control",attrs:{type:"email",placeholder:"请输入个人文章专题名字"},domProps:{value:t.blogForm.blog_name},on:{input:function(e){e.target.composing||t.$set(t.blogForm,"blog_name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"blog-name-input"}},[t._v("专题英文名字：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.blogForm.en_name,expression:"blogForm.en_name"}],staticClass:"form-control",attrs:{type:"email",placeholder:"请输入个人文章专题英文名字"},domProps:{value:t.blogForm.en_name},on:{input:function(e){e.target.composing||t.$set(t.blogForm,"en_name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group avatar-uploader avatar-uploader"},[s("label",{attrs:{for:"blog-name-input"}},[t._v("专栏封面图片（非必传）：")]),t._v(" "),t.blogForm.icon?s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.blogForm.icon,expression:"blogForm.icon"}],staticClass:"avatar-img",attrs:{alt:""}})]):t._e(),t._v(" "),s("div",{staticClass:"action-box"},[s("div",{staticClass:"hint"},[t._v("支持 jpg、png 格式大小 1M 以内的图片")]),t._v(" "),s("upload-image",{staticClass:"upload-image",on:{changeUpload:t.changeArticleBlogImg}},[t._v("上传图片")])],1)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"blog-name-input"}},[t._v("选择标签：")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.blogForm.tag_ids,expression:"blogForm.tag_ids"}],attrs:{placeholder:"请选择"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.blogForm,"tag_ids",e.target.multiple?s:s[0])}}},t._l(t.articleTagAll,(function(t,e){return s("option",{key:e,attrs:{label:t.name},domProps:{value:t.tag_id}})})),0)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"article-blog-description"}},[t._v("专题描述：")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.blogForm.description,expression:"blogForm.description"}],staticClass:"form-control",attrs:{type:"password",placeholder:"请输入个人文章专题描述"},domProps:{value:t.blogForm.description},on:{input:function(e){e.target.composing||t.$set(t.blogForm,"description",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"footer-view"},[s("button",{staticClass:"btn btn-primary blog-modal-create",attrs:{type:"button"},on:{click:t.setIsEditCreateArticleBlog}},[t._v("\n          创建\n        ")]),t._v(" "),s("button",{staticClass:"btn btn-secondary blog-modal-cancel",attrs:{type:"button"},on:{click:function(e){t.isCreateBlogShow=!1}}},[t._v("\n          取消\n        ")])])])])],1)}),[],!1,null,"dce015c0",null).exports),g={name:"Books",data:()=>({isLoading:!1,isFree:l.e,isFreeText:l.f,books:{count:0,list:[],page:1,pageSize:10}}),mounted(){this.getBooksList(),this.$store.dispatch("articleTag/GET_ARTICLE_TAG_ALL")},methods:{getBooksList(){this.isLoading=!0,this.$store.dispatch("user/GET_BOOKS_LIST",{uid:this.$route.params.uid,page:this.books.page||1,pageSize:this.books.pageSize||10}).then(t=>{this.books=t.data,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},createBooks(){this.$store.state.personalInfo.islogin?this.$router.push({name:"booksWrite",params:{type:"create"}}):this.$router.push({name:"signIn"})},commandChange(t){"edit"===t.type?this.$router.push({name:"booksWrite",params:{type:"update"},query:{books_id:t.booksItem.books_id}}):"delete"===t.type&&this.$confirm("此操作将永久删除该小书, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.deleteBooks(t.booksItem.books_id)}).catch(()=>{})},deleteBooks(t){this.$store.dispatch("books/DELETE_BOOKS",{books_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),window.location.reload()):this.$message.warning(t.message)})},setBlogTime:t=>t.create_date===t.update_date?`创建于：${t.create_dt}`:`更新于：${t.update_dt}`,deleteArticleBlog(t){this.$store.dispatch("user/DELETE_ARTICLE_BLOG",{blog_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.getBooksList()):this.$message.warning(t.message)})},pageChange(t){this.books.page=t,this.getBooksList()}},computed:{...Object(a.b)(["user","personalInfo"]),articleTagAll(){return this.$store.state.articleTag.article_tag_all}},components:{Page:r.f,UploadImage:r.i,Dropdown:r.c}},h=(s("o/YZ"),Object(m.a)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user-books"},[s("button",{staticClass:"btn create-book",on:{click:t.createBooks}},[t._v("创建小书")]),t._v(" "),s("div",{staticClass:"user-books-view row"},t._l(t.books.list,(function(e,a){return s("div",{key:a,staticClass:"col-xs-12 col-sm-6 col-md-6"},[s("div",{staticClass:"library-item clearfix"},[t.personalInfo.islogin&&t.personalInfo.user.uid===e.user.uid?s("div",{staticClass:"operat-view"},[s("Dropdown",[s("div",{staticClass:"el-dropdown-link",attrs:{slot:"button"},slot:"button"},[s("i",{staticClass:"el-icon-more"})]),t._v(" "),s("div",{staticClass:"dropdown-menu-view"},[s("div",{staticClass:"dropdown-menu-item",on:{click:function(s){return t.commandChange({type:"edit",booksItem:e})}}},[t._v("\n                修改\n              ")]),t._v(" "),s("div",{staticClass:"dropdown-menu-item",on:{click:function(s){return t.commandChange({type:"delete",booksItem:e})}}},[t._v("\n                删除\n              ")])])])],1):t._e(),t._v(" "),s("div",{staticClass:"library-item__thumb"},[s("router-link",{attrs:{to:{name:"book",params:{books_id:e.books_id}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cover_img,expression:"booksItem.cover_img"}],staticClass:"img-full",attrs:{lazy:"loaded"}})])],1),t._v(" "),s("div",{staticClass:"library-item__body"},[s("div",{staticClass:"library-item__title"},[s("router-link",{staticClass:"link-dark-major",attrs:{to:{name:"book",params:{books_id:e.books_id}}}},[t._v("\n              "+t._s(e.title)+"\n              "),s("span",{staticClass:"free",class:Number(e.is_free)===t.isFree.free?"yes":""},[t._v(t._s(t.isFreeText[e.is_free]))])])],1),t._v(" "),s("div",{staticClass:"library-item__info"},[s("span",[s("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(e.read_count||0)+"\n            ")]),s("span",{staticStyle:{"margin-left":"8px"}},[s("i",{staticClass:"el-icon-notebook-2"}),t._v(" "+t._s(e.bookCount||0)+"\n            ")]),t._v(" "),e.is_public?t._e():s("span",{staticClass:"public-tag"},[t._v("未公开")])]),t._v(" "),s("div",{staticClass:"library-item-tag"},[e.tag?t._l(e.tag,(function(e,a){return s("router-link",{key:a,staticClass:"tag-class frontend",attrs:{to:{name:"article_tag",params:{en_name:e.en_name}}}},[t._v(t._s(e.name))])})):[s("span",{staticClass:"hint"},[t._v("\n                暂时没有加入标签，加入标签更能容易被搜索到\n              ")])]],2)])])])})),0),t._v(" "),s("Page",{attrs:{total:Number(t.books.count),pageSize:Number(t.books.pageSize),page:Number(t.books.page)||1},on:{pageChange:t.pageChange}})],1)}),[],!1,null,"341620c0",null).exports),f={name:"Dynamic",data:()=>({isLoading:!1,dynamicList:{count:0,list:[],page:1,pageSize:10}}),created(){this.getPersonalDynamicList()},watch:{$route(t,e){this.getPersonalDynamicList()}},methods:{selectAttentionUserClass(t){let e=document.querySelectorAll(`.user-attention-${this.dynamicItem.user.uid}`);for(let s=0;s<e.length;s++)"attention"===t?(e[s].classList.add("active"),e[s].innerHTML="已关注"):(e[s].classList.remove("active"),e[s].innerHTML="关注")},commandChange(t){this.deleteDynamic(t.id)},contentRender(t){let e=t;return r.j.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e},deleteDynamic(t){this.$confirm("此操作将永久删除该动态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("dynamic/DELETE_DYNAMIC",{id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.getPersonalDynamicList()):this.$message.error(t.message)})}).catch(()=>{})},userThumdDynamic(t){if(!this.personalInfo.islogin)return this.$message.warning("请先登录"),!1;this.$store.dispatch("common/SET_THUMB",{associate_id:t.id,type:l.i.dynamic}).then(e=>{"success"===e.state?("enter"===e.data.type?t.thumbCount=Number(t.thumbCount)+1:"cancel"===e.data.type&&(t.thumbCount-=1),this.$store.dispatch("user/GET_ASSOCIATE_INFO")):this.$message.warning(e.message)}).catch((function(t){console.log(t)}))},imgAnalyze(t){let e=t.split(",")||[];return t.split(",").length>0?e:[]},pageChange(t){this.dynamicList.page=t,this.getPersonalDynamicList()},getPersonalDynamicList(){this.isLoading=!0,this.$store.dispatch("user/GET_PERSONAL_DYNAMIC_LIST",{uid:this.$route.params.uid,page:this.dynamicList.page||1,pageSize:this.dynamicList.pageSize||10}).then(t=>{this.dynamicList=t.data,this.isLoading=!1}).catch(()=>{this.isLoading=!1})}},components:{Page:r.f,Dropdown:r.c},computed:{...Object(a.b)(["user","personalInfo"])}},b=(s("gPNN"),Object(m.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user-dynamic"},[t._l(t.dynamicList.list,(function(e,a){return s("div",{key:a,staticClass:"user-dynamic-item"},[s("div",{staticClass:"dynamic-header-row"},[s("div",{staticClass:"account-group"},[s("div",{staticClass:"user-popover-box"},[s("router-link",{staticClass:"user-link",attrs:{to:{name:"user",params:{uid:e.user.uid}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.user.avatar,expression:"dynamicItem.user.avatar"}],staticClass:"avatar",attrs:{size:"size",alt:""}})])],1),t._v(" "),s("div",{staticClass:"dynamic-header-content"},[s("div",{staticClass:"user-popover-box"},[s("router-link",{staticClass:"username",attrs:{to:{name:"user",params:{uid:e.user.uid,routeType:"article"}}}},[t._v(t._s(e.user.nickname))])],1),t._v(" "),s("div",{staticClass:"meta-box"},[s("div",{staticClass:"meta-box-item position ellipsis"},[t._v("\n              @ "+t._s(e.user.introduction)+"\n            ")]),t._v(" "),s("div",{staticClass:"dot"},[t._v("·")]),t._v(" "),s("a",{staticClass:"meta-box-item time-box",attrs:{href:"javascript:;",target:"_blank",rel:""}},[s("time",{staticClass:"time",attrs:{title:e.create_dt}},[t._v(t._s(e.create_dt))])]),t._v(" "),s("div",{staticClass:"dot"},[t._v("·")]),t._v(" "),s("div",{staticClass:"meta-box-item like-action action",class:{active:~t.user.associateInfo.dynamicThumdId.indexOf(String(e.id))},on:{click:function(s){return t.userThumdDynamic(e)}}},[s("i",{staticClass:"el-icon-thumb"}),t._v(" "),s("span",{staticClass:"action-title"},[t._v(t._s(e.thumbCount))])]),t._v(" "),s("div",{staticClass:"dot"},[t._v("·")]),t._v(" "),s("div",{staticClass:"meta-box-item comment-action action",on:{click:function(e){t.isCommnet=!t.isCommnet}}},[s("i",{staticClass:"el-icon-chat-line-round"}),t._v(" "),s("span",{staticClass:"action-title"},[t._v(t._s(e.comment_count))])])])])])]),t._v(" "),s("div",{staticClass:"dynamic-content-row"},[s("div",{staticClass:"content-box content-box"},[s("div",{domProps:{innerHTML:t._s(t.contentRender(e.content))}}),t._v(" "),3===e.status?s("div",{staticClass:"limit-ctl-box"},[t._v("\n          审核失败原因："+t._s(e.rejection_reason)+"\n        ")]):t._e()])]),t._v(" "),2===e.type?s("div",{staticClass:"dynamic-image-row"},t._l(t.imgAnalyze(e.attach),(function(e,a){return e?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"url"}],key:a,staticClass:"preview-picture",staticStyle:{width:"100px",height:"100px"},attrs:{alt:""}}):t._e()})),0):t._e(),t._v(" "),3===e.type?s("div",{staticClass:"dynamic-link-row"},[s("a",{attrs:{href:e.attach,target:"_block"}},[t._v(t._s(e.attach))])]):t._e(),t._v(" "),e.topic?s("div",{staticClass:"dynamic-topic-row"},[s("router-link",{staticClass:"topic-title",attrs:{to:{name:"dynamicTopicView",params:{dynamicTopicId:e.topic.topic_id}}}},[t._v(t._s(e.topic.name))])],1):t._e(),t._v(" "),t.personalInfo.islogin&&t.personalInfo.user.uid===e.user.uid?s("div",{staticClass:"operat-view"},[s("Dropdown",[s("div",{staticClass:"el-dropdown-link",attrs:{slot:"button"},slot:"button"},[s("i",{staticClass:"el-icon-more"})]),t._v(" "),s("div",{staticClass:"dropdown-menu-view"},[s("div",{staticClass:"dropdown-menu-item",on:{click:function(s){return t.commandChange({name:"Write",id:e.id})}}},[t._v("\n            删除\n          ")])])])],1):t._e()])})),t._v(" "),s("Page",{attrs:{total:Number(t.dynamicList.count),pageSize:Number(t.dynamicList.pageSize),page:Number(t.dynamicList.page)||1},on:{pageChange:t.pageChange}})],2)}),[],!1,null,"764a249a",null).exports),C={name:"UserAttention",data:()=>({isLoading:!1,modelName:l.i,userAttentionList:{count:0,page:1,pageSize:10,list:[]}}),watch:{$route(t,e){this.getUserAttentionList()}},mounted(){this.getUserAttentionList()},methods:{getUserAttentionList(){this.$store.dispatch("user/GET_USER_ATTENTION_LIST",{uid:this.$route.params.uid,page:this.userAttentionList.page||1,any:this.$route.query.any||"me",pageSize:this.userAttentionList.pageSize||10}).then(t=>{this.userAttentionList=t.data,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},pageChange(t){this.userAttentionList.page=t,this.getUserAttentionList()},isAttention(t){let e=[];return!!(t.userAttentionIds&&t.userAttentionIds.length>0)&&(t.userAttentionIds.map(t=>{e.push(Number(t.uid))}),!!~e.indexOf(Number(this.personalInfo.user.uid)))},onUserAttention(t){this.$store.dispatch("common/SET_ATTENTION",{associate_id:t.user.uid,type:l.i.user,moreConfig:{direct:!0}}).then(t=>{this.getUserAttentionList(),this.$message.warning(t.message)}).catch((function(t){this.$message.warning(t)}))}},computed:{...Object(a.b)(["personalInfo"])},components:{Page:r.f}},y=(s("bHO7"),Object(m.a)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user-attention"},[s("div",{staticClass:"user-article-attention-any"},[s("router-link",{class:{active:"me"===t.$route.query.any||!t.$route.query.any},attrs:{to:{name:"user",query:{any:"me"},params:{routeType:"attention"}}}},[t._v("关注")]),t._v(" "),s("router-link",{class:{active:"other"===t.$route.query.any},attrs:{to:{name:"user",query:{any:"other"},params:{routeType:"attention"}}}},[t._v("粉丝")])],1),t._v(" "),s("ul",{staticClass:"user-article-attention-view"},t._l(t.userAttentionList.list,(function(e,a){return s("li",{key:a,staticClass:"item"},[s("div",{staticClass:"user"},[s("div",{staticClass:"lazy avatar avatar loaded",style:{"background-image":"url("+e.user.avatar+")"},attrs:{title:""}}),t._v(" "),s("div",{staticClass:"info-box"},[s("div",{staticClass:"username"},[s("router-link",{staticClass:"link",attrs:{to:{name:"user",params:{uid:e.user.uid,routeType:"article"}}}},[t._v(t._s(e.user.nickname))])],1),t._v(" "),s("div",{staticClass:"detail"},[t._v(t._s(e.user.introduction))])]),t._v(" "),s("button",{staticClass:"follow-btn",class:{active:t.isAttention(e)},on:{click:function(s){return t.onUserAttention(e)}}},[t._v("\n          "+t._s(t.isAttention(e)?"已关注":"关注")+"\n        ")])])])})),0),t._v(" "),s("div",{staticClass:"pagination"},[s("Page",{attrs:{total:Number(t.userAttentionList.count),pageSize:Number(t.userAttentionList.pageSize),page:Number(t.userAttentionList.page||1)},on:{pageChange:t.pageChange}})],1)])}),[],!1,null,"72f825b7",null).exports),w={name:"UserMessageItem",props:{MessageItem:{type:Object}},data:()=>({typeList:["","系统消息","喜欢文章","关注标签","用户关注","评论","动态评论"]}),methods:{deleteUserMessage(t){this.$confirm("此操作将永久该消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("user/DELETE_USER_MESSAGE",{user_message_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$emit("delete-change")):this.$message.warning(t.message)}).catch(t=>{console.log(t)})}).catch(()=>{})},commentRender(t){let e=t;return faceQQ.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}}},k=(s("RV7I"),Object(m.a)(w,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"user_message_list",staticClass:"user-center-message-item attention"},[s("div",{staticClass:"title"},[t._v(t._s(t.MessageItem.actionText)+" "+t._s(t.MessageItem.create_dt))]),t._v(" "),s("div",{staticClass:"main clearfix"},[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.MessageItem.sender.uid,routeType:"article"}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.MessageItem.sender.avatar,expression:"MessageItem.sender.avatar"}],staticClass:"avatar",attrs:{alt:""}}),t._v(" "),s("span",{staticClass:"nickname"},[t._v(t._s(t.MessageItem.sender.nickname))])]),t._v(" "),s("div",{staticClass:"content"},[t._v("关注了你")]),t._v(" "),s("span",{staticClass:"delete-message",on:{click:function(e){return t.deleteUserMessage(t.MessageItem.id)}}},[t._v("删除")])],1)])}),[],!1,null,"874313a8",null).exports),I={name:"UserMessageItem",props:{MessageItem:{type:Object}},data:()=>({statusList:l.l,modelName:l.i,userMessageTypeText:l.r,typeList:["","系统消息","喜欢文章","关注标签","用户关注","评论","动态评论"]}),methods:{deleteUserMessage(t){this.$confirm("此操作将永久该消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("user/DELETE_USER_MESSAGE",{user_message_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$emit("delete-change")):this.$message.warning(t.message)}).catch(t=>{console.log(t)})}).catch(()=>{})},commentRender(t){let e=t;return r.j.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}}},x=(s("wEEM"),Object(m.a)(I,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"user_message_list",staticClass:"user-center-message-item"},[s("div",{staticClass:"title"},[t._v("\n    "+t._s(t.MessageItem.actionText)+" "+t._s(t.MessageItem.create_dt)+"\n  ")]),t._v(" "),s("div",{staticClass:"main clearfix"},[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.MessageItem.sender.uid,routeType:"article"}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.MessageItem.sender.avatar,expression:"MessageItem.sender.avatar"}],staticClass:"avatar",attrs:{alt:""}}),t._v(" "),s("span",{staticClass:"nickname"},[t._v(t._s(t.MessageItem.sender.nickname))])]),t._v(" "),s("div",{staticClass:"content"},[t._v("\n      "+t._s(t.userMessageTypeText[t.MessageItem.type][t.MessageItem.action])+"\n    ")]),t._v(" "),s("div",{staticClass:"content-text"},[t.MessageItem.type===t.modelName.article?s("router-link",{attrs:{to:{name:"article",params:{aid:t.MessageItem.article.aid}}}},[t._v(t._s(t.MessageItem.article.title))]):t._e(),t._v(" "),t.MessageItem.type===t.modelName.dynamic?s("router-link",{attrs:{to:{name:"dynamicView",params:{dynamicId:t.MessageItem.dynamic.id}}}},[t._v(t._s(t.MessageItem.dynamic.content))]):t._e(),t._v(" "),t.MessageItem.type===t.modelName.books?s("router-link",{attrs:{to:{name:"book",params:{books_id:t.MessageItem.books.books_id}}}},[t._v(t._s(t.MessageItem.books.title))]):t._e(),t._v(" "),t.MessageItem.type===t.modelName.book?s("router-link",{attrs:{to:{name:"BookView",params:{books_id:t.MessageItem.book.books_id,book_id:t.MessageItem.book.book_id}}}},[t._v(t._s(t.MessageItem.book.title))]):t._e()],1),t._v(" "),s("span",{staticClass:"delete-message",on:{click:function(e){return t.deleteUserMessage(t.MessageItem.id)}}},[t._v("删除")])],1)])}),[],!1,null,"165b72cc",null).exports),T={name:"UserMessageItem",props:{MessageItem:{type:Object}},data:()=>({statusList:l.l,modelName:l.i,userMessageTypeText:l.r}),methods:{deleteUserMessage(t){this.$confirm("此操作将永久该消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("user/DELETE_USER_MESSAGE",{user_message_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$emit("delete-change")):this.$message.warning(t.message)}).catch(t=>{console.log(t)})}).catch(()=>{})},commentRender(t){let e=t;return faceQQ.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}}},$=(s("knsx"),Object(m.a)(T,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"user_message_list",staticClass:"user-center-message-item attention"},[s("div",{staticClass:"title"},[t._v(t._s(t.MessageItem.actionText)+" "+t._s(t.MessageItem.create_dt))]),t._v(" "),s("div",{staticClass:"main clearfix"},[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.MessageItem.sender.uid,routeType:"article"}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.MessageItem.sender.avatar,expression:"MessageItem.sender.avatar"}],staticClass:"avatar",attrs:{alt:""}}),t._v(" "),s("span",{staticClass:"nickname"},[t._v(t._s(t.MessageItem.sender.nickname))])]),t._v(" "),s("div",{staticClass:"content"},[t._v("\n      "+t._s(t.userMessageTypeText[t.MessageItem.type][t.MessageItem.action])+"\n      "),s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"article",params:{aid:t.MessageItem.article.aid}}}},[t._v(t._s(t.MessageItem.article.title))])],1),t._v(" "),s("span",{staticClass:"delete-message",on:{click:function(e){return t.deleteUserMessage(t.MessageItem.id)}}},[t._v("删除")])],1)])}),[],!1,null,"92d9ebaa",null).exports),A={name:"UserMessageItem",props:{MessageItem:{type:Object}},data:()=>({statusList:l.l,modelName:l.i,userMessageTypeText:l.r,typeList:["","系统消息","喜欢文章","关注标签","用户关注","评论","动态评论"]}),methods:{deleteUserMessage(t){this.$confirm("此操作将永久该消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("user/DELETE_USER_MESSAGE",{user_message_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$emit("delete-change")):this.$message.warning(t.message)}).catch(t=>{console.log(t)})}).catch(()=>{})},commentRender(t){let e=t;return r.j.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}}},L=(s("Bspf"),Object(m.a)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"user_message_list",staticClass:"user-center-message-item"},[s("div",{staticClass:"title"},[t._v("\n    "+t._s(t.MessageItem.actionText)+" "+t._s(t.MessageItem.create_dt)+"\n  ")]),t._v(" "),s("div",{staticClass:"main clearfix"},[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.MessageItem.sender.uid,routeType:"article"}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.MessageItem.sender.avatar,expression:"MessageItem.sender.avatar"}],staticClass:"avatar",attrs:{alt:""}}),t._v(" "),s("span",{staticClass:"nickname"},[t._v(t._s(t.MessageItem.sender.nickname))])]),t._v(" "),s("div",{staticClass:"content"},[t._v("\n      "+t._s(t.userMessageTypeText[t.MessageItem.type][t.MessageItem.action])+"\n    ")]),t._v(" "),s("div",{staticClass:"content-text"},[t.MessageItem.type===t.modelName.article?s("router-link",{attrs:{to:{name:"article",params:{aid:t.MessageItem.article.aid}}}},[t._v(t._s(t.MessageItem.article.title))]):t._e(),t._v(" "),t.MessageItem.type===t.modelName.dynamic?s("router-link",{attrs:{to:{name:"dynamicView",params:{dynamicId:t.MessageItem.dynamic.id}}}},[t._v(t._s(t.MessageItem.dynamic.content))]):t._e(),t._v(" "),t.MessageItem.type===t.modelName.books?s("router-link",{attrs:{to:{name:"book",params:{books_id:t.MessageItem.books.books_id}}}},[t._v(t._s(t.MessageItem.books.title))]):t._e(),t._v(" "),t.MessageItem.type===t.modelName.book?s("router-link",{attrs:{to:{name:"BookView",params:{books_id:t.MessageItem.book.books_id,book_id:t.MessageItem.book.book_id}}}},[t._v(t._s(t.MessageItem.book.title))]):t._e()],1),t._v(" "),s("span",{staticClass:"delete-message",on:{click:function(e){return t.deleteUserMessage(t.MessageItem.id)}}},[t._v("删除")])],1)])}),[],!1,null,"370e65be",null).exports),E={name:"UserMessageItem",props:{MessageItem:{type:Object}},data:()=>({modelName:l.i,userMessageTypeText:l.r}),methods:{deleteUserMessage(t){this.$confirm("此操作将永久该消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("user/DELETE_USER_MESSAGE",{user_message_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$emit("delete-change")):this.$message.warning(t.message)}).catch(t=>{console.log(t)})}).catch(()=>{})},commentRender(t){let e=t;return faceQQ.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}}},S=(s("Yx7G"),Object(m.a)(E,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"user_message_list",staticClass:"user-center-message-item attention"},[s("div",{staticClass:"title"},[t._v("\n    "+t._s(t.MessageItem.actionText)+" "+t._s(t.MessageItem.create_dt)+"\n  ")]),t._v(" "),s("div",{staticClass:"main clearfix"},[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.MessageItem.sender.uid,routeType:"article"}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.MessageItem.sender.avatar,expression:"MessageItem.sender.avatar"}],staticClass:"avatar",attrs:{alt:""}}),t._v(" "),s("span",{staticClass:"nickname"},[t._v(t._s(t.MessageItem.sender.nickname))])]),t._v(" "),s("div",{staticClass:"content"},[t._v("\n      "+t._s(t.userMessageTypeText[t.MessageItem.type][t.MessageItem.action])+"\n      "),t.MessageItem.type===t.modelName.article?s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"article",params:{aid:t.MessageItem.article.aid}}}},[t._v(t._s(t.MessageItem.article.title))]):t._e(),t._v(" "),t.MessageItem.type===t.modelName.dynamic?s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"dynamicView",params:{dynamicId:t.MessageItem.dynamic.id}}}},[t._v(t._s(t.MessageItem.dynamic.content))]):t._e()],1),t._v(" "),s("span",{staticClass:"delete-message",on:{click:function(e){return t.deleteUserMessage(t.MessageItem.id)}}},[t._v("删除")])],1)])}),[],!1,null,"5845f1cb",null).exports),O={name:"UserMessageItem",props:{MessageItem:{type:Object}},data:()=>({statusList:l.l,modelName:l.i,userMessageTypeText:l.r}),methods:{deleteUserMessage(t){this.$confirm("此操作将永久该消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("user/DELETE_USER_MESSAGE",{user_message_id:t}).then(t=>{"success"===t.state?(this.$message.success(t.message),this.$emit("delete-change")):this.$message.warning(t.message)}).catch(t=>{console.log(t)})}).catch(()=>{})},commentRender(t){let e=t;return faceQQ.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}}},N=(s("YHQV"),Object(m.a)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"user_message_list",staticClass:"user-center-message-item attention"},[s("div",{staticClass:"title"},[t._v("\n    "+t._s(t.MessageItem.actionText)+" "+t._s(t.MessageItem.create_dt)+"\n  ")]),t._v(" "),s("div",{staticClass:"main clearfix"},[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.MessageItem.sender.uid,routeType:"article"}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.MessageItem.sender.avatar,expression:"MessageItem.sender.avatar"}],staticClass:"avatar",attrs:{alt:""}}),t._v(" "),s("span",{staticClass:"nickname"},[t._v(t._s(t.MessageItem.sender.nickname))])]),t._v(" "),s("span",{staticClass:"action"},[t._v(t._s(t.userMessageTypeText[t.MessageItem.type][t.MessageItem.action]))]),t._v(" "),s("span",{staticClass:"delete-message",on:{click:function(e){return t.deleteUserMessage(t.MessageItem.id)}}},[t._v("删除")])],1),t._v(" "),s("div",{staticClass:"content"},[t.MessageItem.type===t.modelName.books?s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"book",params:{books_id:t.MessageItem.books.books_id}}}},[t._v(t._s(t.MessageItem.books.title))]):t.MessageItem.type==t.modelName.article_annex?s("router-link",{staticStyle:{color:"#df5858"},attrs:{to:{name:"article",params:{aid:t.MessageItem.article_annex.aid}}}},[t._v(t._s(t.MessageItem.article_annex.title))]):t._e()],1)])}),[],!1,null,"0fa2f72e",null).exports),B={name:"UserMessage",data:()=>({isLoading:!1,userMessageAction:l.q,userMessage:{list:[],count:0,page:1,pageSize:10}}),mounted(){this.getUserMessageList()},methods:{getUserMessageList(){this.$store.dispatch("user/GET_USER_MESSAGE_LIST",{page:this.userMessage.page||1,pageSize:this.userMessage.pageSize||10}).then(t=>{this.userMessage=t.data,this.$store.dispatch("user/GET_UNREAD_MESSAGE_COUNT"),this.isLoading=!1}).catch(()=>{this.isLoading=!1})},deleteChange(){this.getUserMessageList()},pageChange(t){this.userMessage.page=t,this.getUserMessageList()}},computed:{...Object(a.b)(["personalInfo","user"])},components:{attention:k,comment:x,reply:L,like:$,thumb:S,sell:N,Page:r.f}},D=(s("6+xG"),Object(m.a)(B,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user-message"},[s("div",{staticClass:"user-message-view"},t._l(t.userMessage.list,(function(e,a){return s("div",{key:a,staticClass:"user-message-item"},[Number(e.action)===t.userMessageAction.attention?s("attention",{attrs:{MessageItem:e},on:{"delete-change":t.deleteChange}}):Number(e.action)===t.userMessageAction.comment?s("comment",{attrs:{MessageItem:e},on:{"delete-change":t.deleteChange}}):Number(e.action)===t.userMessageAction.reply?s("reply",{attrs:{MessageItem:e},on:{"delete-change":t.deleteChange}}):Number(e.action)===t.userMessageAction.like?s("like",{attrs:{MessageItem:e},on:{"delete-change":t.deleteChange}}):Number(e.action)===t.userMessageAction.thumb?s("thumb",{attrs:{MessageItem:e},on:{"delete-change":t.deleteChange}}):Number(e.action)===t.userMessageAction.sell?s("sell",{attrs:{MessageItem:e},on:{"delete-change":t.deleteChange}}):t._e()],1)})),0),t._v(" "),s("Page",{attrs:{total:t.userMessage.count,pageSize:t.userMessage.pageSize,page:Number(t.userMessage.page)},on:{pageChange:t.pageChange}})],1)}),[],!1,null,"348259e8",null).exports),P={name:"User",metaInfo(){return{title:this.user.user.nickname,titleTemplate:`%s - ${this.website.meta.website_name||""}`,htmlAttrs:{lang:"zh"}}},data:()=>({modelName:l.i,userLevel:l.p}),asyncData:async({store:t,route:e})=>Promise.all([t.dispatch("user/GET_USER_INFO_ALL",{uid:e.params.uid})]),methods:{privateChat(){return this.personalInfo.islogin?this.user.user.uid===this.personalInfo.user.uid?(this.$message.error("自己不能和自己私聊"),!1):void this.$router.push({name:"privateChat",query:{uid:this.user.user.uid,nickname:this.user.user.nickname}}):(this.$router.push({name:"signIn"}),!1)},getLevel(){let t=0,e=this.user.user_info.experience;return e<this.userLevel.one?t=0:e<this.userLevel.two&&e>this.userLevel.one?t=1:e<this.userLevel.three&&e>this.userLevel.two?t=2:e<this.userLevel.four&&e>this.userLevel.three?t=3:e<this.userLevel.five&&e>this.userLevel.four?t=4:e>=this.userLevel.five&&(t=5),t},onUserAttention(t){return this.personalInfo.islogin?this.user.user.uid===this.personalInfo.user.uid?(this.$message.error("自己不能关注自己"),!1):void this.$confirm(t?"是否取消关注?":"是否关注?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("common/SET_ATTENTION",{associate_id:this.$route.params.uid,type:l.i.user}).then(t=>{"success"===t.state?(this.$store.dispatch("user/GET_ASSOCIATE_INFO"),this.$message.success(t.message)):this.$message.warning(t.message)})}):(this.$router.push({name:"signIn"}),!1)}},computed:{...Object(a.b)(["personalInfo","user","website"]),isAttention(){return~this.user.associateInfo.userAttentionId.indexOf(String(this.$route.params.uid))?{is_attention:!0,text:"已关注"}:{is_attention:!1,text:"关注"}}},components:{UserAside:o.a,ClientOnly:n.a,ArticleView:_,BlogView:v,BooksView:h,DynamicView:b,UserAttentionView:y,UserMessageView:D}},M=(s("T6he"),Object(m.a)(P,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("client-only",[s("section",{staticClass:"user-lay layout-content",attrs:{id:"user-center-article"}},[s("div",{staticClass:"container  box-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-8 col-md-8 main"},[s("div",{staticClass:"client-card"},[s("div",{staticClass:"main-top clearfix"},[s("router-link",{staticClass:"avatar",attrs:{to:{name:"user",params:{uid:t.user.user.uid,routeType:"article"}}}},[s("div",{staticClass:"avatar-img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.user.user.avatar,expression:"user.user.avatar"}],staticClass:"box-image",attrs:{alt:""}})])]),t._v(" "),s("div",{staticClass:"title"},[s("router-link",{staticClass:"name",attrs:{to:{name:"user",params:{uid:t.user.user.uid,routeType:"article"}}}},[t._v("\n                  "+t._s(t.user.user.nickname)+"\n                  "),s("i",{staticClass:"level-num"},[t._v("Lv"+t._s(t.getLevel()))]),t._v(" "),~[1,2].indexOf(t.user.user.sex)?s("i",{class:1===t.user.user.sex?"male el-icon-male":"female el-icon-female"}):t._e()])],1),t._v(" "),t.user.user.uid!==t.personalInfo.user.uid?s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-private-chat",on:{click:t.privateChat}},[s("i",{staticClass:"iconfont"}),t._v(" "),s("span",[t._v("私聊")])]),t._v(" "),s("button",{staticClass:"btn",class:t.isAttention.is_attention?"has":"no",on:{click:function(e){return t.onUserAttention(t.isAttention.is_attention)}}},[s("i",{staticClass:"iconfont"}),t._v(" "),s("span",[t._v(t._s(t.isAttention.text))])])]):t._e(),t._v(" "),s("div",{staticClass:"info"},[s("ul",[s("li",[s("div",{staticClass:"meta-block"},[s("router-link",{attrs:{to:{name:"user",params:{routeType:"attention"},query:{any:"me"}}}},[s("p",[t._v(t._s(t.user.userAttentionCount))]),t._v(" "),s("strong",[t._v("\n                          关注的人\n                        ")])])],1)]),t._v(" "),s("li",[s("div",{staticClass:"meta-block"},[s("router-link",{attrs:{to:{name:"user",params:{routeType:"attention"},query:{any:"other"}}}},[s("p",[t._v(t._s(t.user.otherUserAttentionCount))]),t._v(" "),s("strong",[t._v("粉丝")])])],1)]),t._v(" "),s("li",[s("div",{staticClass:"meta-block"},[s("router-link",{attrs:{to:{name:"user",params:{routeType:"article"}}}},[s("p",[t._v(t._s(t.user.userArticleCount))]),t._v(" "),s("strong",[t._v("文章")])])],1)]),t._v(" "),t.user.user.uid===t.personalInfo.user.uid&&t.personalInfo.islogin?s("li",[s("div",{staticClass:"meta-block"},[s("router-link",{attrs:{to:{name:"shellDetail"}}},[s("p",[t._v(t._s(t.user.user_info.shell_balance||0))]),t._v(" "),s("strong",[t._v("贝壳余额")])])],1)]):t._e()])])],1)]),t._v(" "),s("div",{staticClass:"client-card"},[s("ul",{staticClass:"trigger-menu"},[s("li",[s("router-link",{attrs:{to:{name:"user",params:{routeType:"article"}}}},[t._v("\n                  文章\n                ")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:{name:"user",params:{routeType:"dynamic"}}}},[t._v("\n                  片刻\n                ")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:{name:"user",params:{routeType:"books"}}}},[t._v("\n                  小书\n                ")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:{name:"user",params:{routeType:"blog"}}}},[t._v("\n                  个人专栏\n                ")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:{name:"user",params:{routeType:"attention"}}}},[t._v("\n                  关注\n                ")])],1),t._v(" "),t.personalInfo.islogin&&t.personalInfo.user.uid===t.user.user.uid?s("li",[s("router-link",{attrs:{to:{name:"user",params:{routeType:"message"}}}},[t._v("\n                  消息\n                ")])],1):t._e()]),t._v(" "),"blog"===t.$route.params.routeType?s("BlogView"):"books"===t.$route.params.routeType?s("BooksView"):"dynamic"===t.$route.params.routeType?s("DynamicView"):"attention"===t.$route.params.routeType?s("UserAttentionView"):"message"===t.$route.params.routeType?s("UserMessageView"):s("ArticleView")],1)]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-md-4 box-aside"},[s("UserAside")],1)])])])])}),[],!1,null,"2c856058",null));e.default=M.exports},x31e:function(t,e,s){"use strict";s.r(e);var a=s("qYcz"),i=s("Z4jx"),n=s("iHbI"),o=s("vuaj"),r=s.n(o),l={name:"Personal",metaInfo:()=>({title:"个人中心",htmlAttrs:{lang:"zh"}}),mounted(){this.personalInfo.islogin||this.$router.push({name:"signIn"})},computed:{...Object(n.b)(["personalInfo","user"])},components:{UserAside:a.a,ClientOnly:r.a,Collect:i.a}},c=(s("7PYw"),s("Yj/X")),m=Object(c.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("client-only",[e("section",{staticClass:"personal-lay layout-content"},[e("div",{staticClass:"container  box-container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12 col-sm-8 col-md-8 main"},[e("div",{staticClass:"client-card"},[e("ul",{staticClass:"trigger-menu"},[e("li",[e("a",{attrs:{href:"javascript:;"}},[this._v("\n                  收藏\n                ")])])]),this._v(" "),e("div",{staticClass:"collect-view"},[e("Collect")],1)])]),this._v(" "),e("div",{staticClass:"col-xs-12 col-sm-4 col-md-4 box-aside"},[e("UserAside")],1)])])])])}),[],!1,null,"4e1bf3de",null);e.default=m.exports},xIR0:function(t,e,s){},xJx1:function(t,e,s){"use strict";var a=s("v/KW"),i=s("Kvkj"),n=s("IodM"),o=s("YP4+"),r={name:"childrenItem",props:["childCommentItem","p_id","dynamicId","comentKey"],data:function(){return{isComment:!1,reply_uid:"",statusList:o.l,statusListText:o.m}},methods:{commentChange(t){this.isComment=!1,this.$emit("ChildCommentChange",t)},onReply(){this.isComment=!this.isComment,this.reply_uid=this.childCommentItem.uid},deleteComment(t){Object(n.a)({url:"/dynamic-comment/delete",method:"post",parameter:{comment_id:t}}).then(t=>{"success"===t.state?(this.$emit("deleteChildComment",this.comentKey),this.$message.success(t.message)):this.$message.warning(t.message)}).catch((function(t){console.log(t)}))},commentRender(t){let e=t;return i.j.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}},computed:{article(){return this.$store.state.article.article||{}},personalInfo(){return this.$store.state.personalInfo||{}}},components:{"comment-form":a.a}},l=(s("zB2X"),s("Yj/X")),c=Object(l.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment-item",attrs:{id:"comment"+t.childCommentItem.id}},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.childCommentItem.user.avatar,expression:"childCommentItem.user.avatar"}],staticClass:"box-image",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"comment-body"},[s("div",{staticClass:"comment-main"},[s("h4",[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.childCommentItem.user.uid,routeType:"article"}}}},[t._v(t._s(t.childCommentItem.user.nickname))]),t._v(" "),t.childCommentItem.reply_user?[s("i",{staticClass:"middle-text"},[t._v("回复")]),t._v(" "),s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.childCommentItem.reply_user.uid,routeType:"article"}}}},[t._v(t._s(t.childCommentItem.reply_user.nickname))])]:t._e()],2),t._v(" "),Number(t.childCommentItem.status)===t.statusList.reviewSuccess||Number(t.childCommentItem.status)===t.statusList.freeReview?s("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.commentRender(t.childCommentItem.content))}}):Number(t.childCommentItem.status)===t.statusList.pendingReview?s("div",{staticClass:"comment-text",staticStyle:{color:"#f96b84"}},[t._v("当前用户评论需要管理员审核才能可见")]):Number(t.childCommentItem.status)===t.statusList.reviewFail?s("div",{staticClass:"comment-text",staticStyle:{color:"#f96b84"}},[t._v("当前用户评论违规")]):t._e()]),t._v(" "),s("div",{staticClass:"comment-foot clearfix"},[s("span",[t._v(t._s(t.childCommentItem.create_dt))]),t._v(" "),Number(t.childCommentItem.status)===t.statusList.reviewSuccess||Number(t.childCommentItem.status)===t.statusList.freeReview?s("span",{directives:[{name:"show",rawName:"v-show",value:t.personalInfo.islogin,expression:"personalInfo.islogin"}],staticClass:"comment-reply",on:{click:t.onReply}},[t._v(t._s(t.isComment?"取消回复":"回复"))]):t._e(),t._v(" "),t.personalInfo.user.uid===t.childCommentItem.uid?s("span",{staticClass:"comment-delete",on:{click:function(e){return t.deleteComment(t.childCommentItem.id)}}},[t._v("删除")]):t._e()])]),t._v(" "),t.isComment?s("div",{staticClass:"comment-form-view",attrs:{id:"comment-reply"+t.childCommentItem.id}},[s("comment-form",{attrs:{reply_uid:t.reply_uid,parent_id:t.p_id,dynamicId:t.dynamicId,reply_id:t.childCommentItem.id},on:{commentChange:t.commentChange}})],1):t._e()])}),[],!1,null,"44fe10fe",null).exports,m={name:"index",props:["commentItem","dynamicId","comentKey"],data:function(){return{isComment:!1,childPage:2,isChildMore:!0,statusList:o.l,statusListText:o.m}},methods:{commentChange(t){"success"===t.state?(this.$message.success(t.message),this.$nextTick((function(){this.commentItem.children.push(t.data)}))):this.$message.warning(t.message),this.isComment=!1},getCommentList(){Object(n.a)({url:"/dynamic-comment/all",method:"get",parameter:{params:{dynamic_id:this.dynamicId,parent_id:this.commentItem.id}}}).then(t=>{this.commentItem.children=t.data.list,this.isChildMore=!1})},deleteChildComment(t){this.commentItem.children.splice(t,1)},deleteComment(t){Object(n.a)({url:"/dynamic-comment/delete",method:"post",parameter:{comment_id:t}}).then(t=>{"success"===t.state?(this.$emit("deleteComment",this.comentKey),this.$message.success(t.message)):this.$message.warning(t.message)}).catch((function(t){console.log(t)}))},commentRender(t){let e=t;return i.j.map(t=>{e=e.replace(new RegExp("\\"+t.face_text,"g"),t.face_view)}),e}},computed:{article(){return this.$store.state.article.article||{}},personalInfo(){return this.$store.state.personalInfo||{}}},components:{"comment-form":a.a,"comment-child-item":c}},d=(s("HyrC"),Object(l.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"comment_list",staticClass:"comment-item",attrs:{id:"comment"+t.commentItem.id}},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.commentItem.user.avatar,expression:"commentItem.user.avatar"}],staticClass:"box-image",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"comment-body"},[s("div",{staticClass:"comment-main"},[s("h4",[s("router-link",{staticClass:"user-info",attrs:{to:{name:"user",params:{uid:t.commentItem.user.uid,routeType:"article"}}}},[t._v(t._s(t.commentItem.user.nickname))])],1),t._v(" "),Number(t.commentItem.status)===t.statusList.reviewSuccess||Number(t.commentItem.status)===t.statusList.freeReview?s("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.commentRender(t.commentItem.content))}}):Number(t.commentItem.status)===t.statusList.pendingReview?s("div",{staticClass:"comment-text",staticStyle:{color:"#f96b84"}},[t._v("当前用户评论需要管理员审核才能可见")]):Number(t.commentItem.status)===t.statusList.reviewFail?s("div",{staticClass:"comment-text",staticStyle:{color:"#f96b84"}},[t._v("当前用户评论违规")]):t._e()]),t._v(" "),s("div",{staticClass:"comment-foot clearfix"},[s("span",[t._v(t._s(t.commentItem.create_dt))]),t._v(" "),Number(t.commentItem.status)===t.statusList.reviewSuccess||Number(t.commentItem.status)===t.statusList.freeReview?s("span",{directives:[{name:"show",rawName:"v-show",value:t.personalInfo.islogin,expression:"personalInfo.islogin"}],staticClass:"comment-reply",on:{click:function(e){t.isComment=!t.isComment}}},[t._v(t._s(t.isComment?"取消回复":"回复"))]):t._e(),t._v(" "),t.personalInfo.user.uid===t.commentItem.uid?s("span",{staticClass:"comment-delete",on:{click:function(e){return t.deleteComment(t.commentItem.id)}}},[t._v("删除")]):t._e()]),t._v(" "),t.isComment?s("div",{staticClass:"comment-form-view",attrs:{id:"comment-reply"+t.commentItem.id}},[s("comment-form",{attrs:{reply_uid:t.commentItem.uid,dynamicId:t.dynamicId,parent_id:t.commentItem.id,reply_id:t.commentItem.id},on:{commentChange:t.commentChange}})],1):t._e()]),t._v(" "),t.commentItem.children.length>0||t.isComment?s("div",{staticClass:"comment-item-children"},[t._l(t.commentItem.children,(function(e,a){return s("comment-child-item",{key:a,attrs:{comentKey:a,p_id:t.commentItem.id,dynamicId:t.dynamicId,childCommentItem:e},on:{deleteChildComment:t.deleteChildComment,ChildCommentChange:t.commentChange}})})),t._v(" "),t.commentItem.children.length>=5&&t.isChildMore?s("span",{staticClass:"more",on:{click:t.getCommentList}},[t._v("查看更多")]):t._e()],2):t._e()])}),[],!1,null,"1cd1bf94",null));e.a=d.exports},yjCX:function(t,e,s){},ysmF:function(t,e,s){"use strict";var a=s("otwO");s.n(a).a},yvsf:function(t,e,s){},z6Xr:function(t,e,s){},zB2X:function(t,e,s){"use strict";var a=s("THoR");s.n(a).a},zSuB:function(t,e,s){"use strict";var a=s("LCE+");s.n(a).a}}]);